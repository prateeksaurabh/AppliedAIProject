<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />

<title>Netflix_Movie</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<style type="text/css">
    /*!
*
* Twitter Bootstrap
*
*/
/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */
html {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
}
body {
  margin: 0;
}
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
menu,
nav,
section,
summary {
  display: block;
}
audio,
canvas,
progress,
video {
  display: inline-block;
  vertical-align: baseline;
}
audio:not([controls]) {
  display: none;
  height: 0;
}
[hidden],
template {
  display: none;
}
a {
  background-color: transparent;
}
a:active,
a:hover {
  outline: 0;
}
abbr[title] {
  border-bottom: 1px dotted;
}
b,
strong {
  font-weight: bold;
}
dfn {
  font-style: italic;
}
h1 {
  font-size: 2em;
  margin: 0.67em 0;
}
mark {
  background: #ff0;
  color: #000;
}
small {
  font-size: 80%;
}
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
img {
  border: 0;
}
svg:not(:root) {
  overflow: hidden;
}
figure {
  margin: 1em 40px;
}
hr {
  box-sizing: content-box;
  height: 0;
}
pre {
  overflow: auto;
}
code,
kbd,
pre,
samp {
  font-family: monospace, monospace;
  font-size: 1em;
}
button,
input,
optgroup,
select,
textarea {
  color: inherit;
  font: inherit;
  margin: 0;
}
button {
  overflow: visible;
}
button,
select {
  text-transform: none;
}
button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button;
  cursor: pointer;
}
button[disabled],
html input[disabled] {
  cursor: default;
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}
input {
  line-height: normal;
}
input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box;
  padding: 0;
}
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  height: auto;
}
input[type="search"] {
  -webkit-appearance: textfield;
  box-sizing: content-box;
}
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}
fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  border: 0;
  padding: 0;
}
textarea {
  overflow: auto;
}
optgroup {
  font-weight: bold;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
td,
th {
  padding: 0;
}
/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */
@media print {
  *,
  *:before,
  *:after {
    background: transparent !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  a,
  a:visited {
    text-decoration: underline;
  }
  a[href]:after {
    content: " (" attr(href) ")";
  }
  abbr[title]:after {
    content: " (" attr(title) ")";
  }
  a[href^="#"]:after,
  a[href^="javascript:"]:after {
    content: "";
  }
  pre,
  blockquote {
    border: 1px solid #999;
    page-break-inside: avoid;
  }
  thead {
    display: table-header-group;
  }
  tr,
  img {
    page-break-inside: avoid;
  }
  img {
    max-width: 100% !important;
  }
  p,
  h2,
  h3 {
    orphans: 3;
    widows: 3;
  }
  h2,
  h3 {
    page-break-after: avoid;
  }
  .navbar {
    display: none;
  }
  .btn > .caret,
  .dropup > .btn > .caret {
    border-top-color: #000 !important;
  }
  .label {
    border: 1px solid #000;
  }
  .table {
    border-collapse: collapse !important;
  }
  .table td,
  .table th {
    background-color: #fff !important;
  }
  .table-bordered th,
  .table-bordered td {
    border: 1px solid #ddd !important;
  }
}
@font-face {
  font-family: 'Glyphicons Halflings';
  src: url('../components/bootstrap/fonts/glyphicons-halflings-regular.eot');
  src: url('../components/bootstrap/fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.woff2') format('woff2'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.woff') format('woff'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.ttf') format('truetype'), url('../components/bootstrap/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular') format('svg');
}
.glyphicon {
  position: relative;
  top: 1px;
  display: inline-block;
  font-family: 'Glyphicons Halflings';
  font-style: normal;
  font-weight: normal;
  line-height: 1;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.glyphicon-asterisk:before {
  content: "\002a";
}
.glyphicon-plus:before {
  content: "\002b";
}
.glyphicon-euro:before,
.glyphicon-eur:before {
  content: "\20ac";
}
.glyphicon-minus:before {
  content: "\2212";
}
.glyphicon-cloud:before {
  content: "\2601";
}
.glyphicon-envelope:before {
  content: "\2709";
}
.glyphicon-pencil:before {
  content: "\270f";
}
.glyphicon-glass:before {
  content: "\e001";
}
.glyphicon-music:before {
  content: "\e002";
}
.glyphicon-search:before {
  content: "\e003";
}
.glyphicon-heart:before {
  content: "\e005";
}
.glyphicon-star:before {
  content: "\e006";
}
.glyphicon-star-empty:before {
  content: "\e007";
}
.glyphicon-user:before {
  content: "\e008";
}
.glyphicon-film:before {
  content: "\e009";
}
.glyphicon-th-large:before {
  content: "\e010";
}
.glyphicon-th:before {
  content: "\e011";
}
.glyphicon-th-list:before {
  content: "\e012";
}
.glyphicon-ok:before {
  content: "\e013";
}
.glyphicon-remove:before {
  content: "\e014";
}
.glyphicon-zoom-in:before {
  content: "\e015";
}
.glyphicon-zoom-out:before {
  content: "\e016";
}
.glyphicon-off:before {
  content: "\e017";
}
.glyphicon-signal:before {
  content: "\e018";
}
.glyphicon-cog:before {
  content: "\e019";
}
.glyphicon-trash:before {
  content: "\e020";
}
.glyphicon-home:before {
  content: "\e021";
}
.glyphicon-file:before {
  content: "\e022";
}
.glyphicon-time:before {
  content: "\e023";
}
.glyphicon-road:before {
  content: "\e024";
}
.glyphicon-download-alt:before {
  content: "\e025";
}
.glyphicon-download:before {
  content: "\e026";
}
.glyphicon-upload:before {
  content: "\e027";
}
.glyphicon-inbox:before {
  content: "\e028";
}
.glyphicon-play-circle:before {
  content: "\e029";
}
.glyphicon-repeat:before {
  content: "\e030";
}
.glyphicon-refresh:before {
  content: "\e031";
}
.glyphicon-list-alt:before {
  content: "\e032";
}
.glyphicon-lock:before {
  content: "\e033";
}
.glyphicon-flag:before {
  content: "\e034";
}
.glyphicon-headphones:before {
  content: "\e035";
}
.glyphicon-volume-off:before {
  content: "\e036";
}
.glyphicon-volume-down:before {
  content: "\e037";
}
.glyphicon-volume-up:before {
  content: "\e038";
}
.glyphicon-qrcode:before {
  content: "\e039";
}
.glyphicon-barcode:before {
  content: "\e040";
}
.glyphicon-tag:before {
  content: "\e041";
}
.glyphicon-tags:before {
  content: "\e042";
}
.glyphicon-book:before {
  content: "\e043";
}
.glyphicon-bookmark:before {
  content: "\e044";
}
.glyphicon-print:before {
  content: "\e045";
}
.glyphicon-camera:before {
  content: "\e046";
}
.glyphicon-font:before {
  content: "\e047";
}
.glyphicon-bold:before {
  content: "\e048";
}
.glyphicon-italic:before {
  content: "\e049";
}
.glyphicon-text-height:before {
  content: "\e050";
}
.glyphicon-text-width:before {
  content: "\e051";
}
.glyphicon-align-left:before {
  content: "\e052";
}
.glyphicon-align-center:before {
  content: "\e053";
}
.glyphicon-align-right:before {
  content: "\e054";
}
.glyphicon-align-justify:before {
  content: "\e055";
}
.glyphicon-list:before {
  content: "\e056";
}
.glyphicon-indent-left:before {
  content: "\e057";
}
.glyphicon-indent-right:before {
  content: "\e058";
}
.glyphicon-facetime-video:before {
  content: "\e059";
}
.glyphicon-picture:before {
  content: "\e060";
}
.glyphicon-map-marker:before {
  content: "\e062";
}
.glyphicon-adjust:before {
  content: "\e063";
}
.glyphicon-tint:before {
  content: "\e064";
}
.glyphicon-edit:before {
  content: "\e065";
}
.glyphicon-share:before {
  content: "\e066";
}
.glyphicon-check:before {
  content: "\e067";
}
.glyphicon-move:before {
  content: "\e068";
}
.glyphicon-step-backward:before {
  content: "\e069";
}
.glyphicon-fast-backward:before {
  content: "\e070";
}
.glyphicon-backward:before {
  content: "\e071";
}
.glyphicon-play:before {
  content: "\e072";
}
.glyphicon-pause:before {
  content: "\e073";
}
.glyphicon-stop:before {
  content: "\e074";
}
.glyphicon-forward:before {
  content: "\e075";
}
.glyphicon-fast-forward:before {
  content: "\e076";
}
.glyphicon-step-forward:before {
  content: "\e077";
}
.glyphicon-eject:before {
  content: "\e078";
}
.glyphicon-chevron-left:before {
  content: "\e079";
}
.glyphicon-chevron-right:before {
  content: "\e080";
}
.glyphicon-plus-sign:before {
  content: "\e081";
}
.glyphicon-minus-sign:before {
  content: "\e082";
}
.glyphicon-remove-sign:before {
  content: "\e083";
}
.glyphicon-ok-sign:before {
  content: "\e084";
}
.glyphicon-question-sign:before {
  content: "\e085";
}
.glyphicon-info-sign:before {
  content: "\e086";
}
.glyphicon-screenshot:before {
  content: "\e087";
}
.glyphicon-remove-circle:before {
  content: "\e088";
}
.glyphicon-ok-circle:before {
  content: "\e089";
}
.glyphicon-ban-circle:before {
  content: "\e090";
}
.glyphicon-arrow-left:before {
  content: "\e091";
}
.glyphicon-arrow-right:before {
  content: "\e092";
}
.glyphicon-arrow-up:before {
  content: "\e093";
}
.glyphicon-arrow-down:before {
  content: "\e094";
}
.glyphicon-share-alt:before {
  content: "\e095";
}
.glyphicon-resize-full:before {
  content: "\e096";
}
.glyphicon-resize-small:before {
  content: "\e097";
}
.glyphicon-exclamation-sign:before {
  content: "\e101";
}
.glyphicon-gift:before {
  content: "\e102";
}
.glyphicon-leaf:before {
  content: "\e103";
}
.glyphicon-fire:before {
  content: "\e104";
}
.glyphicon-eye-open:before {
  content: "\e105";
}
.glyphicon-eye-close:before {
  content: "\e106";
}
.glyphicon-warning-sign:before {
  content: "\e107";
}
.glyphicon-plane:before {
  content: "\e108";
}
.glyphicon-calendar:before {
  content: "\e109";
}
.glyphicon-random:before {
  content: "\e110";
}
.glyphicon-comment:before {
  content: "\e111";
}
.glyphicon-magnet:before {
  content: "\e112";
}
.glyphicon-chevron-up:before {
  content: "\e113";
}
.glyphicon-chevron-down:before {
  content: "\e114";
}
.glyphicon-retweet:before {
  content: "\e115";
}
.glyphicon-shopping-cart:before {
  content: "\e116";
}
.glyphicon-folder-close:before {
  content: "\e117";
}
.glyphicon-folder-open:before {
  content: "\e118";
}
.glyphicon-resize-vertical:before {
  content: "\e119";
}
.glyphicon-resize-horizontal:before {
  content: "\e120";
}
.glyphicon-hdd:before {
  content: "\e121";
}
.glyphicon-bullhorn:before {
  content: "\e122";
}
.glyphicon-bell:before {
  content: "\e123";
}
.glyphicon-certificate:before {
  content: "\e124";
}
.glyphicon-thumbs-up:before {
  content: "\e125";
}
.glyphicon-thumbs-down:before {
  content: "\e126";
}
.glyphicon-hand-right:before {
  content: "\e127";
}
.glyphicon-hand-left:before {
  content: "\e128";
}
.glyphicon-hand-up:before {
  content: "\e129";
}
.glyphicon-hand-down:before {
  content: "\e130";
}
.glyphicon-circle-arrow-right:before {
  content: "\e131";
}
.glyphicon-circle-arrow-left:before {
  content: "\e132";
}
.glyphicon-circle-arrow-up:before {
  content: "\e133";
}
.glyphicon-circle-arrow-down:before {
  content: "\e134";
}
.glyphicon-globe:before {
  content: "\e135";
}
.glyphicon-wrench:before {
  content: "\e136";
}
.glyphicon-tasks:before {
  content: "\e137";
}
.glyphicon-filter:before {
  content: "\e138";
}
.glyphicon-briefcase:before {
  content: "\e139";
}
.glyphicon-fullscreen:before {
  content: "\e140";
}
.glyphicon-dashboard:before {
  content: "\e141";
}
.glyphicon-paperclip:before {
  content: "\e142";
}
.glyphicon-heart-empty:before {
  content: "\e143";
}
.glyphicon-link:before {
  content: "\e144";
}
.glyphicon-phone:before {
  content: "\e145";
}
.glyphicon-pushpin:before {
  content: "\e146";
}
.glyphicon-usd:before {
  content: "\e148";
}
.glyphicon-gbp:before {
  content: "\e149";
}
.glyphicon-sort:before {
  content: "\e150";
}
.glyphicon-sort-by-alphabet:before {
  content: "\e151";
}
.glyphicon-sort-by-alphabet-alt:before {
  content: "\e152";
}
.glyphicon-sort-by-order:before {
  content: "\e153";
}
.glyphicon-sort-by-order-alt:before {
  content: "\e154";
}
.glyphicon-sort-by-attributes:before {
  content: "\e155";
}
.glyphicon-sort-by-attributes-alt:before {
  content: "\e156";
}
.glyphicon-unchecked:before {
  content: "\e157";
}
.glyphicon-expand:before {
  content: "\e158";
}
.glyphicon-collapse-down:before {
  content: "\e159";
}
.glyphicon-collapse-up:before {
  content: "\e160";
}
.glyphicon-log-in:before {
  content: "\e161";
}
.glyphicon-flash:before {
  content: "\e162";
}
.glyphicon-log-out:before {
  content: "\e163";
}
.glyphicon-new-window:before {
  content: "\e164";
}
.glyphicon-record:before {
  content: "\e165";
}
.glyphicon-save:before {
  content: "\e166";
}
.glyphicon-open:before {
  content: "\e167";
}
.glyphicon-saved:before {
  content: "\e168";
}
.glyphicon-import:before {
  content: "\e169";
}
.glyphicon-export:before {
  content: "\e170";
}
.glyphicon-send:before {
  content: "\e171";
}
.glyphicon-floppy-disk:before {
  content: "\e172";
}
.glyphicon-floppy-saved:before {
  content: "\e173";
}
.glyphicon-floppy-remove:before {
  content: "\e174";
}
.glyphicon-floppy-save:before {
  content: "\e175";
}
.glyphicon-floppy-open:before {
  content: "\e176";
}
.glyphicon-credit-card:before {
  content: "\e177";
}
.glyphicon-transfer:before {
  content: "\e178";
}
.glyphicon-cutlery:before {
  content: "\e179";
}
.glyphicon-header:before {
  content: "\e180";
}
.glyphicon-compressed:before {
  content: "\e181";
}
.glyphicon-earphone:before {
  content: "\e182";
}
.glyphicon-phone-alt:before {
  content: "\e183";
}
.glyphicon-tower:before {
  content: "\e184";
}
.glyphicon-stats:before {
  content: "\e185";
}
.glyphicon-sd-video:before {
  content: "\e186";
}
.glyphicon-hd-video:before {
  content: "\e187";
}
.glyphicon-subtitles:before {
  content: "\e188";
}
.glyphicon-sound-stereo:before {
  content: "\e189";
}
.glyphicon-sound-dolby:before {
  content: "\e190";
}
.glyphicon-sound-5-1:before {
  content: "\e191";
}
.glyphicon-sound-6-1:before {
  content: "\e192";
}
.glyphicon-sound-7-1:before {
  content: "\e193";
}
.glyphicon-copyright-mark:before {
  content: "\e194";
}
.glyphicon-registration-mark:before {
  content: "\e195";
}
.glyphicon-cloud-download:before {
  content: "\e197";
}
.glyphicon-cloud-upload:before {
  content: "\e198";
}
.glyphicon-tree-conifer:before {
  content: "\e199";
}
.glyphicon-tree-deciduous:before {
  content: "\e200";
}
.glyphicon-cd:before {
  content: "\e201";
}
.glyphicon-save-file:before {
  content: "\e202";
}
.glyphicon-open-file:before {
  content: "\e203";
}
.glyphicon-level-up:before {
  content: "\e204";
}
.glyphicon-copy:before {
  content: "\e205";
}
.glyphicon-paste:before {
  content: "\e206";
}
.glyphicon-alert:before {
  content: "\e209";
}
.glyphicon-equalizer:before {
  content: "\e210";
}
.glyphicon-king:before {
  content: "\e211";
}
.glyphicon-queen:before {
  content: "\e212";
}
.glyphicon-pawn:before {
  content: "\e213";
}
.glyphicon-bishop:before {
  content: "\e214";
}
.glyphicon-knight:before {
  content: "\e215";
}
.glyphicon-baby-formula:before {
  content: "\e216";
}
.glyphicon-tent:before {
  content: "\26fa";
}
.glyphicon-blackboard:before {
  content: "\e218";
}
.glyphicon-bed:before {
  content: "\e219";
}
.glyphicon-apple:before {
  content: "\f8ff";
}
.glyphicon-erase:before {
  content: "\e221";
}
.glyphicon-hourglass:before {
  content: "\231b";
}
.glyphicon-lamp:before {
  content: "\e223";
}
.glyphicon-duplicate:before {
  content: "\e224";
}
.glyphicon-piggy-bank:before {
  content: "\e225";
}
.glyphicon-scissors:before {
  content: "\e226";
}
.glyphicon-bitcoin:before {
  content: "\e227";
}
.glyphicon-btc:before {
  content: "\e227";
}
.glyphicon-xbt:before {
  content: "\e227";
}
.glyphicon-yen:before {
  content: "\00a5";
}
.glyphicon-jpy:before {
  content: "\00a5";
}
.glyphicon-ruble:before {
  content: "\20bd";
}
.glyphicon-rub:before {
  content: "\20bd";
}
.glyphicon-scale:before {
  content: "\e230";
}
.glyphicon-ice-lolly:before {
  content: "\e231";
}
.glyphicon-ice-lolly-tasted:before {
  content: "\e232";
}
.glyphicon-education:before {
  content: "\e233";
}
.glyphicon-option-horizontal:before {
  content: "\e234";
}
.glyphicon-option-vertical:before {
  content: "\e235";
}
.glyphicon-menu-hamburger:before {
  content: "\e236";
}
.glyphicon-modal-window:before {
  content: "\e237";
}
.glyphicon-oil:before {
  content: "\e238";
}
.glyphicon-grain:before {
  content: "\e239";
}
.glyphicon-sunglasses:before {
  content: "\e240";
}
.glyphicon-text-size:before {
  content: "\e241";
}
.glyphicon-text-color:before {
  content: "\e242";
}
.glyphicon-text-background:before {
  content: "\e243";
}
.glyphicon-object-align-top:before {
  content: "\e244";
}
.glyphicon-object-align-bottom:before {
  content: "\e245";
}
.glyphicon-object-align-horizontal:before {
  content: "\e246";
}
.glyphicon-object-align-left:before {
  content: "\e247";
}
.glyphicon-object-align-vertical:before {
  content: "\e248";
}
.glyphicon-object-align-right:before {
  content: "\e249";
}
.glyphicon-triangle-right:before {
  content: "\e250";
}
.glyphicon-triangle-left:before {
  content: "\e251";
}
.glyphicon-triangle-bottom:before {
  content: "\e252";
}
.glyphicon-triangle-top:before {
  content: "\e253";
}
.glyphicon-console:before {
  content: "\e254";
}
.glyphicon-superscript:before {
  content: "\e255";
}
.glyphicon-subscript:before {
  content: "\e256";
}
.glyphicon-menu-left:before {
  content: "\e257";
}
.glyphicon-menu-right:before {
  content: "\e258";
}
.glyphicon-menu-down:before {
  content: "\e259";
}
.glyphicon-menu-up:before {
  content: "\e260";
}
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
*:before,
*:after {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
html {
  font-size: 10px;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 13px;
  line-height: 1.42857143;
  color: #000;
  background-color: #fff;
}
input,
button,
select,
textarea {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}
a {
  color: #337ab7;
  text-decoration: none;
}
a:hover,
a:focus {
  color: #23527c;
  text-decoration: underline;
}
a:focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
figure {
  margin: 0;
}
img {
  vertical-align: middle;
}
.img-responsive,
.thumbnail > img,
.thumbnail a > img,
.carousel-inner > .item > img,
.carousel-inner > .item > a > img {
  display: block;
  max-width: 100%;
  height: auto;
}
.img-rounded {
  border-radius: 3px;
}
.img-thumbnail {
  padding: 4px;
  line-height: 1.42857143;
  background-color: #fff;
  border: 1px solid #ddd;
  border-radius: 2px;
  -webkit-transition: all 0.2s ease-in-out;
  -o-transition: all 0.2s ease-in-out;
  transition: all 0.2s ease-in-out;
  display: inline-block;
  max-width: 100%;
  height: auto;
}
.img-circle {
  border-radius: 50%;
}
hr {
  margin-top: 18px;
  margin-bottom: 18px;
  border: 0;
  border-top: 1px solid #eeeeee;
}
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}
.sr-only-focusable:active,
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  clip: auto;
}
[role="button"] {
  cursor: pointer;
}
h1,
h2,
h3,
h4,
h5,
h6,
.h1,
.h2,
.h3,
.h4,
.h5,
.h6 {
  font-family: inherit;
  font-weight: 500;
  line-height: 1.1;
  color: inherit;
}
h1 small,
h2 small,
h3 small,
h4 small,
h5 small,
h6 small,
.h1 small,
.h2 small,
.h3 small,
.h4 small,
.h5 small,
.h6 small,
h1 .small,
h2 .small,
h3 .small,
h4 .small,
h5 .small,
h6 .small,
.h1 .small,
.h2 .small,
.h3 .small,
.h4 .small,
.h5 .small,
.h6 .small {
  font-weight: normal;
  line-height: 1;
  color: #777777;
}
h1,
.h1,
h2,
.h2,
h3,
.h3 {
  margin-top: 18px;
  margin-bottom: 9px;
}
h1 small,
.h1 small,
h2 small,
.h2 small,
h3 small,
.h3 small,
h1 .small,
.h1 .small,
h2 .small,
.h2 .small,
h3 .small,
.h3 .small {
  font-size: 65%;
}
h4,
.h4,
h5,
.h5,
h6,
.h6 {
  margin-top: 9px;
  margin-bottom: 9px;
}
h4 small,
.h4 small,
h5 small,
.h5 small,
h6 small,
.h6 small,
h4 .small,
.h4 .small,
h5 .small,
.h5 .small,
h6 .small,
.h6 .small {
  font-size: 75%;
}
h1,
.h1 {
  font-size: 33px;
}
h2,
.h2 {
  font-size: 27px;
}
h3,
.h3 {
  font-size: 23px;
}
h4,
.h4 {
  font-size: 17px;
}
h5,
.h5 {
  font-size: 13px;
}
h6,
.h6 {
  font-size: 12px;
}
p {
  margin: 0 0 9px;
}
.lead {
  margin-bottom: 18px;
  font-size: 14px;
  font-weight: 300;
  line-height: 1.4;
}
@media (min-width: 768px) {
  .lead {
    font-size: 19.5px;
  }
}
small,
.small {
  font-size: 92%;
}
mark,
.mark {
  background-color: #fcf8e3;
  padding: .2em;
}
.text-left {
  text-align: left;
}
.text-right {
  text-align: right;
}
.text-center {
  text-align: center;
}
.text-justify {
  text-align: justify;
}
.text-nowrap {
  white-space: nowrap;
}
.text-lowercase {
  text-transform: lowercase;
}
.text-uppercase {
  text-transform: uppercase;
}
.text-capitalize {
  text-transform: capitalize;
}
.text-muted {
  color: #777777;
}
.text-primary {
  color: #337ab7;
}
a.text-primary:hover,
a.text-primary:focus {
  color: #286090;
}
.text-success {
  color: #3c763d;
}
a.text-success:hover,
a.text-success:focus {
  color: #2b542c;
}
.text-info {
  color: #31708f;
}
a.text-info:hover,
a.text-info:focus {
  color: #245269;
}
.text-warning {
  color: #8a6d3b;
}
a.text-warning:hover,
a.text-warning:focus {
  color: #66512c;
}
.text-danger {
  color: #a94442;
}
a.text-danger:hover,
a.text-danger:focus {
  color: #843534;
}
.bg-primary {
  color: #fff;
  background-color: #337ab7;
}
a.bg-primary:hover,
a.bg-primary:focus {
  background-color: #286090;
}
.bg-success {
  background-color: #dff0d8;
}
a.bg-success:hover,
a.bg-success:focus {
  background-color: #c1e2b3;
}
.bg-info {
  background-color: #d9edf7;
}
a.bg-info:hover,
a.bg-info:focus {
  background-color: #afd9ee;
}
.bg-warning {
  background-color: #fcf8e3;
}
a.bg-warning:hover,
a.bg-warning:focus {
  background-color: #f7ecb5;
}
.bg-danger {
  background-color: #f2dede;
}
a.bg-danger:hover,
a.bg-danger:focus {
  background-color: #e4b9b9;
}
.page-header {
  padding-bottom: 8px;
  margin: 36px 0 18px;
  border-bottom: 1px solid #eeeeee;
}
ul,
ol {
  margin-top: 0;
  margin-bottom: 9px;
}
ul ul,
ol ul,
ul ol,
ol ol {
  margin-bottom: 0;
}
.list-unstyled {
  padding-left: 0;
  list-style: none;
}
.list-inline {
  padding-left: 0;
  list-style: none;
  margin-left: -5px;
}
.list-inline > li {
  display: inline-block;
  padding-left: 5px;
  padding-right: 5px;
}
dl {
  margin-top: 0;
  margin-bottom: 18px;
}
dt,
dd {
  line-height: 1.42857143;
}
dt {
  font-weight: bold;
}
dd {
  margin-left: 0;
}
@media (min-width: 541px) {
  .dl-horizontal dt {
    float: left;
    width: 160px;
    clear: left;
    text-align: right;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .dl-horizontal dd {
    margin-left: 180px;
  }
}
abbr[title],
abbr[data-original-title] {
  cursor: help;
  border-bottom: 1px dotted #777777;
}
.initialism {
  font-size: 90%;
  text-transform: uppercase;
}
blockquote {
  padding: 9px 18px;
  margin: 0 0 18px;
  font-size: inherit;
  border-left: 5px solid #eeeeee;
}
blockquote p:last-child,
blockquote ul:last-child,
blockquote ol:last-child {
  margin-bottom: 0;
}
blockquote footer,
blockquote small,
blockquote .small {
  display: block;
  font-size: 80%;
  line-height: 1.42857143;
  color: #777777;
}
blockquote footer:before,
blockquote small:before,
blockquote .small:before {
  content: '\2014 \00A0';
}
.blockquote-reverse,
blockquote.pull-right {
  padding-right: 15px;
  padding-left: 0;
  border-right: 5px solid #eeeeee;
  border-left: 0;
  text-align: right;
}
.blockquote-reverse footer:before,
blockquote.pull-right footer:before,
.blockquote-reverse small:before,
blockquote.pull-right small:before,
.blockquote-reverse .small:before,
blockquote.pull-right .small:before {
  content: '';
}
.blockquote-reverse footer:after,
blockquote.pull-right footer:after,
.blockquote-reverse small:after,
blockquote.pull-right small:after,
.blockquote-reverse .small:after,
blockquote.pull-right .small:after {
  content: '\00A0 \2014';
}
address {
  margin-bottom: 18px;
  font-style: normal;
  line-height: 1.42857143;
}
code,
kbd,
pre,
samp {
  font-family: monospace;
}
code {
  padding: 2px 4px;
  font-size: 90%;
  color: #c7254e;
  background-color: #f9f2f4;
  border-radius: 2px;
}
kbd {
  padding: 2px 4px;
  font-size: 90%;
  color: #888;
  background-color: transparent;
  border-radius: 1px;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
}
kbd kbd {
  padding: 0;
  font-size: 100%;
  font-weight: bold;
  box-shadow: none;
}
pre {
  display: block;
  padding: 8.5px;
  margin: 0 0 9px;
  font-size: 12px;
  line-height: 1.42857143;
  word-break: break-all;
  word-wrap: break-word;
  color: #333333;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 2px;
}
pre code {
  padding: 0;
  font-size: inherit;
  color: inherit;
  white-space: pre-wrap;
  background-color: transparent;
  border-radius: 0;
}
.pre-scrollable {
  max-height: 340px;
  overflow-y: scroll;
}
.container {
  margin-right: auto;
  margin-left: auto;
  padding-left: 0px;
  padding-right: 0px;
}
@media (min-width: 768px) {
  .container {
    width: 768px;
  }
}
@media (min-width: 992px) {
  .container {
    width: 940px;
  }
}
@media (min-width: 1200px) {
  .container {
    width: 1140px;
  }
}
.container-fluid {
  margin-right: auto;
  margin-left: auto;
  padding-left: 0px;
  padding-right: 0px;
}
.row {
  margin-left: 0px;
  margin-right: 0px;
}
.col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12 {
  position: relative;
  min-height: 1px;
  padding-left: 0px;
  padding-right: 0px;
}
.col-xs-1, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9, .col-xs-10, .col-xs-11, .col-xs-12 {
  float: left;
}
.col-xs-12 {
  width: 100%;
}
.col-xs-11 {
  width: 91.66666667%;
}
.col-xs-10 {
  width: 83.33333333%;
}
.col-xs-9 {
  width: 75%;
}
.col-xs-8 {
  width: 66.66666667%;
}
.col-xs-7 {
  width: 58.33333333%;
}
.col-xs-6 {
  width: 50%;
}
.col-xs-5 {
  width: 41.66666667%;
}
.col-xs-4 {
  width: 33.33333333%;
}
.col-xs-3 {
  width: 25%;
}
.col-xs-2 {
  width: 16.66666667%;
}
.col-xs-1 {
  width: 8.33333333%;
}
.col-xs-pull-12 {
  right: 100%;
}
.col-xs-pull-11 {
  right: 91.66666667%;
}
.col-xs-pull-10 {
  right: 83.33333333%;
}
.col-xs-pull-9 {
  right: 75%;
}
.col-xs-pull-8 {
  right: 66.66666667%;
}
.col-xs-pull-7 {
  right: 58.33333333%;
}
.col-xs-pull-6 {
  right: 50%;
}
.col-xs-pull-5 {
  right: 41.66666667%;
}
.col-xs-pull-4 {
  right: 33.33333333%;
}
.col-xs-pull-3 {
  right: 25%;
}
.col-xs-pull-2 {
  right: 16.66666667%;
}
.col-xs-pull-1 {
  right: 8.33333333%;
}
.col-xs-pull-0 {
  right: auto;
}
.col-xs-push-12 {
  left: 100%;
}
.col-xs-push-11 {
  left: 91.66666667%;
}
.col-xs-push-10 {
  left: 83.33333333%;
}
.col-xs-push-9 {
  left: 75%;
}
.col-xs-push-8 {
  left: 66.66666667%;
}
.col-xs-push-7 {
  left: 58.33333333%;
}
.col-xs-push-6 {
  left: 50%;
}
.col-xs-push-5 {
  left: 41.66666667%;
}
.col-xs-push-4 {
  left: 33.33333333%;
}
.col-xs-push-3 {
  left: 25%;
}
.col-xs-push-2 {
  left: 16.66666667%;
}
.col-xs-push-1 {
  left: 8.33333333%;
}
.col-xs-push-0 {
  left: auto;
}
.col-xs-offset-12 {
  margin-left: 100%;
}
.col-xs-offset-11 {
  margin-left: 91.66666667%;
}
.col-xs-offset-10 {
  margin-left: 83.33333333%;
}
.col-xs-offset-9 {
  margin-left: 75%;
}
.col-xs-offset-8 {
  margin-left: 66.66666667%;
}
.col-xs-offset-7 {
  margin-left: 58.33333333%;
}
.col-xs-offset-6 {
  margin-left: 50%;
}
.col-xs-offset-5 {
  margin-left: 41.66666667%;
}
.col-xs-offset-4 {
  margin-left: 33.33333333%;
}
.col-xs-offset-3 {
  margin-left: 25%;
}
.col-xs-offset-2 {
  margin-left: 16.66666667%;
}
.col-xs-offset-1 {
  margin-left: 8.33333333%;
}
.col-xs-offset-0 {
  margin-left: 0%;
}
@media (min-width: 768px) {
  .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12 {
    float: left;
  }
  .col-sm-12 {
    width: 100%;
  }
  .col-sm-11 {
    width: 91.66666667%;
  }
  .col-sm-10 {
    width: 83.33333333%;
  }
  .col-sm-9 {
    width: 75%;
  }
  .col-sm-8 {
    width: 66.66666667%;
  }
  .col-sm-7 {
    width: 58.33333333%;
  }
  .col-sm-6 {
    width: 50%;
  }
  .col-sm-5 {
    width: 41.66666667%;
  }
  .col-sm-4 {
    width: 33.33333333%;
  }
  .col-sm-3 {
    width: 25%;
  }
  .col-sm-2 {
    width: 16.66666667%;
  }
  .col-sm-1 {
    width: 8.33333333%;
  }
  .col-sm-pull-12 {
    right: 100%;
  }
  .col-sm-pull-11 {
    right: 91.66666667%;
  }
  .col-sm-pull-10 {
    right: 83.33333333%;
  }
  .col-sm-pull-9 {
    right: 75%;
  }
  .col-sm-pull-8 {
    right: 66.66666667%;
  }
  .col-sm-pull-7 {
    right: 58.33333333%;
  }
  .col-sm-pull-6 {
    right: 50%;
  }
  .col-sm-pull-5 {
    right: 41.66666667%;
  }
  .col-sm-pull-4 {
    right: 33.33333333%;
  }
  .col-sm-pull-3 {
    right: 25%;
  }
  .col-sm-pull-2 {
    right: 16.66666667%;
  }
  .col-sm-pull-1 {
    right: 8.33333333%;
  }
  .col-sm-pull-0 {
    right: auto;
  }
  .col-sm-push-12 {
    left: 100%;
  }
  .col-sm-push-11 {
    left: 91.66666667%;
  }
  .col-sm-push-10 {
    left: 83.33333333%;
  }
  .col-sm-push-9 {
    left: 75%;
  }
  .col-sm-push-8 {
    left: 66.66666667%;
  }
  .col-sm-push-7 {
    left: 58.33333333%;
  }
  .col-sm-push-6 {
    left: 50%;
  }
  .col-sm-push-5 {
    left: 41.66666667%;
  }
  .col-sm-push-4 {
    left: 33.33333333%;
  }
  .col-sm-push-3 {
    left: 25%;
  }
  .col-sm-push-2 {
    left: 16.66666667%;
  }
  .col-sm-push-1 {
    left: 8.33333333%;
  }
  .col-sm-push-0 {
    left: auto;
  }
  .col-sm-offset-12 {
    margin-left: 100%;
  }
  .col-sm-offset-11 {
    margin-left: 91.66666667%;
  }
  .col-sm-offset-10 {
    margin-left: 83.33333333%;
  }
  .col-sm-offset-9 {
    margin-left: 75%;
  }
  .col-sm-offset-8 {
    margin-left: 66.66666667%;
  }
  .col-sm-offset-7 {
    margin-left: 58.33333333%;
  }
  .col-sm-offset-6 {
    margin-left: 50%;
  }
  .col-sm-offset-5 {
    margin-left: 41.66666667%;
  }
  .col-sm-offset-4 {
    margin-left: 33.33333333%;
  }
  .col-sm-offset-3 {
    margin-left: 25%;
  }
  .col-sm-offset-2 {
    margin-left: 16.66666667%;
  }
  .col-sm-offset-1 {
    margin-left: 8.33333333%;
  }
  .col-sm-offset-0 {
    margin-left: 0%;
  }
}
@media (min-width: 992px) {
  .col-md-1, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-10, .col-md-11, .col-md-12 {
    float: left;
  }
  .col-md-12 {
    width: 100%;
  }
  .col-md-11 {
    width: 91.66666667%;
  }
  .col-md-10 {
    width: 83.33333333%;
  }
  .col-md-9 {
    width: 75%;
  }
  .col-md-8 {
    width: 66.66666667%;
  }
  .col-md-7 {
    width: 58.33333333%;
  }
  .col-md-6 {
    width: 50%;
  }
  .col-md-5 {
    width: 41.66666667%;
  }
  .col-md-4 {
    width: 33.33333333%;
  }
  .col-md-3 {
    width: 25%;
  }
  .col-md-2 {
    width: 16.66666667%;
  }
  .col-md-1 {
    width: 8.33333333%;
  }
  .col-md-pull-12 {
    right: 100%;
  }
  .col-md-pull-11 {
    right: 91.66666667%;
  }
  .col-md-pull-10 {
    right: 83.33333333%;
  }
  .col-md-pull-9 {
    right: 75%;
  }
  .col-md-pull-8 {
    right: 66.66666667%;
  }
  .col-md-pull-7 {
    right: 58.33333333%;
  }
  .col-md-pull-6 {
    right: 50%;
  }
  .col-md-pull-5 {
    right: 41.66666667%;
  }
  .col-md-pull-4 {
    right: 33.33333333%;
  }
  .col-md-pull-3 {
    right: 25%;
  }
  .col-md-pull-2 {
    right: 16.66666667%;
  }
  .col-md-pull-1 {
    right: 8.33333333%;
  }
  .col-md-pull-0 {
    right: auto;
  }
  .col-md-push-12 {
    left: 100%;
  }
  .col-md-push-11 {
    left: 91.66666667%;
  }
  .col-md-push-10 {
    left: 83.33333333%;
  }
  .col-md-push-9 {
    left: 75%;
  }
  .col-md-push-8 {
    left: 66.66666667%;
  }
  .col-md-push-7 {
    left: 58.33333333%;
  }
  .col-md-push-6 {
    left: 50%;
  }
  .col-md-push-5 {
    left: 41.66666667%;
  }
  .col-md-push-4 {
    left: 33.33333333%;
  }
  .col-md-push-3 {
    left: 25%;
  }
  .col-md-push-2 {
    left: 16.66666667%;
  }
  .col-md-push-1 {
    left: 8.33333333%;
  }
  .col-md-push-0 {
    left: auto;
  }
  .col-md-offset-12 {
    margin-left: 100%;
  }
  .col-md-offset-11 {
    margin-left: 91.66666667%;
  }
  .col-md-offset-10 {
    margin-left: 83.33333333%;
  }
  .col-md-offset-9 {
    margin-left: 75%;
  }
  .col-md-offset-8 {
    margin-left: 66.66666667%;
  }
  .col-md-offset-7 {
    margin-left: 58.33333333%;
  }
  .col-md-offset-6 {
    margin-left: 50%;
  }
  .col-md-offset-5 {
    margin-left: 41.66666667%;
  }
  .col-md-offset-4 {
    margin-left: 33.33333333%;
  }
  .col-md-offset-3 {
    margin-left: 25%;
  }
  .col-md-offset-2 {
    margin-left: 16.66666667%;
  }
  .col-md-offset-1 {
    margin-left: 8.33333333%;
  }
  .col-md-offset-0 {
    margin-left: 0%;
  }
}
@media (min-width: 1200px) {
  .col-lg-1, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-10, .col-lg-11, .col-lg-12 {
    float: left;
  }
  .col-lg-12 {
    width: 100%;
  }
  .col-lg-11 {
    width: 91.66666667%;
  }
  .col-lg-10 {
    width: 83.33333333%;
  }
  .col-lg-9 {
    width: 75%;
  }
  .col-lg-8 {
    width: 66.66666667%;
  }
  .col-lg-7 {
    width: 58.33333333%;
  }
  .col-lg-6 {
    width: 50%;
  }
  .col-lg-5 {
    width: 41.66666667%;
  }
  .col-lg-4 {
    width: 33.33333333%;
  }
  .col-lg-3 {
    width: 25%;
  }
  .col-lg-2 {
    width: 16.66666667%;
  }
  .col-lg-1 {
    width: 8.33333333%;
  }
  .col-lg-pull-12 {
    right: 100%;
  }
  .col-lg-pull-11 {
    right: 91.66666667%;
  }
  .col-lg-pull-10 {
    right: 83.33333333%;
  }
  .col-lg-pull-9 {
    right: 75%;
  }
  .col-lg-pull-8 {
    right: 66.66666667%;
  }
  .col-lg-pull-7 {
    right: 58.33333333%;
  }
  .col-lg-pull-6 {
    right: 50%;
  }
  .col-lg-pull-5 {
    right: 41.66666667%;
  }
  .col-lg-pull-4 {
    right: 33.33333333%;
  }
  .col-lg-pull-3 {
    right: 25%;
  }
  .col-lg-pull-2 {
    right: 16.66666667%;
  }
  .col-lg-pull-1 {
    right: 8.33333333%;
  }
  .col-lg-pull-0 {
    right: auto;
  }
  .col-lg-push-12 {
    left: 100%;
  }
  .col-lg-push-11 {
    left: 91.66666667%;
  }
  .col-lg-push-10 {
    left: 83.33333333%;
  }
  .col-lg-push-9 {
    left: 75%;
  }
  .col-lg-push-8 {
    left: 66.66666667%;
  }
  .col-lg-push-7 {
    left: 58.33333333%;
  }
  .col-lg-push-6 {
    left: 50%;
  }
  .col-lg-push-5 {
    left: 41.66666667%;
  }
  .col-lg-push-4 {
    left: 33.33333333%;
  }
  .col-lg-push-3 {
    left: 25%;
  }
  .col-lg-push-2 {
    left: 16.66666667%;
  }
  .col-lg-push-1 {
    left: 8.33333333%;
  }
  .col-lg-push-0 {
    left: auto;
  }
  .col-lg-offset-12 {
    margin-left: 100%;
  }
  .col-lg-offset-11 {
    margin-left: 91.66666667%;
  }
  .col-lg-offset-10 {
    margin-left: 83.33333333%;
  }
  .col-lg-offset-9 {
    margin-left: 75%;
  }
  .col-lg-offset-8 {
    margin-left: 66.66666667%;
  }
  .col-lg-offset-7 {
    margin-left: 58.33333333%;
  }
  .col-lg-offset-6 {
    margin-left: 50%;
  }
  .col-lg-offset-5 {
    margin-left: 41.66666667%;
  }
  .col-lg-offset-4 {
    margin-left: 33.33333333%;
  }
  .col-lg-offset-3 {
    margin-left: 25%;
  }
  .col-lg-offset-2 {
    margin-left: 16.66666667%;
  }
  .col-lg-offset-1 {
    margin-left: 8.33333333%;
  }
  .col-lg-offset-0 {
    margin-left: 0%;
  }
}
table {
  background-color: transparent;
}
caption {
  padding-top: 8px;
  padding-bottom: 8px;
  color: #777777;
  text-align: left;
}
th {
  text-align: left;
}
.table {
  width: 100%;
  max-width: 100%;
  margin-bottom: 18px;
}
.table > thead > tr > th,
.table > tbody > tr > th,
.table > tfoot > tr > th,
.table > thead > tr > td,
.table > tbody > tr > td,
.table > tfoot > tr > td {
  padding: 8px;
  line-height: 1.42857143;
  vertical-align: top;
  border-top: 1px solid #ddd;
}
.table > thead > tr > th {
  vertical-align: bottom;
  border-bottom: 2px solid #ddd;
}
.table > caption + thead > tr:first-child > th,
.table > colgroup + thead > tr:first-child > th,
.table > thead:first-child > tr:first-child > th,
.table > caption + thead > tr:first-child > td,
.table > colgroup + thead > tr:first-child > td,
.table > thead:first-child > tr:first-child > td {
  border-top: 0;
}
.table > tbody + tbody {
  border-top: 2px solid #ddd;
}
.table .table {
  background-color: #fff;
}
.table-condensed > thead > tr > th,
.table-condensed > tbody > tr > th,
.table-condensed > tfoot > tr > th,
.table-condensed > thead > tr > td,
.table-condensed > tbody > tr > td,
.table-condensed > tfoot > tr > td {
  padding: 5px;
}
.table-bordered {
  border: 1px solid #ddd;
}
.table-bordered > thead > tr > th,
.table-bordered > tbody > tr > th,
.table-bordered > tfoot > tr > th,
.table-bordered > thead > tr > td,
.table-bordered > tbody > tr > td,
.table-bordered > tfoot > tr > td {
  border: 1px solid #ddd;
}
.table-bordered > thead > tr > th,
.table-bordered > thead > tr > td {
  border-bottom-width: 2px;
}
.table-striped > tbody > tr:nth-of-type(odd) {
  background-color: #f9f9f9;
}
.table-hover > tbody > tr:hover {
  background-color: #f5f5f5;
}
table col[class*="col-"] {
  position: static;
  float: none;
  display: table-column;
}
table td[class*="col-"],
table th[class*="col-"] {
  position: static;
  float: none;
  display: table-cell;
}
.table > thead > tr > td.active,
.table > tbody > tr > td.active,
.table > tfoot > tr > td.active,
.table > thead > tr > th.active,
.table > tbody > tr > th.active,
.table > tfoot > tr > th.active,
.table > thead > tr.active > td,
.table > tbody > tr.active > td,
.table > tfoot > tr.active > td,
.table > thead > tr.active > th,
.table > tbody > tr.active > th,
.table > tfoot > tr.active > th {
  background-color: #f5f5f5;
}
.table-hover > tbody > tr > td.active:hover,
.table-hover > tbody > tr > th.active:hover,
.table-hover > tbody > tr.active:hover > td,
.table-hover > tbody > tr:hover > .active,
.table-hover > tbody > tr.active:hover > th {
  background-color: #e8e8e8;
}
.table > thead > tr > td.success,
.table > tbody > tr > td.success,
.table > tfoot > tr > td.success,
.table > thead > tr > th.success,
.table > tbody > tr > th.success,
.table > tfoot > tr > th.success,
.table > thead > tr.success > td,
.table > tbody > tr.success > td,
.table > tfoot > tr.success > td,
.table > thead > tr.success > th,
.table > tbody > tr.success > th,
.table > tfoot > tr.success > th {
  background-color: #dff0d8;
}
.table-hover > tbody > tr > td.success:hover,
.table-hover > tbody > tr > th.success:hover,
.table-hover > tbody > tr.success:hover > td,
.table-hover > tbody > tr:hover > .success,
.table-hover > tbody > tr.success:hover > th {
  background-color: #d0e9c6;
}
.table > thead > tr > td.info,
.table > tbody > tr > td.info,
.table > tfoot > tr > td.info,
.table > thead > tr > th.info,
.table > tbody > tr > th.info,
.table > tfoot > tr > th.info,
.table > thead > tr.info > td,
.table > tbody > tr.info > td,
.table > tfoot > tr.info > td,
.table > thead > tr.info > th,
.table > tbody > tr.info > th,
.table > tfoot > tr.info > th {
  background-color: #d9edf7;
}
.table-hover > tbody > tr > td.info:hover,
.table-hover > tbody > tr > th.info:hover,
.table-hover > tbody > tr.info:hover > td,
.table-hover > tbody > tr:hover > .info,
.table-hover > tbody > tr.info:hover > th {
  background-color: #c4e3f3;
}
.table > thead > tr > td.warning,
.table > tbody > tr > td.warning,
.table > tfoot > tr > td.warning,
.table > thead > tr > th.warning,
.table > tbody > tr > th.warning,
.table > tfoot > tr > th.warning,
.table > thead > tr.warning > td,
.table > tbody > tr.warning > td,
.table > tfoot > tr.warning > td,
.table > thead > tr.warning > th,
.table > tbody > tr.warning > th,
.table > tfoot > tr.warning > th {
  background-color: #fcf8e3;
}
.table-hover > tbody > tr > td.warning:hover,
.table-hover > tbody > tr > th.warning:hover,
.table-hover > tbody > tr.warning:hover > td,
.table-hover > tbody > tr:hover > .warning,
.table-hover > tbody > tr.warning:hover > th {
  background-color: #faf2cc;
}
.table > thead > tr > td.danger,
.table > tbody > tr > td.danger,
.table > tfoot > tr > td.danger,
.table > thead > tr > th.danger,
.table > tbody > tr > th.danger,
.table > tfoot > tr > th.danger,
.table > thead > tr.danger > td,
.table > tbody > tr.danger > td,
.table > tfoot > tr.danger > td,
.table > thead > tr.danger > th,
.table > tbody > tr.danger > th,
.table > tfoot > tr.danger > th {
  background-color: #f2dede;
}
.table-hover > tbody > tr > td.danger:hover,
.table-hover > tbody > tr > th.danger:hover,
.table-hover > tbody > tr.danger:hover > td,
.table-hover > tbody > tr:hover > .danger,
.table-hover > tbody > tr.danger:hover > th {
  background-color: #ebcccc;
}
.table-responsive {
  overflow-x: auto;
  min-height: 0.01%;
}
@media screen and (max-width: 767px) {
  .table-responsive {
    width: 100%;
    margin-bottom: 13.5px;
    overflow-y: hidden;
    -ms-overflow-style: -ms-autohiding-scrollbar;
    border: 1px solid #ddd;
  }
  .table-responsive > .table {
    margin-bottom: 0;
  }
  .table-responsive > .table > thead > tr > th,
  .table-responsive > .table > tbody > tr > th,
  .table-responsive > .table > tfoot > tr > th,
  .table-responsive > .table > thead > tr > td,
  .table-responsive > .table > tbody > tr > td,
  .table-responsive > .table > tfoot > tr > td {
    white-space: nowrap;
  }
  .table-responsive > .table-bordered {
    border: 0;
  }
  .table-responsive > .table-bordered > thead > tr > th:first-child,
  .table-responsive > .table-bordered > tbody > tr > th:first-child,
  .table-responsive > .table-bordered > tfoot > tr > th:first-child,
  .table-responsive > .table-bordered > thead > tr > td:first-child,
  .table-responsive > .table-bordered > tbody > tr > td:first-child,
  .table-responsive > .table-bordered > tfoot > tr > td:first-child {
    border-left: 0;
  }
  .table-responsive > .table-bordered > thead > tr > th:last-child,
  .table-responsive > .table-bordered > tbody > tr > th:last-child,
  .table-responsive > .table-bordered > tfoot > tr > th:last-child,
  .table-responsive > .table-bordered > thead > tr > td:last-child,
  .table-responsive > .table-bordered > tbody > tr > td:last-child,
  .table-responsive > .table-bordered > tfoot > tr > td:last-child {
    border-right: 0;
  }
  .table-responsive > .table-bordered > tbody > tr:last-child > th,
  .table-responsive > .table-bordered > tfoot > tr:last-child > th,
  .table-responsive > .table-bordered > tbody > tr:last-child > td,
  .table-responsive > .table-bordered > tfoot > tr:last-child > td {
    border-bottom: 0;
  }
}
fieldset {
  padding: 0;
  margin: 0;
  border: 0;
  min-width: 0;
}
legend {
  display: block;
  width: 100%;
  padding: 0;
  margin-bottom: 18px;
  font-size: 19.5px;
  line-height: inherit;
  color: #333333;
  border: 0;
  border-bottom: 1px solid #e5e5e5;
}
label {
  display: inline-block;
  max-width: 100%;
  margin-bottom: 5px;
  font-weight: bold;
}
input[type="search"] {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
input[type="radio"],
input[type="checkbox"] {
  margin: 4px 0 0;
  margin-top: 1px \9;
  line-height: normal;
}
input[type="file"] {
  display: block;
}
input[type="range"] {
  display: block;
  width: 100%;
}
select[multiple],
select[size] {
  height: auto;
}
input[type="file"]:focus,
input[type="radio"]:focus,
input[type="checkbox"]:focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
output {
  display: block;
  padding-top: 7px;
  font-size: 13px;
  line-height: 1.42857143;
  color: #555555;
}
.form-control {
  display: block;
  width: 100%;
  height: 32px;
  padding: 6px 12px;
  font-size: 13px;
  line-height: 1.42857143;
  color: #555555;
  background-color: #fff;
  background-image: none;
  border: 1px solid #ccc;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
}
.form-control:focus {
  border-color: #66afe9;
  outline: 0;
  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
}
.form-control::-moz-placeholder {
  color: #999;
  opacity: 1;
}
.form-control:-ms-input-placeholder {
  color: #999;
}
.form-control::-webkit-input-placeholder {
  color: #999;
}
.form-control::-ms-expand {
  border: 0;
  background-color: transparent;
}
.form-control[disabled],
.form-control[readonly],
fieldset[disabled] .form-control {
  background-color: #eeeeee;
  opacity: 1;
}
.form-control[disabled],
fieldset[disabled] .form-control {
  cursor: not-allowed;
}
textarea.form-control {
  height: auto;
}
input[type="search"] {
  -webkit-appearance: none;
}
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  input[type="date"].form-control,
  input[type="time"].form-control,
  input[type="datetime-local"].form-control,
  input[type="month"].form-control {
    line-height: 32px;
  }
  input[type="date"].input-sm,
  input[type="time"].input-sm,
  input[type="datetime-local"].input-sm,
  input[type="month"].input-sm,
  .input-group-sm input[type="date"],
  .input-group-sm input[type="time"],
  .input-group-sm input[type="datetime-local"],
  .input-group-sm input[type="month"] {
    line-height: 30px;
  }
  input[type="date"].input-lg,
  input[type="time"].input-lg,
  input[type="datetime-local"].input-lg,
  input[type="month"].input-lg,
  .input-group-lg input[type="date"],
  .input-group-lg input[type="time"],
  .input-group-lg input[type="datetime-local"],
  .input-group-lg input[type="month"] {
    line-height: 45px;
  }
}
.form-group {
  margin-bottom: 15px;
}
.radio,
.checkbox {
  position: relative;
  display: block;
  margin-top: 10px;
  margin-bottom: 10px;
}
.radio label,
.checkbox label {
  min-height: 18px;
  padding-left: 20px;
  margin-bottom: 0;
  font-weight: normal;
  cursor: pointer;
}
.radio input[type="radio"],
.radio-inline input[type="radio"],
.checkbox input[type="checkbox"],
.checkbox-inline input[type="checkbox"] {
  position: absolute;
  margin-left: -20px;
  margin-top: 4px \9;
}
.radio + .radio,
.checkbox + .checkbox {
  margin-top: -5px;
}
.radio-inline,
.checkbox-inline {
  position: relative;
  display: inline-block;
  padding-left: 20px;
  margin-bottom: 0;
  vertical-align: middle;
  font-weight: normal;
  cursor: pointer;
}
.radio-inline + .radio-inline,
.checkbox-inline + .checkbox-inline {
  margin-top: 0;
  margin-left: 10px;
}
input[type="radio"][disabled],
input[type="checkbox"][disabled],
input[type="radio"].disabled,
input[type="checkbox"].disabled,
fieldset[disabled] input[type="radio"],
fieldset[disabled] input[type="checkbox"] {
  cursor: not-allowed;
}
.radio-inline.disabled,
.checkbox-inline.disabled,
fieldset[disabled] .radio-inline,
fieldset[disabled] .checkbox-inline {
  cursor: not-allowed;
}
.radio.disabled label,
.checkbox.disabled label,
fieldset[disabled] .radio label,
fieldset[disabled] .checkbox label {
  cursor: not-allowed;
}
.form-control-static {
  padding-top: 7px;
  padding-bottom: 7px;
  margin-bottom: 0;
  min-height: 31px;
}
.form-control-static.input-lg,
.form-control-static.input-sm {
  padding-left: 0;
  padding-right: 0;
}
.input-sm {
  height: 30px;
  padding: 5px 10px;
  font-size: 12px;
  line-height: 1.5;
  border-radius: 1px;
}
select.input-sm {
  height: 30px;
  line-height: 30px;
}
textarea.input-sm,
select[multiple].input-sm {
  height: auto;
}
.form-group-sm .form-control {
  height: 30px;
  padding: 5px 10px;
  font-size: 12px;
  line-height: 1.5;
  border-radius: 1px;
}
.form-group-sm select.form-control {
  height: 30px;
  line-height: 30px;
}
.form-group-sm textarea.form-control,
.form-group-sm select[multiple].form-control {
  height: auto;
}
.form-group-sm .form-control-static {
  height: 30px;
  min-height: 30px;
  padding: 6px 10px;
  font-size: 12px;
  line-height: 1.5;
}
.input-lg {
  height: 45px;
  padding: 10px 16px;
  font-size: 17px;
  line-height: 1.3333333;
  border-radius: 3px;
}
select.input-lg {
  height: 45px;
  line-height: 45px;
}
textarea.input-lg,
select[multiple].input-lg {
  height: auto;
}
.form-group-lg .form-control {
  height: 45px;
  padding: 10px 16px;
  font-size: 17px;
  line-height: 1.3333333;
  border-radius: 3px;
}
.form-group-lg select.form-control {
  height: 45px;
  line-height: 45px;
}
.form-group-lg textarea.form-control,
.form-group-lg select[multiple].form-control {
  height: auto;
}
.form-group-lg .form-control-static {
  height: 45px;
  min-height: 35px;
  padding: 11px 16px;
  font-size: 17px;
  line-height: 1.3333333;
}
.has-feedback {
  position: relative;
}
.has-feedback .form-control {
  padding-right: 40px;
}
.form-control-feedback {
  position: absolute;
  top: 0;
  right: 0;
  z-index: 2;
  display: block;
  width: 32px;
  height: 32px;
  line-height: 32px;
  text-align: center;
  pointer-events: none;
}
.input-lg + .form-control-feedback,
.input-group-lg + .form-control-feedback,
.form-group-lg .form-control + .form-control-feedback {
  width: 45px;
  height: 45px;
  line-height: 45px;
}
.input-sm + .form-control-feedback,
.input-group-sm + .form-control-feedback,
.form-group-sm .form-control + .form-control-feedback {
  width: 30px;
  height: 30px;
  line-height: 30px;
}
.has-success .help-block,
.has-success .control-label,
.has-success .radio,
.has-success .checkbox,
.has-success .radio-inline,
.has-success .checkbox-inline,
.has-success.radio label,
.has-success.checkbox label,
.has-success.radio-inline label,
.has-success.checkbox-inline label {
  color: #3c763d;
}
.has-success .form-control {
  border-color: #3c763d;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}
.has-success .form-control:focus {
  border-color: #2b542c;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;
}
.has-success .input-group-addon {
  color: #3c763d;
  border-color: #3c763d;
  background-color: #dff0d8;
}
.has-success .form-control-feedback {
  color: #3c763d;
}
.has-warning .help-block,
.has-warning .control-label,
.has-warning .radio,
.has-warning .checkbox,
.has-warning .radio-inline,
.has-warning .checkbox-inline,
.has-warning.radio label,
.has-warning.checkbox label,
.has-warning.radio-inline label,
.has-warning.checkbox-inline label {
  color: #8a6d3b;
}
.has-warning .form-control {
  border-color: #8a6d3b;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}
.has-warning .form-control:focus {
  border-color: #66512c;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;
}
.has-warning .input-group-addon {
  color: #8a6d3b;
  border-color: #8a6d3b;
  background-color: #fcf8e3;
}
.has-warning .form-control-feedback {
  color: #8a6d3b;
}
.has-error .help-block,
.has-error .control-label,
.has-error .radio,
.has-error .checkbox,
.has-error .radio-inline,
.has-error .checkbox-inline,
.has-error.radio label,
.has-error.checkbox label,
.has-error.radio-inline label,
.has-error.checkbox-inline label {
  color: #a94442;
}
.has-error .form-control {
  border-color: #a94442;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}
.has-error .form-control:focus {
  border-color: #843534;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;
}
.has-error .input-group-addon {
  color: #a94442;
  border-color: #a94442;
  background-color: #f2dede;
}
.has-error .form-control-feedback {
  color: #a94442;
}
.has-feedback label ~ .form-control-feedback {
  top: 23px;
}
.has-feedback label.sr-only ~ .form-control-feedback {
  top: 0;
}
.help-block {
  display: block;
  margin-top: 5px;
  margin-bottom: 10px;
  color: #404040;
}
@media (min-width: 768px) {
  .form-inline .form-group {
    display: inline-block;
    margin-bottom: 0;
    vertical-align: middle;
  }
  .form-inline .form-control {
    display: inline-block;
    width: auto;
    vertical-align: middle;
  }
  .form-inline .form-control-static {
    display: inline-block;
  }
  .form-inline .input-group {
    display: inline-table;
    vertical-align: middle;
  }
  .form-inline .input-group .input-group-addon,
  .form-inline .input-group .input-group-btn,
  .form-inline .input-group .form-control {
    width: auto;
  }
  .form-inline .input-group > .form-control {
    width: 100%;
  }
  .form-inline .control-label {
    margin-bottom: 0;
    vertical-align: middle;
  }
  .form-inline .radio,
  .form-inline .checkbox {
    display: inline-block;
    margin-top: 0;
    margin-bottom: 0;
    vertical-align: middle;
  }
  .form-inline .radio label,
  .form-inline .checkbox label {
    padding-left: 0;
  }
  .form-inline .radio input[type="radio"],
  .form-inline .checkbox input[type="checkbox"] {
    position: relative;
    margin-left: 0;
  }
  .form-inline .has-feedback .form-control-feedback {
    top: 0;
  }
}
.form-horizontal .radio,
.form-horizontal .checkbox,
.form-horizontal .radio-inline,
.form-horizontal .checkbox-inline {
  margin-top: 0;
  margin-bottom: 0;
  padding-top: 7px;
}
.form-horizontal .radio,
.form-horizontal .checkbox {
  min-height: 25px;
}
.form-horizontal .form-group {
  margin-left: 0px;
  margin-right: 0px;
}
@media (min-width: 768px) {
  .form-horizontal .control-label {
    text-align: right;
    margin-bottom: 0;
    padding-top: 7px;
  }
}
.form-horizontal .has-feedback .form-control-feedback {
  right: 0px;
}
@media (min-width: 768px) {
  .form-horizontal .form-group-lg .control-label {
    padding-top: 11px;
    font-size: 17px;
  }
}
@media (min-width: 768px) {
  .form-horizontal .form-group-sm .control-label {
    padding-top: 6px;
    font-size: 12px;
  }
}
.btn {
  display: inline-block;
  margin-bottom: 0;
  font-weight: normal;
  text-align: center;
  vertical-align: middle;
  touch-action: manipulation;
  cursor: pointer;
  background-image: none;
  border: 1px solid transparent;
  white-space: nowrap;
  padding: 6px 12px;
  font-size: 13px;
  line-height: 1.42857143;
  border-radius: 2px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.btn:focus,
.btn:active:focus,
.btn.active:focus,
.btn.focus,
.btn:active.focus,
.btn.active.focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
.btn:hover,
.btn:focus,
.btn.focus {
  color: #333;
  text-decoration: none;
}
.btn:active,
.btn.active {
  outline: 0;
  background-image: none;
  -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn.disabled,
.btn[disabled],
fieldset[disabled] .btn {
  cursor: not-allowed;
  opacity: 0.65;
  filter: alpha(opacity=65);
  -webkit-box-shadow: none;
  box-shadow: none;
}
a.btn.disabled,
fieldset[disabled] a.btn {
  pointer-events: none;
}
.btn-default {
  color: #333;
  background-color: #fff;
  border-color: #ccc;
}
.btn-default:focus,
.btn-default.focus {
  color: #333;
  background-color: #e6e6e6;
  border-color: #8c8c8c;
}
.btn-default:hover {
  color: #333;
  background-color: #e6e6e6;
  border-color: #adadad;
}
.btn-default:active,
.btn-default.active,
.open > .dropdown-toggle.btn-default {
  color: #333;
  background-color: #e6e6e6;
  border-color: #adadad;
}
.btn-default:active:hover,
.btn-default.active:hover,
.open > .dropdown-toggle.btn-default:hover,
.btn-default:active:focus,
.btn-default.active:focus,
.open > .dropdown-toggle.btn-default:focus,
.btn-default:active.focus,
.btn-default.active.focus,
.open > .dropdown-toggle.btn-default.focus {
  color: #333;
  background-color: #d4d4d4;
  border-color: #8c8c8c;
}
.btn-default:active,
.btn-default.active,
.open > .dropdown-toggle.btn-default {
  background-image: none;
}
.btn-default.disabled:hover,
.btn-default[disabled]:hover,
fieldset[disabled] .btn-default:hover,
.btn-default.disabled:focus,
.btn-default[disabled]:focus,
fieldset[disabled] .btn-default:focus,
.btn-default.disabled.focus,
.btn-default[disabled].focus,
fieldset[disabled] .btn-default.focus {
  background-color: #fff;
  border-color: #ccc;
}
.btn-default .badge {
  color: #fff;
  background-color: #333;
}
.btn-primary {
  color: #fff;
  background-color: #337ab7;
  border-color: #2e6da4;
}
.btn-primary:focus,
.btn-primary.focus {
  color: #fff;
  background-color: #286090;
  border-color: #122b40;
}
.btn-primary:hover {
  color: #fff;
  background-color: #286090;
  border-color: #204d74;
}
.btn-primary:active,
.btn-primary.active,
.open > .dropdown-toggle.btn-primary {
  color: #fff;
  background-color: #286090;
  border-color: #204d74;
}
.btn-primary:active:hover,
.btn-primary.active:hover,
.open > .dropdown-toggle.btn-primary:hover,
.btn-primary:active:focus,
.btn-primary.active:focus,
.open > .dropdown-toggle.btn-primary:focus,
.btn-primary:active.focus,
.btn-primary.active.focus,
.open > .dropdown-toggle.btn-primary.focus {
  color: #fff;
  background-color: #204d74;
  border-color: #122b40;
}
.btn-primary:active,
.btn-primary.active,
.open > .dropdown-toggle.btn-primary {
  background-image: none;
}
.btn-primary.disabled:hover,
.btn-primary[disabled]:hover,
fieldset[disabled] .btn-primary:hover,
.btn-primary.disabled:focus,
.btn-primary[disabled]:focus,
fieldset[disabled] .btn-primary:focus,
.btn-primary.disabled.focus,
.btn-primary[disabled].focus,
fieldset[disabled] .btn-primary.focus {
  background-color: #337ab7;
  border-color: #2e6da4;
}
.btn-primary .badge {
  color: #337ab7;
  background-color: #fff;
}
.btn-success {
  color: #fff;
  background-color: #5cb85c;
  border-color: #4cae4c;
}
.btn-success:focus,
.btn-success.focus {
  color: #fff;
  background-color: #449d44;
  border-color: #255625;
}
.btn-success:hover {
  color: #fff;
  background-color: #449d44;
  border-color: #398439;
}
.btn-success:active,
.btn-success.active,
.open > .dropdown-toggle.btn-success {
  color: #fff;
  background-color: #449d44;
  border-color: #398439;
}
.btn-success:active:hover,
.btn-success.active:hover,
.open > .dropdown-toggle.btn-success:hover,
.btn-success:active:focus,
.btn-success.active:focus,
.open > .dropdown-toggle.btn-success:focus,
.btn-success:active.focus,
.btn-success.active.focus,
.open > .dropdown-toggle.btn-success.focus {
  color: #fff;
  background-color: #398439;
  border-color: #255625;
}
.btn-success:active,
.btn-success.active,
.open > .dropdown-toggle.btn-success {
  background-image: none;
}
.btn-success.disabled:hover,
.btn-success[disabled]:hover,
fieldset[disabled] .btn-success:hover,
.btn-success.disabled:focus,
.btn-success[disabled]:focus,
fieldset[disabled] .btn-success:focus,
.btn-success.disabled.focus,
.btn-success[disabled].focus,
fieldset[disabled] .btn-success.focus {
  background-color: #5cb85c;
  border-color: #4cae4c;
}
.btn-success .badge {
  color: #5cb85c;
  background-color: #fff;
}
.btn-info {
  color: #fff;
  background-color: #5bc0de;
  border-color: #46b8da;
}
.btn-info:focus,
.btn-info.focus {
  color: #fff;
  background-color: #31b0d5;
  border-color: #1b6d85;
}
.btn-info:hover {
  color: #fff;
  background-color: #31b0d5;
  border-color: #269abc;
}
.btn-info:active,
.btn-info.active,
.open > .dropdown-toggle.btn-info {
  color: #fff;
  background-color: #31b0d5;
  border-color: #269abc;
}
.btn-info:active:hover,
.btn-info.active:hover,
.open > .dropdown-toggle.btn-info:hover,
.btn-info:active:focus,
.btn-info.active:focus,
.open > .dropdown-toggle.btn-info:focus,
.btn-info:active.focus,
.btn-info.active.focus,
.open > .dropdown-toggle.btn-info.focus {
  color: #fff;
  background-color: #269abc;
  border-color: #1b6d85;
}
.btn-info:active,
.btn-info.active,
.open > .dropdown-toggle.btn-info {
  background-image: none;
}
.btn-info.disabled:hover,
.btn-info[disabled]:hover,
fieldset[disabled] .btn-info:hover,
.btn-info.disabled:focus,
.btn-info[disabled]:focus,
fieldset[disabled] .btn-info:focus,
.btn-info.disabled.focus,
.btn-info[disabled].focus,
fieldset[disabled] .btn-info.focus {
  background-color: #5bc0de;
  border-color: #46b8da;
}
.btn-info .badge {
  color: #5bc0de;
  background-color: #fff;
}
.btn-warning {
  color: #fff;
  background-color: #f0ad4e;
  border-color: #eea236;
}
.btn-warning:focus,
.btn-warning.focus {
  color: #fff;
  background-color: #ec971f;
  border-color: #985f0d;
}
.btn-warning:hover {
  color: #fff;
  background-color: #ec971f;
  border-color: #d58512;
}
.btn-warning:active,
.btn-warning.active,
.open > .dropdown-toggle.btn-warning {
  color: #fff;
  background-color: #ec971f;
  border-color: #d58512;
}
.btn-warning:active:hover,
.btn-warning.active:hover,
.open > .dropdown-toggle.btn-warning:hover,
.btn-warning:active:focus,
.btn-warning.active:focus,
.open > .dropdown-toggle.btn-warning:focus,
.btn-warning:active.focus,
.btn-warning.active.focus,
.open > .dropdown-toggle.btn-warning.focus {
  color: #fff;
  background-color: #d58512;
  border-color: #985f0d;
}
.btn-warning:active,
.btn-warning.active,
.open > .dropdown-toggle.btn-warning {
  background-image: none;
}
.btn-warning.disabled:hover,
.btn-warning[disabled]:hover,
fieldset[disabled] .btn-warning:hover,
.btn-warning.disabled:focus,
.btn-warning[disabled]:focus,
fieldset[disabled] .btn-warning:focus,
.btn-warning.disabled.focus,
.btn-warning[disabled].focus,
fieldset[disabled] .btn-warning.focus {
  background-color: #f0ad4e;
  border-color: #eea236;
}
.btn-warning .badge {
  color: #f0ad4e;
  background-color: #fff;
}
.btn-danger {
  color: #fff;
  background-color: #d9534f;
  border-color: #d43f3a;
}
.btn-danger:focus,
.btn-danger.focus {
  color: #fff;
  background-color: #c9302c;
  border-color: #761c19;
}
.btn-danger:hover {
  color: #fff;
  background-color: #c9302c;
  border-color: #ac2925;
}
.btn-danger:active,
.btn-danger.active,
.open > .dropdown-toggle.btn-danger {
  color: #fff;
  background-color: #c9302c;
  border-color: #ac2925;
}
.btn-danger:active:hover,
.btn-danger.active:hover,
.open > .dropdown-toggle.btn-danger:hover,
.btn-danger:active:focus,
.btn-danger.active:focus,
.open > .dropdown-toggle.btn-danger:focus,
.btn-danger:active.focus,
.btn-danger.active.focus,
.open > .dropdown-toggle.btn-danger.focus {
  color: #fff;
  background-color: #ac2925;
  border-color: #761c19;
}
.btn-danger:active,
.btn-danger.active,
.open > .dropdown-toggle.btn-danger {
  background-image: none;
}
.btn-danger.disabled:hover,
.btn-danger[disabled]:hover,
fieldset[disabled] .btn-danger:hover,
.btn-danger.disabled:focus,
.btn-danger[disabled]:focus,
fieldset[disabled] .btn-danger:focus,
.btn-danger.disabled.focus,
.btn-danger[disabled].focus,
fieldset[disabled] .btn-danger.focus {
  background-color: #d9534f;
  border-color: #d43f3a;
}
.btn-danger .badge {
  color: #d9534f;
  background-color: #fff;
}
.btn-link {
  color: #337ab7;
  font-weight: normal;
  border-radius: 0;
}
.btn-link,
.btn-link:active,
.btn-link.active,
.btn-link[disabled],
fieldset[disabled] .btn-link {
  background-color: transparent;
  -webkit-box-shadow: none;
  box-shadow: none;
}
.btn-link,
.btn-link:hover,
.btn-link:focus,
.btn-link:active {
  border-color: transparent;
}
.btn-link:hover,
.btn-link:focus {
  color: #23527c;
  text-decoration: underline;
  background-color: transparent;
}
.btn-link[disabled]:hover,
fieldset[disabled] .btn-link:hover,
.btn-link[disabled]:focus,
fieldset[disabled] .btn-link:focus {
  color: #777777;
  text-decoration: none;
}
.btn-lg,
.btn-group-lg > .btn {
  padding: 10px 16px;
  font-size: 17px;
  line-height: 1.3333333;
  border-radius: 3px;
}
.btn-sm,
.btn-group-sm > .btn {
  padding: 5px 10px;
  font-size: 12px;
  line-height: 1.5;
  border-radius: 1px;
}
.btn-xs,
.btn-group-xs > .btn {
  padding: 1px 5px;
  font-size: 12px;
  line-height: 1.5;
  border-radius: 1px;
}
.btn-block {
  display: block;
  width: 100%;
}
.btn-block + .btn-block {
  margin-top: 5px;
}
input[type="submit"].btn-block,
input[type="reset"].btn-block,
input[type="button"].btn-block {
  width: 100%;
}
.fade {
  opacity: 0;
  -webkit-transition: opacity 0.15s linear;
  -o-transition: opacity 0.15s linear;
  transition: opacity 0.15s linear;
}
.fade.in {
  opacity: 1;
}
.collapse {
  display: none;
}
.collapse.in {
  display: block;
}
tr.collapse.in {
  display: table-row;
}
tbody.collapse.in {
  display: table-row-group;
}
.collapsing {
  position: relative;
  height: 0;
  overflow: hidden;
  -webkit-transition-property: height, visibility;
  transition-property: height, visibility;
  -webkit-transition-duration: 0.35s;
  transition-duration: 0.35s;
  -webkit-transition-timing-function: ease;
  transition-timing-function: ease;
}
.caret {
  display: inline-block;
  width: 0;
  height: 0;
  margin-left: 2px;
  vertical-align: middle;
  border-top: 4px dashed;
  border-top: 4px solid \9;
  border-right: 4px solid transparent;
  border-left: 4px solid transparent;
}
.dropup,
.dropdown {
  position: relative;
}
.dropdown-toggle:focus {
  outline: 0;
}
.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 1000;
  display: none;
  float: left;
  min-width: 160px;
  padding: 5px 0;
  margin: 2px 0 0;
  list-style: none;
  font-size: 13px;
  text-align: left;
  background-color: #fff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.15);
  border-radius: 2px;
  -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);
  background-clip: padding-box;
}
.dropdown-menu.pull-right {
  right: 0;
  left: auto;
}
.dropdown-menu .divider {
  height: 1px;
  margin: 8px 0;
  overflow: hidden;
  background-color: #e5e5e5;
}
.dropdown-menu > li > a {
  display: block;
  padding: 3px 20px;
  clear: both;
  font-weight: normal;
  line-height: 1.42857143;
  color: #333333;
  white-space: nowrap;
}
.dropdown-menu > li > a:hover,
.dropdown-menu > li > a:focus {
  text-decoration: none;
  color: #262626;
  background-color: #f5f5f5;
}
.dropdown-menu > .active > a,
.dropdown-menu > .active > a:hover,
.dropdown-menu > .active > a:focus {
  color: #fff;
  text-decoration: none;
  outline: 0;
  background-color: #337ab7;
}
.dropdown-menu > .disabled > a,
.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  color: #777777;
}
.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  text-decoration: none;
  background-color: transparent;
  background-image: none;
  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
  cursor: not-allowed;
}
.open > .dropdown-menu {
  display: block;
}
.open > a {
  outline: 0;
}
.dropdown-menu-right {
  left: auto;
  right: 0;
}
.dropdown-menu-left {
  left: 0;
  right: auto;
}
.dropdown-header {
  display: block;
  padding: 3px 20px;
  font-size: 12px;
  line-height: 1.42857143;
  color: #777777;
  white-space: nowrap;
}
.dropdown-backdrop {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  z-index: 990;
}
.pull-right > .dropdown-menu {
  right: 0;
  left: auto;
}
.dropup .caret,
.navbar-fixed-bottom .dropdown .caret {
  border-top: 0;
  border-bottom: 4px dashed;
  border-bottom: 4px solid \9;
  content: "";
}
.dropup .dropdown-menu,
.navbar-fixed-bottom .dropdown .dropdown-menu {
  top: auto;
  bottom: 100%;
  margin-bottom: 2px;
}
@media (min-width: 541px) {
  .navbar-right .dropdown-menu {
    left: auto;
    right: 0;
  }
  .navbar-right .dropdown-menu-left {
    left: 0;
    right: auto;
  }
}
.btn-group,
.btn-group-vertical {
  position: relative;
  display: inline-block;
  vertical-align: middle;
}
.btn-group > .btn,
.btn-group-vertical > .btn {
  position: relative;
  float: left;
}
.btn-group > .btn:hover,
.btn-group-vertical > .btn:hover,
.btn-group > .btn:focus,
.btn-group-vertical > .btn:focus,
.btn-group > .btn:active,
.btn-group-vertical > .btn:active,
.btn-group > .btn.active,
.btn-group-vertical > .btn.active {
  z-index: 2;
}
.btn-group .btn + .btn,
.btn-group .btn + .btn-group,
.btn-group .btn-group + .btn,
.btn-group .btn-group + .btn-group {
  margin-left: -1px;
}
.btn-toolbar {
  margin-left: -5px;
}
.btn-toolbar .btn,
.btn-toolbar .btn-group,
.btn-toolbar .input-group {
  float: left;
}
.btn-toolbar > .btn,
.btn-toolbar > .btn-group,
.btn-toolbar > .input-group {
  margin-left: 5px;
}
.btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {
  border-radius: 0;
}
.btn-group > .btn:first-child {
  margin-left: 0;
}
.btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {
  border-bottom-right-radius: 0;
  border-top-right-radius: 0;
}
.btn-group > .btn:last-child:not(:first-child),
.btn-group > .dropdown-toggle:not(:first-child) {
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
}
.btn-group > .btn-group {
  float: left;
}
.btn-group > .btn-group:not(:first-child):not(:last-child) > .btn {
  border-radius: 0;
}
.btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child,
.btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle {
  border-bottom-right-radius: 0;
  border-top-right-radius: 0;
}
.btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child {
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
}
.btn-group .dropdown-toggle:active,
.btn-group.open .dropdown-toggle {
  outline: 0;
}
.btn-group > .btn + .dropdown-toggle {
  padding-left: 8px;
  padding-right: 8px;
}
.btn-group > .btn-lg + .dropdown-toggle {
  padding-left: 12px;
  padding-right: 12px;
}
.btn-group.open .dropdown-toggle {
  -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn-group.open .dropdown-toggle.btn-link {
  -webkit-box-shadow: none;
  box-shadow: none;
}
.btn .caret {
  margin-left: 0;
}
.btn-lg .caret {
  border-width: 5px 5px 0;
  border-bottom-width: 0;
}
.dropup .btn-lg .caret {
  border-width: 0 5px 5px;
}
.btn-group-vertical > .btn,
.btn-group-vertical > .btn-group,
.btn-group-vertical > .btn-group > .btn {
  display: block;
  float: none;
  width: 100%;
  max-width: 100%;
}
.btn-group-vertical > .btn-group > .btn {
  float: none;
}
.btn-group-vertical > .btn + .btn,
.btn-group-vertical > .btn + .btn-group,
.btn-group-vertical > .btn-group + .btn,
.btn-group-vertical > .btn-group + .btn-group {
  margin-top: -1px;
  margin-left: 0;
}
.btn-group-vertical > .btn:not(:first-child):not(:last-child) {
  border-radius: 0;
}
.btn-group-vertical > .btn:first-child:not(:last-child) {
  border-top-right-radius: 2px;
  border-top-left-radius: 2px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group-vertical > .btn:last-child:not(:first-child) {
  border-top-right-radius: 0;
  border-top-left-radius: 0;
  border-bottom-right-radius: 2px;
  border-bottom-left-radius: 2px;
}
.btn-group-vertical > .btn-group:not(:first-child):not(:last-child) > .btn {
  border-radius: 0;
}
.btn-group-vertical > .btn-group:first-child:not(:last-child) > .btn:last-child,
.btn-group-vertical > .btn-group:first-child:not(:last-child) > .dropdown-toggle {
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group-vertical > .btn-group:last-child:not(:first-child) > .btn:first-child {
  border-top-right-radius: 0;
  border-top-left-radius: 0;
}
.btn-group-justified {
  display: table;
  width: 100%;
  table-layout: fixed;
  border-collapse: separate;
}
.btn-group-justified > .btn,
.btn-group-justified > .btn-group {
  float: none;
  display: table-cell;
  width: 1%;
}
.btn-group-justified > .btn-group .btn {
  width: 100%;
}
.btn-group-justified > .btn-group .dropdown-menu {
  left: auto;
}
[data-toggle="buttons"] > .btn input[type="radio"],
[data-toggle="buttons"] > .btn-group > .btn input[type="radio"],
[data-toggle="buttons"] > .btn input[type="checkbox"],
[data-toggle="buttons"] > .btn-group > .btn input[type="checkbox"] {
  position: absolute;
  clip: rect(0, 0, 0, 0);
  pointer-events: none;
}
.input-group {
  position: relative;
  display: table;
  border-collapse: separate;
}
.input-group[class*="col-"] {
  float: none;
  padding-left: 0;
  padding-right: 0;
}
.input-group .form-control {
  position: relative;
  z-index: 2;
  float: left;
  width: 100%;
  margin-bottom: 0;
}
.input-group .form-control:focus {
  z-index: 3;
}
.input-group-lg > .form-control,
.input-group-lg > .input-group-addon,
.input-group-lg > .input-group-btn > .btn {
  height: 45px;
  padding: 10px 16px;
  font-size: 17px;
  line-height: 1.3333333;
  border-radius: 3px;
}
select.input-group-lg > .form-control,
select.input-group-lg > .input-group-addon,
select.input-group-lg > .input-group-btn > .btn {
  height: 45px;
  line-height: 45px;
}
textarea.input-group-lg > .form-control,
textarea.input-group-lg > .input-group-addon,
textarea.input-group-lg > .input-group-btn > .btn,
select[multiple].input-group-lg > .form-control,
select[multiple].input-group-lg > .input-group-addon,
select[multiple].input-group-lg > .input-group-btn > .btn {
  height: auto;
}
.input-group-sm > .form-control,
.input-group-sm > .input-group-addon,
.input-group-sm > .input-group-btn > .btn {
  height: 30px;
  padding: 5px 10px;
  font-size: 12px;
  line-height: 1.5;
  border-radius: 1px;
}
select.input-group-sm > .form-control,
select.input-group-sm > .input-group-addon,
select.input-group-sm > .input-group-btn > .btn {
  height: 30px;
  line-height: 30px;
}
textarea.input-group-sm > .form-control,
textarea.input-group-sm > .input-group-addon,
textarea.input-group-sm > .input-group-btn > .btn,
select[multiple].input-group-sm > .form-control,
select[multiple].input-group-sm > .input-group-addon,
select[multiple].input-group-sm > .input-group-btn > .btn {
  height: auto;
}
.input-group-addon,
.input-group-btn,
.input-group .form-control {
  display: table-cell;
}
.input-group-addon:not(:first-child):not(:last-child),
.input-group-btn:not(:first-child):not(:last-child),
.input-group .form-control:not(:first-child):not(:last-child) {
  border-radius: 0;
}
.input-group-addon,
.input-group-btn {
  width: 1%;
  white-space: nowrap;
  vertical-align: middle;
}
.input-group-addon {
  padding: 6px 12px;
  font-size: 13px;
  font-weight: normal;
  line-height: 1;
  color: #555555;
  text-align: center;
  background-color: #eeeeee;
  border: 1px solid #ccc;
  border-radius: 2px;
}
.input-group-addon.input-sm {
  padding: 5px 10px;
  font-size: 12px;
  border-radius: 1px;
}
.input-group-addon.input-lg {
  padding: 10px 16px;
  font-size: 17px;
  border-radius: 3px;
}
.input-group-addon input[type="radio"],
.input-group-addon input[type="checkbox"] {
  margin-top: 0;
}
.input-group .form-control:first-child,
.input-group-addon:first-child,
.input-group-btn:first-child > .btn,
.input-group-btn:first-child > .btn-group > .btn,
.input-group-btn:first-child > .dropdown-toggle,
.input-group-btn:last-child > .btn:not(:last-child):not(.dropdown-toggle),
.input-group-btn:last-child > .btn-group:not(:last-child) > .btn {
  border-bottom-right-radius: 0;
  border-top-right-radius: 0;
}
.input-group-addon:first-child {
  border-right: 0;
}
.input-group .form-control:last-child,
.input-group-addon:last-child,
.input-group-btn:last-child > .btn,
.input-group-btn:last-child > .btn-group > .btn,
.input-group-btn:last-child > .dropdown-toggle,
.input-group-btn:first-child > .btn:not(:first-child),
.input-group-btn:first-child > .btn-group:not(:first-child) > .btn {
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
}
.input-group-addon:last-child {
  border-left: 0;
}
.input-group-btn {
  position: relative;
  font-size: 0;
  white-space: nowrap;
}
.input-group-btn > .btn {
  position: relative;
}
.input-group-btn > .btn + .btn {
  margin-left: -1px;
}
.input-group-btn > .btn:hover,
.input-group-btn > .btn:focus,
.input-group-btn > .btn:active {
  z-index: 2;
}
.input-group-btn:first-child > .btn,
.input-group-btn:first-child > .btn-group {
  margin-right: -1px;
}
.input-group-btn:last-child > .btn,
.input-group-btn:last-child > .btn-group {
  z-index: 2;
  margin-left: -1px;
}
.nav {
  margin-bottom: 0;
  padding-left: 0;
  list-style: none;
}
.nav > li {
  position: relative;
  display: block;
}
.nav > li > a {
  position: relative;
  display: block;
  padding: 10px 15px;
}
.nav > li > a:hover,
.nav > li > a:focus {
  text-decoration: none;
  background-color: #eeeeee;
}
.nav > li.disabled > a {
  color: #777777;
}
.nav > li.disabled > a:hover,
.nav > li.disabled > a:focus {
  color: #777777;
  text-decoration: none;
  background-color: transparent;
  cursor: not-allowed;
}
.nav .open > a,
.nav .open > a:hover,
.nav .open > a:focus {
  background-color: #eeeeee;
  border-color: #337ab7;
}
.nav .nav-divider {
  height: 1px;
  margin: 8px 0;
  overflow: hidden;
  background-color: #e5e5e5;
}
.nav > li > a > img {
  max-width: none;
}
.nav-tabs {
  border-bottom: 1px solid #ddd;
}
.nav-tabs > li {
  float: left;
  margin-bottom: -1px;
}
.nav-tabs > li > a {
  margin-right: 2px;
  line-height: 1.42857143;
  border: 1px solid transparent;
  border-radius: 2px 2px 0 0;
}
.nav-tabs > li > a:hover {
  border-color: #eeeeee #eeeeee #ddd;
}
.nav-tabs > li.active > a,
.nav-tabs > li.active > a:hover,
.nav-tabs > li.active > a:focus {
  color: #555555;
  background-color: #fff;
  border: 1px solid #ddd;
  border-bottom-color: transparent;
  cursor: default;
}
.nav-tabs.nav-justified {
  width: 100%;
  border-bottom: 0;
}
.nav-tabs.nav-justified > li {
  float: none;
}
.nav-tabs.nav-justified > li > a {
  text-align: center;
  margin-bottom: 5px;
}
.nav-tabs.nav-justified > .dropdown .dropdown-menu {
  top: auto;
  left: auto;
}
@media (min-width: 768px) {
  .nav-tabs.nav-justified > li {
    display: table-cell;
    width: 1%;
  }
  .nav-tabs.nav-justified > li > a {
    margin-bottom: 0;
  }
}
.nav-tabs.nav-justified > li > a {
  margin-right: 0;
  border-radius: 2px;
}
.nav-tabs.nav-justified > .active > a,
.nav-tabs.nav-justified > .active > a:hover,
.nav-tabs.nav-justified > .active > a:focus {
  border: 1px solid #ddd;
}
@media (min-width: 768px) {
  .nav-tabs.nav-justified > li > a {
    border-bottom: 1px solid #ddd;
    border-radius: 2px 2px 0 0;
  }
  .nav-tabs.nav-justified > .active > a,
  .nav-tabs.nav-justified > .active > a:hover,
  .nav-tabs.nav-justified > .active > a:focus {
    border-bottom-color: #fff;
  }
}
.nav-pills > li {
  float: left;
}
.nav-pills > li > a {
  border-radius: 2px;
}
.nav-pills > li + li {
  margin-left: 2px;
}
.nav-pills > li.active > a,
.nav-pills > li.active > a:hover,
.nav-pills > li.active > a:focus {
  color: #fff;
  background-color: #337ab7;
}
.nav-stacked > li {
  float: none;
}
.nav-stacked > li + li {
  margin-top: 2px;
  margin-left: 0;
}
.nav-justified {
  width: 100%;
}
.nav-justified > li {
  float: none;
}
.nav-justified > li > a {
  text-align: center;
  margin-bottom: 5px;
}
.nav-justified > .dropdown .dropdown-menu {
  top: auto;
  left: auto;
}
@media (min-width: 768px) {
  .nav-justified > li {
    display: table-cell;
    width: 1%;
  }
  .nav-justified > li > a {
    margin-bottom: 0;
  }
}
.nav-tabs-justified {
  border-bottom: 0;
}
.nav-tabs-justified > li > a {
  margin-right: 0;
  border-radius: 2px;
}
.nav-tabs-justified > .active > a,
.nav-tabs-justified > .active > a:hover,
.nav-tabs-justified > .active > a:focus {
  border: 1px solid #ddd;
}
@media (min-width: 768px) {
  .nav-tabs-justified > li > a {
    border-bottom: 1px solid #ddd;
    border-radius: 2px 2px 0 0;
  }
  .nav-tabs-justified > .active > a,
  .nav-tabs-justified > .active > a:hover,
  .nav-tabs-justified > .active > a:focus {
    border-bottom-color: #fff;
  }
}
.tab-content > .tab-pane {
  display: none;
}
.tab-content > .active {
  display: block;
}
.nav-tabs .dropdown-menu {
  margin-top: -1px;
  border-top-right-radius: 0;
  border-top-left-radius: 0;
}
.navbar {
  position: relative;
  min-height: 30px;
  margin-bottom: 18px;
  border: 1px solid transparent;
}
@media (min-width: 541px) {
  .navbar {
    border-radius: 2px;
  }
}
@media (min-width: 541px) {
  .navbar-header {
    float: left;
  }
}
.navbar-collapse {
  overflow-x: visible;
  padding-right: 0px;
  padding-left: 0px;
  border-top: 1px solid transparent;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
  -webkit-overflow-scrolling: touch;
}
.navbar-collapse.in {
  overflow-y: auto;
}
@media (min-width: 541px) {
  .navbar-collapse {
    width: auto;
    border-top: 0;
    box-shadow: none;
  }
  .navbar-collapse.collapse {
    display: block !important;
    height: auto !important;
    padding-bottom: 0;
    overflow: visible !important;
  }
  .navbar-collapse.in {
    overflow-y: visible;
  }
  .navbar-fixed-top .navbar-collapse,
  .navbar-static-top .navbar-collapse,
  .navbar-fixed-bottom .navbar-collapse {
    padding-left: 0;
    padding-right: 0;
  }
}
.navbar-fixed-top .navbar-collapse,
.navbar-fixed-bottom .navbar-collapse {
  max-height: 340px;
}
@media (max-device-width: 540px) and (orientation: landscape) {
  .navbar-fixed-top .navbar-collapse,
  .navbar-fixed-bottom .navbar-collapse {
    max-height: 200px;
  }
}
.container > .navbar-header,
.container-fluid > .navbar-header,
.container > .navbar-collapse,
.container-fluid > .navbar-collapse {
  margin-right: 0px;
  margin-left: 0px;
}
@media (min-width: 541px) {
  .container > .navbar-header,
  .container-fluid > .navbar-header,
  .container > .navbar-collapse,
  .container-fluid > .navbar-collapse {
    margin-right: 0;
    margin-left: 0;
  }
}
.navbar-static-top {
  z-index: 1000;
  border-width: 0 0 1px;
}
@media (min-width: 541px) {
  .navbar-static-top {
    border-radius: 0;
  }
}
.navbar-fixed-top,
.navbar-fixed-bottom {
  position: fixed;
  right: 0;
  left: 0;
  z-index: 1030;
}
@media (min-width: 541px) {
  .navbar-fixed-top,
  .navbar-fixed-bottom {
    border-radius: 0;
  }
}
.navbar-fixed-top {
  top: 0;
  border-width: 0 0 1px;
}
.navbar-fixed-bottom {
  bottom: 0;
  margin-bottom: 0;
  border-width: 1px 0 0;
}
.navbar-brand {
  float: left;
  padding: 6px 0px;
  font-size: 17px;
  line-height: 18px;
  height: 30px;
}
.navbar-brand:hover,
.navbar-brand:focus {
  text-decoration: none;
}
.navbar-brand > img {
  display: block;
}
@media (min-width: 541px) {
  .navbar > .container .navbar-brand,
  .navbar > .container-fluid .navbar-brand {
    margin-left: 0px;
  }
}
.navbar-toggle {
  position: relative;
  float: right;
  margin-right: 0px;
  padding: 9px 10px;
  margin-top: -2px;
  margin-bottom: -2px;
  background-color: transparent;
  background-image: none;
  border: 1px solid transparent;
  border-radius: 2px;
}
.navbar-toggle:focus {
  outline: 0;
}
.navbar-toggle .icon-bar {
  display: block;
  width: 22px;
  height: 2px;
  border-radius: 1px;
}
.navbar-toggle .icon-bar + .icon-bar {
  margin-top: 4px;
}
@media (min-width: 541px) {
  .navbar-toggle {
    display: none;
  }
}
.navbar-nav {
  margin: 3px 0px;
}
.navbar-nav > li > a {
  padding-top: 10px;
  padding-bottom: 10px;
  line-height: 18px;
}
@media (max-width: 540px) {
  .navbar-nav .open .dropdown-menu {
    position: static;
    float: none;
    width: auto;
    margin-top: 0;
    background-color: transparent;
    border: 0;
    box-shadow: none;
  }
  .navbar-nav .open .dropdown-menu > li > a,
  .navbar-nav .open .dropdown-menu .dropdown-header {
    padding: 5px 15px 5px 25px;
  }
  .navbar-nav .open .dropdown-menu > li > a {
    line-height: 18px;
  }
  .navbar-nav .open .dropdown-menu > li > a:hover,
  .navbar-nav .open .dropdown-menu > li > a:focus {
    background-image: none;
  }
}
@media (min-width: 541px) {
  .navbar-nav {
    float: left;
    margin: 0;
  }
  .navbar-nav > li {
    float: left;
  }
  .navbar-nav > li > a {
    padding-top: 6px;
    padding-bottom: 6px;
  }
}
.navbar-form {
  margin-left: 0px;
  margin-right: 0px;
  padding: 10px 0px;
  border-top: 1px solid transparent;
  border-bottom: 1px solid transparent;
  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1);
  margin-top: -1px;
  margin-bottom: -1px;
}
@media (min-width: 768px) {
  .navbar-form .form-group {
    display: inline-block;
    margin-bottom: 0;
    vertical-align: middle;
  }
  .navbar-form .form-control {
    display: inline-block;
    width: auto;
    vertical-align: middle;
  }
  .navbar-form .form-control-static {
    display: inline-block;
  }
  .navbar-form .input-group {
    display: inline-table;
    vertical-align: middle;
  }
  .navbar-form .input-group .input-group-addon,
  .navbar-form .input-group .input-group-btn,
  .navbar-form .input-group .form-control {
    width: auto;
  }
  .navbar-form .input-group > .form-control {
    width: 100%;
  }
  .navbar-form .control-label {
    margin-bottom: 0;
    vertical-align: middle;
  }
  .navbar-form .radio,
  .navbar-form .checkbox {
    display: inline-block;
    margin-top: 0;
    margin-bottom: 0;
    vertical-align: middle;
  }
  .navbar-form .radio label,
  .navbar-form .checkbox label {
    padding-left: 0;
  }
  .navbar-form .radio input[type="radio"],
  .navbar-form .checkbox input[type="checkbox"] {
    position: relative;
    margin-left: 0;
  }
  .navbar-form .has-feedback .form-control-feedback {
    top: 0;
  }
}
@media (max-width: 540px) {
  .navbar-form .form-group {
    margin-bottom: 5px;
  }
  .navbar-form .form-group:last-child {
    margin-bottom: 0;
  }
}
@media (min-width: 541px) {
  .navbar-form {
    width: auto;
    border: 0;
    margin-left: 0;
    margin-right: 0;
    padding-top: 0;
    padding-bottom: 0;
    -webkit-box-shadow: none;
    box-shadow: none;
  }
}
.navbar-nav > li > .dropdown-menu {
  margin-top: 0;
  border-top-right-radius: 0;
  border-top-left-radius: 0;
}
.navbar-fixed-bottom .navbar-nav > li > .dropdown-menu {
  margin-bottom: 0;
  border-top-right-radius: 2px;
  border-top-left-radius: 2px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
}
.navbar-btn {
  margin-top: -1px;
  margin-bottom: -1px;
}
.navbar-btn.btn-sm {
  margin-top: 0px;
  margin-bottom: 0px;
}
.navbar-btn.btn-xs {
  margin-top: 4px;
  margin-bottom: 4px;
}
.navbar-text {
  margin-top: 6px;
  margin-bottom: 6px;
}
@media (min-width: 541px) {
  .navbar-text {
    float: left;
    margin-left: 0px;
    margin-right: 0px;
  }
}
@media (min-width: 541px) {
  .navbar-left {
    float: left !important;
    float: left;
  }
  .navbar-right {
    float: right !important;
    float: right;
    margin-right: 0px;
  }
  .navbar-right ~ .navbar-right {
    margin-right: 0;
  }
}
.navbar-default {
  background-color: #f8f8f8;
  border-color: #e7e7e7;
}
.navbar-default .navbar-brand {
  color: #777;
}
.navbar-default .navbar-brand:hover,
.navbar-default .navbar-brand:focus {
  color: #5e5e5e;
  background-color: transparent;
}
.navbar-default .navbar-text {
  color: #777;
}
.navbar-default .navbar-nav > li > a {
  color: #777;
}
.navbar-default .navbar-nav > li > a:hover,
.navbar-default .navbar-nav > li > a:focus {
  color: #333;
  background-color: transparent;
}
.navbar-default .navbar-nav > .active > a,
.navbar-default .navbar-nav > .active > a:hover,
.navbar-default .navbar-nav > .active > a:focus {
  color: #555;
  background-color: #e7e7e7;
}
.navbar-default .navbar-nav > .disabled > a,
.navbar-default .navbar-nav > .disabled > a:hover,
.navbar-default .navbar-nav > .disabled > a:focus {
  color: #ccc;
  background-color: transparent;
}
.navbar-default .navbar-toggle {
  border-color: #ddd;
}
.navbar-default .navbar-toggle:hover,
.navbar-default .navbar-toggle:focus {
  background-color: #ddd;
}
.navbar-default .navbar-toggle .icon-bar {
  background-color: #888;
}
.navbar-default .navbar-collapse,
.navbar-default .navbar-form {
  border-color: #e7e7e7;
}
.navbar-default .navbar-nav > .open > a,
.navbar-default .navbar-nav > .open > a:hover,
.navbar-default .navbar-nav > .open > a:focus {
  background-color: #e7e7e7;
  color: #555;
}
@media (max-width: 540px) {
  .navbar-default .navbar-nav .open .dropdown-menu > li > a {
    color: #777;
  }
  .navbar-default .navbar-nav .open .dropdown-menu > li > a:hover,
  .navbar-default .navbar-nav .open .dropdown-menu > li > a:focus {
    color: #333;
    background-color: transparent;
  }
  .navbar-default .navbar-nav .open .dropdown-menu > .active > a,
  .navbar-default .navbar-nav .open .dropdown-menu > .active > a:hover,
  .navbar-default .navbar-nav .open .dropdown-menu > .active > a:focus {
    color: #555;
    background-color: #e7e7e7;
  }
  .navbar-default .navbar-nav .open .dropdown-menu > .disabled > a,
  .navbar-default .navbar-nav .open .dropdown-menu > .disabled > a:hover,
  .navbar-default .navbar-nav .open .dropdown-menu > .disabled > a:focus {
    color: #ccc;
    background-color: transparent;
  }
}
.navbar-default .navbar-link {
  color: #777;
}
.navbar-default .navbar-link:hover {
  color: #333;
}
.navbar-default .btn-link {
  color: #777;
}
.navbar-default .btn-link:hover,
.navbar-default .btn-link:focus {
  color: #333;
}
.navbar-default .btn-link[disabled]:hover,
fieldset[disabled] .navbar-default .btn-link:hover,
.navbar-default .btn-link[disabled]:focus,
fieldset[disabled] .navbar-default .btn-link:focus {
  color: #ccc;
}
.navbar-inverse {
  background-color: #222;
  border-color: #080808;
}
.navbar-inverse .navbar-brand {
  color: #9d9d9d;
}
.navbar-inverse .navbar-brand:hover,
.navbar-inverse .navbar-brand:focus {
  color: #fff;
  background-color: transparent;
}
.navbar-inverse .navbar-text {
  color: #9d9d9d;
}
.navbar-inverse .navbar-nav > li > a {
  color: #9d9d9d;
}
.navbar-inverse .navbar-nav > li > a:hover,
.navbar-inverse .navbar-nav > li > a:focus {
  color: #fff;
  background-color: transparent;
}
.navbar-inverse .navbar-nav > .active > a,
.navbar-inverse .navbar-nav > .active > a:hover,
.navbar-inverse .navbar-nav > .active > a:focus {
  color: #fff;
  background-color: #080808;
}
.navbar-inverse .navbar-nav > .disabled > a,
.navbar-inverse .navbar-nav > .disabled > a:hover,
.navbar-inverse .navbar-nav > .disabled > a:focus {
  color: #444;
  background-color: transparent;
}
.navbar-inverse .navbar-toggle {
  border-color: #333;
}
.navbar-inverse .navbar-toggle:hover,
.navbar-inverse .navbar-toggle:focus {
  background-color: #333;
}
.navbar-inverse .navbar-toggle .icon-bar {
  background-color: #fff;
}
.navbar-inverse .navbar-collapse,
.navbar-inverse .navbar-form {
  border-color: #101010;
}
.navbar-inverse .navbar-nav > .open > a,
.navbar-inverse .navbar-nav > .open > a:hover,
.navbar-inverse .navbar-nav > .open > a:focus {
  background-color: #080808;
  color: #fff;
}
@media (max-width: 540px) {
  .navbar-inverse .navbar-nav .open .dropdown-menu > .dropdown-header {
    border-color: #080808;
  }
  .navbar-inverse .navbar-nav .open .dropdown-menu .divider {
    background-color: #080808;
  }
  .navbar-inverse .navbar-nav .open .dropdown-menu > li > a {
    color: #9d9d9d;
  }
  .navbar-inverse .navbar-nav .open .dropdown-menu > li > a:hover,
  .navbar-inverse .navbar-nav .open .dropdown-menu > li > a:focus {
    color: #fff;
    background-color: transparent;
  }
  .navbar-inverse .navbar-nav .open .dropdown-menu > .active > a,
  .navbar-inverse .navbar-nav .open .dropdown-menu > .active > a:hover,
  .navbar-inverse .navbar-nav .open .dropdown-menu > .active > a:focus {
    color: #fff;
    background-color: #080808;
  }
  .navbar-inverse .navbar-nav .open .dropdown-menu > .disabled > a,
  .navbar-inverse .navbar-nav .open .dropdown-menu > .disabled > a:hover,
  .navbar-inverse .navbar-nav .open .dropdown-menu > .disabled > a:focus {
    color: #444;
    background-color: transparent;
  }
}
.navbar-inverse .navbar-link {
  color: #9d9d9d;
}
.navbar-inverse .navbar-link:hover {
  color: #fff;
}
.navbar-inverse .btn-link {
  color: #9d9d9d;
}
.navbar-inverse .btn-link:hover,
.navbar-inverse .btn-link:focus {
  color: #fff;
}
.navbar-inverse .btn-link[disabled]:hover,
fieldset[disabled] .navbar-inverse .btn-link:hover,
.navbar-inverse .btn-link[disabled]:focus,
fieldset[disabled] .navbar-inverse .btn-link:focus {
  color: #444;
}
.breadcrumb {
  padding: 8px 15px;
  margin-bottom: 18px;
  list-style: none;
  background-color: #f5f5f5;
  border-radius: 2px;
}
.breadcrumb > li {
  display: inline-block;
}
.breadcrumb > li + li:before {
  content: "/\00a0";
  padding: 0 5px;
  color: #5e5e5e;
}
.breadcrumb > .active {
  color: #777777;
}
.pagination {
  display: inline-block;
  padding-left: 0;
  margin: 18px 0;
  border-radius: 2px;
}
.pagination > li {
  display: inline;
}
.pagination > li > a,
.pagination > li > span {
  position: relative;
  float: left;
  padding: 6px 12px;
  line-height: 1.42857143;
  text-decoration: none;
  color: #337ab7;
  background-color: #fff;
  border: 1px solid #ddd;
  margin-left: -1px;
}
.pagination > li:first-child > a,
.pagination > li:first-child > span {
  margin-left: 0;
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.pagination > li:last-child > a,
.pagination > li:last-child > span {
  border-bottom-right-radius: 2px;
  border-top-right-radius: 2px;
}
.pagination > li > a:hover,
.pagination > li > span:hover,
.pagination > li > a:focus,
.pagination > li > span:focus {
  z-index: 2;
  color: #23527c;
  background-color: #eeeeee;
  border-color: #ddd;
}
.pagination > .active > a,
.pagination > .active > span,
.pagination > .active > a:hover,
.pagination > .active > span:hover,
.pagination > .active > a:focus,
.pagination > .active > span:focus {
  z-index: 3;
  color: #fff;
  background-color: #337ab7;
  border-color: #337ab7;
  cursor: default;
}
.pagination > .disabled > span,
.pagination > .disabled > span:hover,
.pagination > .disabled > span:focus,
.pagination > .disabled > a,
.pagination > .disabled > a:hover,
.pagination > .disabled > a:focus {
  color: #777777;
  background-color: #fff;
  border-color: #ddd;
  cursor: not-allowed;
}
.pagination-lg > li > a,
.pagination-lg > li > span {
  padding: 10px 16px;
  font-size: 17px;
  line-height: 1.3333333;
}
.pagination-lg > li:first-child > a,
.pagination-lg > li:first-child > span {
  border-bottom-left-radius: 3px;
  border-top-left-radius: 3px;
}
.pagination-lg > li:last-child > a,
.pagination-lg > li:last-child > span {
  border-bottom-right-radius: 3px;
  border-top-right-radius: 3px;
}
.pagination-sm > li > a,
.pagination-sm > li > span {
  padding: 5px 10px;
  font-size: 12px;
  line-height: 1.5;
}
.pagination-sm > li:first-child > a,
.pagination-sm > li:first-child > span {
  border-bottom-left-radius: 1px;
  border-top-left-radius: 1px;
}
.pagination-sm > li:last-child > a,
.pagination-sm > li:last-child > span {
  border-bottom-right-radius: 1px;
  border-top-right-radius: 1px;
}
.pager {
  padding-left: 0;
  margin: 18px 0;
  list-style: none;
  text-align: center;
}
.pager li {
  display: inline;
}
.pager li > a,
.pager li > span {
  display: inline-block;
  padding: 5px 14px;
  background-color: #fff;
  border: 1px solid #ddd;
  border-radius: 15px;
}
.pager li > a:hover,
.pager li > a:focus {
  text-decoration: none;
  background-color: #eeeeee;
}
.pager .next > a,
.pager .next > span {
  float: right;
}
.pager .previous > a,
.pager .previous > span {
  float: left;
}
.pager .disabled > a,
.pager .disabled > a:hover,
.pager .disabled > a:focus,
.pager .disabled > span {
  color: #777777;
  background-color: #fff;
  cursor: not-allowed;
}
.label {
  display: inline;
  padding: .2em .6em .3em;
  font-size: 75%;
  font-weight: bold;
  line-height: 1;
  color: #fff;
  text-align: center;
  white-space: nowrap;
  vertical-align: baseline;
  border-radius: .25em;
}
a.label:hover,
a.label:focus {
  color: #fff;
  text-decoration: none;
  cursor: pointer;
}
.label:empty {
  display: none;
}
.btn .label {
  position: relative;
  top: -1px;
}
.label-default {
  background-color: #777777;
}
.label-default[href]:hover,
.label-default[href]:focus {
  background-color: #5e5e5e;
}
.label-primary {
  background-color: #337ab7;
}
.label-primary[href]:hover,
.label-primary[href]:focus {
  background-color: #286090;
}
.label-success {
  background-color: #5cb85c;
}
.label-success[href]:hover,
.label-success[href]:focus {
  background-color: #449d44;
}
.label-info {
  background-color: #5bc0de;
}
.label-info[href]:hover,
.label-info[href]:focus {
  background-color: #31b0d5;
}
.label-warning {
  background-color: #f0ad4e;
}
.label-warning[href]:hover,
.label-warning[href]:focus {
  background-color: #ec971f;
}
.label-danger {
  background-color: #d9534f;
}
.label-danger[href]:hover,
.label-danger[href]:focus {
  background-color: #c9302c;
}
.badge {
  display: inline-block;
  min-width: 10px;
  padding: 3px 7px;
  font-size: 12px;
  font-weight: bold;
  color: #fff;
  line-height: 1;
  vertical-align: middle;
  white-space: nowrap;
  text-align: center;
  background-color: #777777;
  border-radius: 10px;
}
.badge:empty {
  display: none;
}
.btn .badge {
  position: relative;
  top: -1px;
}
.btn-xs .badge,
.btn-group-xs > .btn .badge {
  top: 0;
  padding: 1px 5px;
}
a.badge:hover,
a.badge:focus {
  color: #fff;
  text-decoration: none;
  cursor: pointer;
}
.list-group-item.active > .badge,
.nav-pills > .active > a > .badge {
  color: #337ab7;
  background-color: #fff;
}
.list-group-item > .badge {
  float: right;
}
.list-group-item > .badge + .badge {
  margin-right: 5px;
}
.nav-pills > li > a > .badge {
  margin-left: 3px;
}
.jumbotron {
  padding-top: 30px;
  padding-bottom: 30px;
  margin-bottom: 30px;
  color: inherit;
  background-color: #eeeeee;
}
.jumbotron h1,
.jumbotron .h1 {
  color: inherit;
}
.jumbotron p {
  margin-bottom: 15px;
  font-size: 20px;
  font-weight: 200;
}
.jumbotron > hr {
  border-top-color: #d5d5d5;
}
.container .jumbotron,
.container-fluid .jumbotron {
  border-radius: 3px;
  padding-left: 0px;
  padding-right: 0px;
}
.jumbotron .container {
  max-width: 100%;
}
@media screen and (min-width: 768px) {
  .jumbotron {
    padding-top: 48px;
    padding-bottom: 48px;
  }
  .container .jumbotron,
  .container-fluid .jumbotron {
    padding-left: 60px;
    padding-right: 60px;
  }
  .jumbotron h1,
  .jumbotron .h1 {
    font-size: 59px;
  }
}
.thumbnail {
  display: block;
  padding: 4px;
  margin-bottom: 18px;
  line-height: 1.42857143;
  background-color: #fff;
  border: 1px solid #ddd;
  border-radius: 2px;
  -webkit-transition: border 0.2s ease-in-out;
  -o-transition: border 0.2s ease-in-out;
  transition: border 0.2s ease-in-out;
}
.thumbnail > img,
.thumbnail a > img {
  margin-left: auto;
  margin-right: auto;
}
a.thumbnail:hover,
a.thumbnail:focus,
a.thumbnail.active {
  border-color: #337ab7;
}
.thumbnail .caption {
  padding: 9px;
  color: #000;
}
.alert {
  padding: 15px;
  margin-bottom: 18px;
  border: 1px solid transparent;
  border-radius: 2px;
}
.alert h4 {
  margin-top: 0;
  color: inherit;
}
.alert .alert-link {
  font-weight: bold;
}
.alert > p,
.alert > ul {
  margin-bottom: 0;
}
.alert > p + p {
  margin-top: 5px;
}
.alert-dismissable,
.alert-dismissible {
  padding-right: 35px;
}
.alert-dismissable .close,
.alert-dismissible .close {
  position: relative;
  top: -2px;
  right: -21px;
  color: inherit;
}
.alert-success {
  background-color: #dff0d8;
  border-color: #d6e9c6;
  color: #3c763d;
}
.alert-success hr {
  border-top-color: #c9e2b3;
}
.alert-success .alert-link {
  color: #2b542c;
}
.alert-info {
  background-color: #d9edf7;
  border-color: #bce8f1;
  color: #31708f;
}
.alert-info hr {
  border-top-color: #a6e1ec;
}
.alert-info .alert-link {
  color: #245269;
}
.alert-warning {
  background-color: #fcf8e3;
  border-color: #faebcc;
  color: #8a6d3b;
}
.alert-warning hr {
  border-top-color: #f7e1b5;
}
.alert-warning .alert-link {
  color: #66512c;
}
.alert-danger {
  background-color: #f2dede;
  border-color: #ebccd1;
  color: #a94442;
}
.alert-danger hr {
  border-top-color: #e4b9c0;
}
.alert-danger .alert-link {
  color: #843534;
}
@-webkit-keyframes progress-bar-stripes {
  from {
    background-position: 40px 0;
  }
  to {
    background-position: 0 0;
  }
}
@keyframes progress-bar-stripes {
  from {
    background-position: 40px 0;
  }
  to {
    background-position: 0 0;
  }
}
.progress {
  overflow: hidden;
  height: 18px;
  margin-bottom: 18px;
  background-color: #f5f5f5;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}
.progress-bar {
  float: left;
  width: 0%;
  height: 100%;
  font-size: 12px;
  line-height: 18px;
  color: #fff;
  text-align: center;
  background-color: #337ab7;
  -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  -webkit-transition: width 0.6s ease;
  -o-transition: width 0.6s ease;
  transition: width 0.6s ease;
}
.progress-striped .progress-bar,
.progress-bar-striped {
  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-size: 40px 40px;
}
.progress.active .progress-bar,
.progress-bar.active {
  -webkit-animation: progress-bar-stripes 2s linear infinite;
  -o-animation: progress-bar-stripes 2s linear infinite;
  animation: progress-bar-stripes 2s linear infinite;
}
.progress-bar-success {
  background-color: #5cb85c;
}
.progress-striped .progress-bar-success {
  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
}
.progress-bar-info {
  background-color: #5bc0de;
}
.progress-striped .progress-bar-info {
  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
}
.progress-bar-warning {
  background-color: #f0ad4e;
}
.progress-striped .progress-bar-warning {
  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
}
.progress-bar-danger {
  background-color: #d9534f;
}
.progress-striped .progress-bar-danger {
  background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
  background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
}
.media {
  margin-top: 15px;
}
.media:first-child {
  margin-top: 0;
}
.media,
.media-body {
  zoom: 1;
  overflow: hidden;
}
.media-body {
  width: 10000px;
}
.media-object {
  display: block;
}
.media-object.img-thumbnail {
  max-width: none;
}
.media-right,
.media > .pull-right {
  padding-left: 10px;
}
.media-left,
.media > .pull-left {
  padding-right: 10px;
}
.media-left,
.media-right,
.media-body {
  display: table-cell;
  vertical-align: top;
}
.media-middle {
  vertical-align: middle;
}
.media-bottom {
  vertical-align: bottom;
}
.media-heading {
  margin-top: 0;
  margin-bottom: 5px;
}
.media-list {
  padding-left: 0;
  list-style: none;
}
.list-group {
  margin-bottom: 20px;
  padding-left: 0;
}
.list-group-item {
  position: relative;
  display: block;
  padding: 10px 15px;
  margin-bottom: -1px;
  background-color: #fff;
  border: 1px solid #ddd;
}
.list-group-item:first-child {
  border-top-right-radius: 2px;
  border-top-left-radius: 2px;
}
.list-group-item:last-child {
  margin-bottom: 0;
  border-bottom-right-radius: 2px;
  border-bottom-left-radius: 2px;
}
a.list-group-item,
button.list-group-item {
  color: #555;
}
a.list-group-item .list-group-item-heading,
button.list-group-item .list-group-item-heading {
  color: #333;
}
a.list-group-item:hover,
button.list-group-item:hover,
a.list-group-item:focus,
button.list-group-item:focus {
  text-decoration: none;
  color: #555;
  background-color: #f5f5f5;
}
button.list-group-item {
  width: 100%;
  text-align: left;
}
.list-group-item.disabled,
.list-group-item.disabled:hover,
.list-group-item.disabled:focus {
  background-color: #eeeeee;
  color: #777777;
  cursor: not-allowed;
}
.list-group-item.disabled .list-group-item-heading,
.list-group-item.disabled:hover .list-group-item-heading,
.list-group-item.disabled:focus .list-group-item-heading {
  color: inherit;
}
.list-group-item.disabled .list-group-item-text,
.list-group-item.disabled:hover .list-group-item-text,
.list-group-item.disabled:focus .list-group-item-text {
  color: #777777;
}
.list-group-item.active,
.list-group-item.active:hover,
.list-group-item.active:focus {
  z-index: 2;
  color: #fff;
  background-color: #337ab7;
  border-color: #337ab7;
}
.list-group-item.active .list-group-item-heading,
.list-group-item.active:hover .list-group-item-heading,
.list-group-item.active:focus .list-group-item-heading,
.list-group-item.active .list-group-item-heading > small,
.list-group-item.active:hover .list-group-item-heading > small,
.list-group-item.active:focus .list-group-item-heading > small,
.list-group-item.active .list-group-item-heading > .small,
.list-group-item.active:hover .list-group-item-heading > .small,
.list-group-item.active:focus .list-group-item-heading > .small {
  color: inherit;
}
.list-group-item.active .list-group-item-text,
.list-group-item.active:hover .list-group-item-text,
.list-group-item.active:focus .list-group-item-text {
  color: #c7ddef;
}
.list-group-item-success {
  color: #3c763d;
  background-color: #dff0d8;
}
a.list-group-item-success,
button.list-group-item-success {
  color: #3c763d;
}
a.list-group-item-success .list-group-item-heading,
button.list-group-item-success .list-group-item-heading {
  color: inherit;
}
a.list-group-item-success:hover,
button.list-group-item-success:hover,
a.list-group-item-success:focus,
button.list-group-item-success:focus {
  color: #3c763d;
  background-color: #d0e9c6;
}
a.list-group-item-success.active,
button.list-group-item-success.active,
a.list-group-item-success.active:hover,
button.list-group-item-success.active:hover,
a.list-group-item-success.active:focus,
button.list-group-item-success.active:focus {
  color: #fff;
  background-color: #3c763d;
  border-color: #3c763d;
}
.list-group-item-info {
  color: #31708f;
  background-color: #d9edf7;
}
a.list-group-item-info,
button.list-group-item-info {
  color: #31708f;
}
a.list-group-item-info .list-group-item-heading,
button.list-group-item-info .list-group-item-heading {
  color: inherit;
}
a.list-group-item-info:hover,
button.list-group-item-info:hover,
a.list-group-item-info:focus,
button.list-group-item-info:focus {
  color: #31708f;
  background-color: #c4e3f3;
}
a.list-group-item-info.active,
button.list-group-item-info.active,
a.list-group-item-info.active:hover,
button.list-group-item-info.active:hover,
a.list-group-item-info.active:focus,
button.list-group-item-info.active:focus {
  color: #fff;
  background-color: #31708f;
  border-color: #31708f;
}
.list-group-item-warning {
  color: #8a6d3b;
  background-color: #fcf8e3;
}
a.list-group-item-warning,
button.list-group-item-warning {
  color: #8a6d3b;
}
a.list-group-item-warning .list-group-item-heading,
button.list-group-item-warning .list-group-item-heading {
  color: inherit;
}
a.list-group-item-warning:hover,
button.list-group-item-warning:hover,
a.list-group-item-warning:focus,
button.list-group-item-warning:focus {
  color: #8a6d3b;
  background-color: #faf2cc;
}
a.list-group-item-warning.active,
button.list-group-item-warning.active,
a.list-group-item-warning.active:hover,
button.list-group-item-warning.active:hover,
a.list-group-item-warning.active:focus,
button.list-group-item-warning.active:focus {
  color: #fff;
  background-color: #8a6d3b;
  border-color: #8a6d3b;
}
.list-group-item-danger {
  color: #a94442;
  background-color: #f2dede;
}
a.list-group-item-danger,
button.list-group-item-danger {
  color: #a94442;
}
a.list-group-item-danger .list-group-item-heading,
button.list-group-item-danger .list-group-item-heading {
  color: inherit;
}
a.list-group-item-danger:hover,
button.list-group-item-danger:hover,
a.list-group-item-danger:focus,
button.list-group-item-danger:focus {
  color: #a94442;
  background-color: #ebcccc;
}
a.list-group-item-danger.active,
button.list-group-item-danger.active,
a.list-group-item-danger.active:hover,
button.list-group-item-danger.active:hover,
a.list-group-item-danger.active:focus,
button.list-group-item-danger.active:focus {
  color: #fff;
  background-color: #a94442;
  border-color: #a94442;
}
.list-group-item-heading {
  margin-top: 0;
  margin-bottom: 5px;
}
.list-group-item-text {
  margin-bottom: 0;
  line-height: 1.3;
}
.panel {
  margin-bottom: 18px;
  background-color: #fff;
  border: 1px solid transparent;
  border-radius: 2px;
  -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
}
.panel-body {
  padding: 15px;
}
.panel-heading {
  padding: 10px 15px;
  border-bottom: 1px solid transparent;
  border-top-right-radius: 1px;
  border-top-left-radius: 1px;
}
.panel-heading > .dropdown .dropdown-toggle {
  color: inherit;
}
.panel-title {
  margin-top: 0;
  margin-bottom: 0;
  font-size: 15px;
  color: inherit;
}
.panel-title > a,
.panel-title > small,
.panel-title > .small,
.panel-title > small > a,
.panel-title > .small > a {
  color: inherit;
}
.panel-footer {
  padding: 10px 15px;
  background-color: #f5f5f5;
  border-top: 1px solid #ddd;
  border-bottom-right-radius: 1px;
  border-bottom-left-radius: 1px;
}
.panel > .list-group,
.panel > .panel-collapse > .list-group {
  margin-bottom: 0;
}
.panel > .list-group .list-group-item,
.panel > .panel-collapse > .list-group .list-group-item {
  border-width: 1px 0;
  border-radius: 0;
}
.panel > .list-group:first-child .list-group-item:first-child,
.panel > .panel-collapse > .list-group:first-child .list-group-item:first-child {
  border-top: 0;
  border-top-right-radius: 1px;
  border-top-left-radius: 1px;
}
.panel > .list-group:last-child .list-group-item:last-child,
.panel > .panel-collapse > .list-group:last-child .list-group-item:last-child {
  border-bottom: 0;
  border-bottom-right-radius: 1px;
  border-bottom-left-radius: 1px;
}
.panel > .panel-heading + .panel-collapse > .list-group .list-group-item:first-child {
  border-top-right-radius: 0;
  border-top-left-radius: 0;
}
.panel-heading + .list-group .list-group-item:first-child {
  border-top-width: 0;
}
.list-group + .panel-footer {
  border-top-width: 0;
}
.panel > .table,
.panel > .table-responsive > .table,
.panel > .panel-collapse > .table {
  margin-bottom: 0;
}
.panel > .table caption,
.panel > .table-responsive > .table caption,
.panel > .panel-collapse > .table caption {
  padding-left: 15px;
  padding-right: 15px;
}
.panel > .table:first-child,
.panel > .table-responsive:first-child > .table:first-child {
  border-top-right-radius: 1px;
  border-top-left-radius: 1px;
}
.panel > .table:first-child > thead:first-child > tr:first-child,
.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child,
.panel > .table:first-child > tbody:first-child > tr:first-child,
.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child {
  border-top-left-radius: 1px;
  border-top-right-radius: 1px;
}
.panel > .table:first-child > thead:first-child > tr:first-child td:first-child,
.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child td:first-child,
.panel > .table:first-child > tbody:first-child > tr:first-child td:first-child,
.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child td:first-child,
.panel > .table:first-child > thead:first-child > tr:first-child th:first-child,
.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child th:first-child,
.panel > .table:first-child > tbody:first-child > tr:first-child th:first-child,
.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child th:first-child {
  border-top-left-radius: 1px;
}
.panel > .table:first-child > thead:first-child > tr:first-child td:last-child,
.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child td:last-child,
.panel > .table:first-child > tbody:first-child > tr:first-child td:last-child,
.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child td:last-child,
.panel > .table:first-child > thead:first-child > tr:first-child th:last-child,
.panel > .table-responsive:first-child > .table:first-child > thead:first-child > tr:first-child th:last-child,
.panel > .table:first-child > tbody:first-child > tr:first-child th:last-child,
.panel > .table-responsive:first-child > .table:first-child > tbody:first-child > tr:first-child th:last-child {
  border-top-right-radius: 1px;
}
.panel > .table:last-child,
.panel > .table-responsive:last-child > .table:last-child {
  border-bottom-right-radius: 1px;
  border-bottom-left-radius: 1px;
}
.panel > .table:last-child > tbody:last-child > tr:last-child,
.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child,
.panel > .table:last-child > tfoot:last-child > tr:last-child,
.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child {
  border-bottom-left-radius: 1px;
  border-bottom-right-radius: 1px;
}
.panel > .table:last-child > tbody:last-child > tr:last-child td:first-child,
.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child td:first-child,
.panel > .table:last-child > tfoot:last-child > tr:last-child td:first-child,
.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child td:first-child,
.panel > .table:last-child > tbody:last-child > tr:last-child th:first-child,
.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child th:first-child,
.panel > .table:last-child > tfoot:last-child > tr:last-child th:first-child,
.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child th:first-child {
  border-bottom-left-radius: 1px;
}
.panel > .table:last-child > tbody:last-child > tr:last-child td:last-child,
.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child td:last-child,
.panel > .table:last-child > tfoot:last-child > tr:last-child td:last-child,
.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child td:last-child,
.panel > .table:last-child > tbody:last-child > tr:last-child th:last-child,
.panel > .table-responsive:last-child > .table:last-child > tbody:last-child > tr:last-child th:last-child,
.panel > .table:last-child > tfoot:last-child > tr:last-child th:last-child,
.panel > .table-responsive:last-child > .table:last-child > tfoot:last-child > tr:last-child th:last-child {
  border-bottom-right-radius: 1px;
}
.panel > .panel-body + .table,
.panel > .panel-body + .table-responsive,
.panel > .table + .panel-body,
.panel > .table-responsive + .panel-body {
  border-top: 1px solid #ddd;
}
.panel > .table > tbody:first-child > tr:first-child th,
.panel > .table > tbody:first-child > tr:first-child td {
  border-top: 0;
}
.panel > .table-bordered,
.panel > .table-responsive > .table-bordered {
  border: 0;
}
.panel > .table-bordered > thead > tr > th:first-child,
.panel > .table-responsive > .table-bordered > thead > tr > th:first-child,
.panel > .table-bordered > tbody > tr > th:first-child,
.panel > .table-responsive > .table-bordered > tbody > tr > th:first-child,
.panel > .table-bordered > tfoot > tr > th:first-child,
.panel > .table-responsive > .table-bordered > tfoot > tr > th:first-child,
.panel > .table-bordered > thead > tr > td:first-child,
.panel > .table-responsive > .table-bordered > thead > tr > td:first-child,
.panel > .table-bordered > tbody > tr > td:first-child,
.panel > .table-responsive > .table-bordered > tbody > tr > td:first-child,
.panel > .table-bordered > tfoot > tr > td:first-child,
.panel > .table-responsive > .table-bordered > tfoot > tr > td:first-child {
  border-left: 0;
}
.panel > .table-bordered > thead > tr > th:last-child,
.panel > .table-responsive > .table-bordered > thead > tr > th:last-child,
.panel > .table-bordered > tbody > tr > th:last-child,
.panel > .table-responsive > .table-bordered > tbody > tr > th:last-child,
.panel > .table-bordered > tfoot > tr > th:last-child,
.panel > .table-responsive > .table-bordered > tfoot > tr > th:last-child,
.panel > .table-bordered > thead > tr > td:last-child,
.panel > .table-responsive > .table-bordered > thead > tr > td:last-child,
.panel > .table-bordered > tbody > tr > td:last-child,
.panel > .table-responsive > .table-bordered > tbody > tr > td:last-child,
.panel > .table-bordered > tfoot > tr > td:last-child,
.panel > .table-responsive > .table-bordered > tfoot > tr > td:last-child {
  border-right: 0;
}
.panel > .table-bordered > thead > tr:first-child > td,
.panel > .table-responsive > .table-bordered > thead > tr:first-child > td,
.panel > .table-bordered > tbody > tr:first-child > td,
.panel > .table-responsive > .table-bordered > tbody > tr:first-child > td,
.panel > .table-bordered > thead > tr:first-child > th,
.panel > .table-responsive > .table-bordered > thead > tr:first-child > th,
.panel > .table-bordered > tbody > tr:first-child > th,
.panel > .table-responsive > .table-bordered > tbody > tr:first-child > th {
  border-bottom: 0;
}
.panel > .table-bordered > tbody > tr:last-child > td,
.panel > .table-responsive > .table-bordered > tbody > tr:last-child > td,
.panel > .table-bordered > tfoot > tr:last-child > td,
.panel > .table-responsive > .table-bordered > tfoot > tr:last-child > td,
.panel > .table-bordered > tbody > tr:last-child > th,
.panel > .table-responsive > .table-bordered > tbody > tr:last-child > th,
.panel > .table-bordered > tfoot > tr:last-child > th,
.panel > .table-responsive > .table-bordered > tfoot > tr:last-child > th {
  border-bottom: 0;
}
.panel > .table-responsive {
  border: 0;
  margin-bottom: 0;
}
.panel-group {
  margin-bottom: 18px;
}
.panel-group .panel {
  margin-bottom: 0;
  border-radius: 2px;
}
.panel-group .panel + .panel {
  margin-top: 5px;
}
.panel-group .panel-heading {
  border-bottom: 0;
}
.panel-group .panel-heading + .panel-collapse > .panel-body,
.panel-group .panel-heading + .panel-collapse > .list-group {
  border-top: 1px solid #ddd;
}
.panel-group .panel-footer {
  border-top: 0;
}
.panel-group .panel-footer + .panel-collapse .panel-body {
  border-bottom: 1px solid #ddd;
}
.panel-default {
  border-color: #ddd;
}
.panel-default > .panel-heading {
  color: #333333;
  background-color: #f5f5f5;
  border-color: #ddd;
}
.panel-default > .panel-heading + .panel-collapse > .panel-body {
  border-top-color: #ddd;
}
.panel-default > .panel-heading .badge {
  color: #f5f5f5;
  background-color: #333333;
}
.panel-default > .panel-footer + .panel-collapse > .panel-body {
  border-bottom-color: #ddd;
}
.panel-primary {
  border-color: #337ab7;
}
.panel-primary > .panel-heading {
  color: #fff;
  background-color: #337ab7;
  border-color: #337ab7;
}
.panel-primary > .panel-heading + .panel-collapse > .panel-body {
  border-top-color: #337ab7;
}
.panel-primary > .panel-heading .badge {
  color: #337ab7;
  background-color: #fff;
}
.panel-primary > .panel-footer + .panel-collapse > .panel-body {
  border-bottom-color: #337ab7;
}
.panel-success {
  border-color: #d6e9c6;
}
.panel-success > .panel-heading {
  color: #3c763d;
  background-color: #dff0d8;
  border-color: #d6e9c6;
}
.panel-success > .panel-heading + .panel-collapse > .panel-body {
  border-top-color: #d6e9c6;
}
.panel-success > .panel-heading .badge {
  color: #dff0d8;
  background-color: #3c763d;
}
.panel-success > .panel-footer + .panel-collapse > .panel-body {
  border-bottom-color: #d6e9c6;
}
.panel-info {
  border-color: #bce8f1;
}
.panel-info > .panel-heading {
  color: #31708f;
  background-color: #d9edf7;
  border-color: #bce8f1;
}
.panel-info > .panel-heading + .panel-collapse > .panel-body {
  border-top-color: #bce8f1;
}
.panel-info > .panel-heading .badge {
  color: #d9edf7;
  background-color: #31708f;
}
.panel-info > .panel-footer + .panel-collapse > .panel-body {
  border-bottom-color: #bce8f1;
}
.panel-warning {
  border-color: #faebcc;
}
.panel-warning > .panel-heading {
  color: #8a6d3b;
  background-color: #fcf8e3;
  border-color: #faebcc;
}
.panel-warning > .panel-heading + .panel-collapse > .panel-body {
  border-top-color: #faebcc;
}
.panel-warning > .panel-heading .badge {
  color: #fcf8e3;
  background-color: #8a6d3b;
}
.panel-warning > .panel-footer + .panel-collapse > .panel-body {
  border-bottom-color: #faebcc;
}
.panel-danger {
  border-color: #ebccd1;
}
.panel-danger > .panel-heading {
  color: #a94442;
  background-color: #f2dede;
  border-color: #ebccd1;
}
.panel-danger > .panel-heading + .panel-collapse > .panel-body {
  border-top-color: #ebccd1;
}
.panel-danger > .panel-heading .badge {
  color: #f2dede;
  background-color: #a94442;
}
.panel-danger > .panel-footer + .panel-collapse > .panel-body {
  border-bottom-color: #ebccd1;
}
.embed-responsive {
  position: relative;
  display: block;
  height: 0;
  padding: 0;
  overflow: hidden;
}
.embed-responsive .embed-responsive-item,
.embed-responsive iframe,
.embed-responsive embed,
.embed-responsive object,
.embed-responsive video {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  height: 100%;
  width: 100%;
  border: 0;
}
.embed-responsive-16by9 {
  padding-bottom: 56.25%;
}
.embed-responsive-4by3 {
  padding-bottom: 75%;
}
.well {
  min-height: 20px;
  padding: 19px;
  margin-bottom: 20px;
  background-color: #f5f5f5;
  border: 1px solid #e3e3e3;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.05);
}
.well blockquote {
  border-color: #ddd;
  border-color: rgba(0, 0, 0, 0.15);
}
.well-lg {
  padding: 24px;
  border-radius: 3px;
}
.well-sm {
  padding: 9px;
  border-radius: 1px;
}
.close {
  float: right;
  font-size: 19.5px;
  font-weight: bold;
  line-height: 1;
  color: #000;
  text-shadow: 0 1px 0 #fff;
  opacity: 0.2;
  filter: alpha(opacity=20);
}
.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
  opacity: 0.5;
  filter: alpha(opacity=50);
}
button.close {
  padding: 0;
  cursor: pointer;
  background: transparent;
  border: 0;
  -webkit-appearance: none;
}
.modal-open {
  overflow: hidden;
}
.modal {
  display: none;
  overflow: hidden;
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 1050;
  -webkit-overflow-scrolling: touch;
  outline: 0;
}
.modal.fade .modal-dialog {
  -webkit-transform: translate(0, -25%);
  -ms-transform: translate(0, -25%);
  -o-transform: translate(0, -25%);
  transform: translate(0, -25%);
  -webkit-transition: -webkit-transform 0.3s ease-out;
  -moz-transition: -moz-transform 0.3s ease-out;
  -o-transition: -o-transform 0.3s ease-out;
  transition: transform 0.3s ease-out;
}
.modal.in .modal-dialog {
  -webkit-transform: translate(0, 0);
  -ms-transform: translate(0, 0);
  -o-transform: translate(0, 0);
  transform: translate(0, 0);
}
.modal-open .modal {
  overflow-x: hidden;
  overflow-y: auto;
}
.modal-dialog {
  position: relative;
  width: auto;
  margin: 10px;
}
.modal-content {
  position: relative;
  background-color: #fff;
  border: 1px solid #999;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 3px;
  -webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);
  box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);
  background-clip: padding-box;
  outline: 0;
}
.modal-backdrop {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 1040;
  background-color: #000;
}
.modal-backdrop.fade {
  opacity: 0;
  filter: alpha(opacity=0);
}
.modal-backdrop.in {
  opacity: 0.5;
  filter: alpha(opacity=50);
}
.modal-header {
  padding: 15px;
  border-bottom: 1px solid #e5e5e5;
}
.modal-header .close {
  margin-top: -2px;
}
.modal-title {
  margin: 0;
  line-height: 1.42857143;
}
.modal-body {
  position: relative;
  padding: 15px;
}
.modal-footer {
  padding: 15px;
  text-align: right;
  border-top: 1px solid #e5e5e5;
}
.modal-footer .btn + .btn {
  margin-left: 5px;
  margin-bottom: 0;
}
.modal-footer .btn-group .btn + .btn {
  margin-left: -1px;
}
.modal-footer .btn-block + .btn-block {
  margin-left: 0;
}
.modal-scrollbar-measure {
  position: absolute;
  top: -9999px;
  width: 50px;
  height: 50px;
  overflow: scroll;
}
@media (min-width: 768px) {
  .modal-dialog {
    width: 600px;
    margin: 30px auto;
  }
  .modal-content {
    -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
  }
  .modal-sm {
    width: 300px;
  }
}
@media (min-width: 992px) {
  .modal-lg {
    width: 900px;
  }
}
.tooltip {
  position: absolute;
  z-index: 1070;
  display: block;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-style: normal;
  font-weight: normal;
  letter-spacing: normal;
  line-break: auto;
  line-height: 1.42857143;
  text-align: left;
  text-align: start;
  text-decoration: none;
  text-shadow: none;
  text-transform: none;
  white-space: normal;
  word-break: normal;
  word-spacing: normal;
  word-wrap: normal;
  font-size: 12px;
  opacity: 0;
  filter: alpha(opacity=0);
}
.tooltip.in {
  opacity: 0.9;
  filter: alpha(opacity=90);
}
.tooltip.top {
  margin-top: -3px;
  padding: 5px 0;
}
.tooltip.right {
  margin-left: 3px;
  padding: 0 5px;
}
.tooltip.bottom {
  margin-top: 3px;
  padding: 5px 0;
}
.tooltip.left {
  margin-left: -3px;
  padding: 0 5px;
}
.tooltip-inner {
  max-width: 200px;
  padding: 3px 8px;
  color: #fff;
  text-align: center;
  background-color: #000;
  border-radius: 2px;
}
.tooltip-arrow {
  position: absolute;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
}
.tooltip.top .tooltip-arrow {
  bottom: 0;
  left: 50%;
  margin-left: -5px;
  border-width: 5px 5px 0;
  border-top-color: #000;
}
.tooltip.top-left .tooltip-arrow {
  bottom: 0;
  right: 5px;
  margin-bottom: -5px;
  border-width: 5px 5px 0;
  border-top-color: #000;
}
.tooltip.top-right .tooltip-arrow {
  bottom: 0;
  left: 5px;
  margin-bottom: -5px;
  border-width: 5px 5px 0;
  border-top-color: #000;
}
.tooltip.right .tooltip-arrow {
  top: 50%;
  left: 0;
  margin-top: -5px;
  border-width: 5px 5px 5px 0;
  border-right-color: #000;
}
.tooltip.left .tooltip-arrow {
  top: 50%;
  right: 0;
  margin-top: -5px;
  border-width: 5px 0 5px 5px;
  border-left-color: #000;
}
.tooltip.bottom .tooltip-arrow {
  top: 0;
  left: 50%;
  margin-left: -5px;
  border-width: 0 5px 5px;
  border-bottom-color: #000;
}
.tooltip.bottom-left .tooltip-arrow {
  top: 0;
  right: 5px;
  margin-top: -5px;
  border-width: 0 5px 5px;
  border-bottom-color: #000;
}
.tooltip.bottom-right .tooltip-arrow {
  top: 0;
  left: 5px;
  margin-top: -5px;
  border-width: 0 5px 5px;
  border-bottom-color: #000;
}
.popover {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1060;
  display: none;
  max-width: 276px;
  padding: 1px;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-style: normal;
  font-weight: normal;
  letter-spacing: normal;
  line-break: auto;
  line-height: 1.42857143;
  text-align: left;
  text-align: start;
  text-decoration: none;
  text-shadow: none;
  text-transform: none;
  white-space: normal;
  word-break: normal;
  word-spacing: normal;
  word-wrap: normal;
  font-size: 13px;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 3px;
  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
}
.popover.top {
  margin-top: -10px;
}
.popover.right {
  margin-left: 10px;
}
.popover.bottom {
  margin-top: 10px;
}
.popover.left {
  margin-left: -10px;
}
.popover-title {
  margin: 0;
  padding: 8px 14px;
  font-size: 13px;
  background-color: #f7f7f7;
  border-bottom: 1px solid #ebebeb;
  border-radius: 2px 2px 0 0;
}
.popover-content {
  padding: 9px 14px;
}
.popover > .arrow,
.popover > .arrow:after {
  position: absolute;
  display: block;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
}
.popover > .arrow {
  border-width: 11px;
}
.popover > .arrow:after {
  border-width: 10px;
  content: "";
}
.popover.top > .arrow {
  left: 50%;
  margin-left: -11px;
  border-bottom-width: 0;
  border-top-color: #999999;
  border-top-color: rgba(0, 0, 0, 0.25);
  bottom: -11px;
}
.popover.top > .arrow:after {
  content: " ";
  bottom: 1px;
  margin-left: -10px;
  border-bottom-width: 0;
  border-top-color: #fff;
}
.popover.right > .arrow {
  top: 50%;
  left: -11px;
  margin-top: -11px;
  border-left-width: 0;
  border-right-color: #999999;
  border-right-color: rgba(0, 0, 0, 0.25);
}
.popover.right > .arrow:after {
  content: " ";
  left: 1px;
  bottom: -10px;
  border-left-width: 0;
  border-right-color: #fff;
}
.popover.bottom > .arrow {
  left: 50%;
  margin-left: -11px;
  border-top-width: 0;
  border-bottom-color: #999999;
  border-bottom-color: rgba(0, 0, 0, 0.25);
  top: -11px;
}
.popover.bottom > .arrow:after {
  content: " ";
  top: 1px;
  margin-left: -10px;
  border-top-width: 0;
  border-bottom-color: #fff;
}
.popover.left > .arrow {
  top: 50%;
  right: -11px;
  margin-top: -11px;
  border-right-width: 0;
  border-left-color: #999999;
  border-left-color: rgba(0, 0, 0, 0.25);
}
.popover.left > .arrow:after {
  content: " ";
  right: 1px;
  border-right-width: 0;
  border-left-color: #fff;
  bottom: -10px;
}
.carousel {
  position: relative;
}
.carousel-inner {
  position: relative;
  overflow: hidden;
  width: 100%;
}
.carousel-inner > .item {
  display: none;
  position: relative;
  -webkit-transition: 0.6s ease-in-out left;
  -o-transition: 0.6s ease-in-out left;
  transition: 0.6s ease-in-out left;
}
.carousel-inner > .item > img,
.carousel-inner > .item > a > img {
  line-height: 1;
}
@media all and (transform-3d), (-webkit-transform-3d) {
  .carousel-inner > .item {
    -webkit-transition: -webkit-transform 0.6s ease-in-out;
    -moz-transition: -moz-transform 0.6s ease-in-out;
    -o-transition: -o-transform 0.6s ease-in-out;
    transition: transform 0.6s ease-in-out;
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-perspective: 1000px;
    -moz-perspective: 1000px;
    perspective: 1000px;
  }
  .carousel-inner > .item.next,
  .carousel-inner > .item.active.right {
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
    left: 0;
  }
  .carousel-inner > .item.prev,
  .carousel-inner > .item.active.left {
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
    left: 0;
  }
  .carousel-inner > .item.next.left,
  .carousel-inner > .item.prev.right,
  .carousel-inner > .item.active {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
    left: 0;
  }
}
.carousel-inner > .active,
.carousel-inner > .next,
.carousel-inner > .prev {
  display: block;
}
.carousel-inner > .active {
  left: 0;
}
.carousel-inner > .next,
.carousel-inner > .prev {
  position: absolute;
  top: 0;
  width: 100%;
}
.carousel-inner > .next {
  left: 100%;
}
.carousel-inner > .prev {
  left: -100%;
}
.carousel-inner > .next.left,
.carousel-inner > .prev.right {
  left: 0;
}
.carousel-inner > .active.left {
  left: -100%;
}
.carousel-inner > .active.right {
  left: 100%;
}
.carousel-control {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 15%;
  opacity: 0.5;
  filter: alpha(opacity=50);
  font-size: 20px;
  color: #fff;
  text-align: center;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
  background-color: rgba(0, 0, 0, 0);
}
.carousel-control.left {
  background-image: -webkit-linear-gradient(left, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.0001) 100%);
  background-image: -o-linear-gradient(left, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.0001) 100%);
  background-image: linear-gradient(to right, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.0001) 100%);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000', endColorstr='#00000000', GradientType=1);
}
.carousel-control.right {
  left: auto;
  right: 0;
  background-image: -webkit-linear-gradient(left, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.5) 100%);
  background-image: -o-linear-gradient(left, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.5) 100%);
  background-image: linear-gradient(to right, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.5) 100%);
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#80000000', GradientType=1);
}
.carousel-control:hover,
.carousel-control:focus {
  outline: 0;
  color: #fff;
  text-decoration: none;
  opacity: 0.9;
  filter: alpha(opacity=90);
}
.carousel-control .icon-prev,
.carousel-control .icon-next,
.carousel-control .glyphicon-chevron-left,
.carousel-control .glyphicon-chevron-right {
  position: absolute;
  top: 50%;
  margin-top: -10px;
  z-index: 5;
  display: inline-block;
}
.carousel-control .icon-prev,
.carousel-control .glyphicon-chevron-left {
  left: 50%;
  margin-left: -10px;
}
.carousel-control .icon-next,
.carousel-control .glyphicon-chevron-right {
  right: 50%;
  margin-right: -10px;
}
.carousel-control .icon-prev,
.carousel-control .icon-next {
  width: 20px;
  height: 20px;
  line-height: 1;
  font-family: serif;
}
.carousel-control .icon-prev:before {
  content: '\2039';
}
.carousel-control .icon-next:before {
  content: '\203a';
}
.carousel-indicators {
  position: absolute;
  bottom: 10px;
  left: 50%;
  z-index: 15;
  width: 60%;
  margin-left: -30%;
  padding-left: 0;
  list-style: none;
  text-align: center;
}
.carousel-indicators li {
  display: inline-block;
  width: 10px;
  height: 10px;
  margin: 1px;
  text-indent: -999px;
  border: 1px solid #fff;
  border-radius: 10px;
  cursor: pointer;
  background-color: #000 \9;
  background-color: rgba(0, 0, 0, 0);
}
.carousel-indicators .active {
  margin: 0;
  width: 12px;
  height: 12px;
  background-color: #fff;
}
.carousel-caption {
  position: absolute;
  left: 15%;
  right: 15%;
  bottom: 20px;
  z-index: 10;
  padding-top: 20px;
  padding-bottom: 20px;
  color: #fff;
  text-align: center;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
}
.carousel-caption .btn {
  text-shadow: none;
}
@media screen and (min-width: 768px) {
  .carousel-control .glyphicon-chevron-left,
  .carousel-control .glyphicon-chevron-right,
  .carousel-control .icon-prev,
  .carousel-control .icon-next {
    width: 30px;
    height: 30px;
    margin-top: -10px;
    font-size: 30px;
  }
  .carousel-control .glyphicon-chevron-left,
  .carousel-control .icon-prev {
    margin-left: -10px;
  }
  .carousel-control .glyphicon-chevron-right,
  .carousel-control .icon-next {
    margin-right: -10px;
  }
  .carousel-caption {
    left: 20%;
    right: 20%;
    padding-bottom: 30px;
  }
  .carousel-indicators {
    bottom: 20px;
  }
}
.clearfix:before,
.clearfix:after,
.dl-horizontal dd:before,
.dl-horizontal dd:after,
.container:before,
.container:after,
.container-fluid:before,
.container-fluid:after,
.row:before,
.row:after,
.form-horizontal .form-group:before,
.form-horizontal .form-group:after,
.btn-toolbar:before,
.btn-toolbar:after,
.btn-group-vertical > .btn-group:before,
.btn-group-vertical > .btn-group:after,
.nav:before,
.nav:after,
.navbar:before,
.navbar:after,
.navbar-header:before,
.navbar-header:after,
.navbar-collapse:before,
.navbar-collapse:after,
.pager:before,
.pager:after,
.panel-body:before,
.panel-body:after,
.modal-header:before,
.modal-header:after,
.modal-footer:before,
.modal-footer:after,
.item_buttons:before,
.item_buttons:after {
  content: " ";
  display: table;
}
.clearfix:after,
.dl-horizontal dd:after,
.container:after,
.container-fluid:after,
.row:after,
.form-horizontal .form-group:after,
.btn-toolbar:after,
.btn-group-vertical > .btn-group:after,
.nav:after,
.navbar:after,
.navbar-header:after,
.navbar-collapse:after,
.pager:after,
.panel-body:after,
.modal-header:after,
.modal-footer:after,
.item_buttons:after {
  clear: both;
}
.center-block {
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.pull-right {
  float: right !important;
}
.pull-left {
  float: left !important;
}
.hide {
  display: none !important;
}
.show {
  display: block !important;
}
.invisible {
  visibility: hidden;
}
.text-hide {
  font: 0/0 a;
  color: transparent;
  text-shadow: none;
  background-color: transparent;
  border: 0;
}
.hidden {
  display: none !important;
}
.affix {
  position: fixed;
}
@-ms-viewport {
  width: device-width;
}
.visible-xs,
.visible-sm,
.visible-md,
.visible-lg {
  display: none !important;
}
.visible-xs-block,
.visible-xs-inline,
.visible-xs-inline-block,
.visible-sm-block,
.visible-sm-inline,
.visible-sm-inline-block,
.visible-md-block,
.visible-md-inline,
.visible-md-inline-block,
.visible-lg-block,
.visible-lg-inline,
.visible-lg-inline-block {
  display: none !important;
}
@media (max-width: 767px) {
  .visible-xs {
    display: block !important;
  }
  table.visible-xs {
    display: table !important;
  }
  tr.visible-xs {
    display: table-row !important;
  }
  th.visible-xs,
  td.visible-xs {
    display: table-cell !important;
  }
}
@media (max-width: 767px) {
  .visible-xs-block {
    display: block !important;
  }
}
@media (max-width: 767px) {
  .visible-xs-inline {
    display: inline !important;
  }
}
@media (max-width: 767px) {
  .visible-xs-inline-block {
    display: inline-block !important;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .visible-sm {
    display: block !important;
  }
  table.visible-sm {
    display: table !important;
  }
  tr.visible-sm {
    display: table-row !important;
  }
  th.visible-sm,
  td.visible-sm {
    display: table-cell !important;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .visible-sm-block {
    display: block !important;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .visible-sm-inline {
    display: inline !important;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .visible-sm-inline-block {
    display: inline-block !important;
  }
}
@media (min-width: 992px) and (max-width: 1199px) {
  .visible-md {
    display: block !important;
  }
  table.visible-md {
    display: table !important;
  }
  tr.visible-md {
    display: table-row !important;
  }
  th.visible-md,
  td.visible-md {
    display: table-cell !important;
  }
}
@media (min-width: 992px) and (max-width: 1199px) {
  .visible-md-block {
    display: block !important;
  }
}
@media (min-width: 992px) and (max-width: 1199px) {
  .visible-md-inline {
    display: inline !important;
  }
}
@media (min-width: 992px) and (max-width: 1199px) {
  .visible-md-inline-block {
    display: inline-block !important;
  }
}
@media (min-width: 1200px) {
  .visible-lg {
    display: block !important;
  }
  table.visible-lg {
    display: table !important;
  }
  tr.visible-lg {
    display: table-row !important;
  }
  th.visible-lg,
  td.visible-lg {
    display: table-cell !important;
  }
}
@media (min-width: 1200px) {
  .visible-lg-block {
    display: block !important;
  }
}
@media (min-width: 1200px) {
  .visible-lg-inline {
    display: inline !important;
  }
}
@media (min-width: 1200px) {
  .visible-lg-inline-block {
    display: inline-block !important;
  }
}
@media (max-width: 767px) {
  .hidden-xs {
    display: none !important;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .hidden-sm {
    display: none !important;
  }
}
@media (min-width: 992px) and (max-width: 1199px) {
  .hidden-md {
    display: none !important;
  }
}
@media (min-width: 1200px) {
  .hidden-lg {
    display: none !important;
  }
}
.visible-print {
  display: none !important;
}
@media print {
  .visible-print {
    display: block !important;
  }
  table.visible-print {
    display: table !important;
  }
  tr.visible-print {
    display: table-row !important;
  }
  th.visible-print,
  td.visible-print {
    display: table-cell !important;
  }
}
.visible-print-block {
  display: none !important;
}
@media print {
  .visible-print-block {
    display: block !important;
  }
}
.visible-print-inline {
  display: none !important;
}
@media print {
  .visible-print-inline {
    display: inline !important;
  }
}
.visible-print-inline-block {
  display: none !important;
}
@media print {
  .visible-print-inline-block {
    display: inline-block !important;
  }
}
@media print {
  .hidden-print {
    display: none !important;
  }
}
/*!
*
* Font Awesome
*
*/
/*!
 *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome
 *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)
 */
/* FONT PATH
 * -------------------------- */
@font-face {
  font-family: 'FontAwesome';
  src: url('../components/font-awesome/fonts/fontawesome-webfont.eot?v=4.7.0');
  src: url('../components/font-awesome/fonts/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), url('../components/font-awesome/fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'), url('../components/font-awesome/fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'), url('../components/font-awesome/fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'), url('../components/font-awesome/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');
  font-weight: normal;
  font-style: normal;
}
.fa {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
/* makes the font 33% larger relative to the icon container */
.fa-lg {
  font-size: 1.33333333em;
  line-height: 0.75em;
  vertical-align: -15%;
}
.fa-2x {
  font-size: 2em;
}
.fa-3x {
  font-size: 3em;
}
.fa-4x {
  font-size: 4em;
}
.fa-5x {
  font-size: 5em;
}
.fa-fw {
  width: 1.28571429em;
  text-align: center;
}
.fa-ul {
  padding-left: 0;
  margin-left: 2.14285714em;
  list-style-type: none;
}
.fa-ul > li {
  position: relative;
}
.fa-li {
  position: absolute;
  left: -2.14285714em;
  width: 2.14285714em;
  top: 0.14285714em;
  text-align: center;
}
.fa-li.fa-lg {
  left: -1.85714286em;
}
.fa-border {
  padding: .2em .25em .15em;
  border: solid 0.08em #eee;
  border-radius: .1em;
}
.fa-pull-left {
  float: left;
}
.fa-pull-right {
  float: right;
}
.fa.fa-pull-left {
  margin-right: .3em;
}
.fa.fa-pull-right {
  margin-left: .3em;
}
/* Deprecated as of 4.4.0 */
.pull-right {
  float: right;
}
.pull-left {
  float: left;
}
.fa.pull-left {
  margin-right: .3em;
}
.fa.pull-right {
  margin-left: .3em;
}
.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
  animation: fa-spin 2s infinite linear;
}
.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
  animation: fa-spin 1s infinite steps(8);
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(359deg);
    transform: rotate(359deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(359deg);
    transform: rotate(359deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  transform: rotate(90deg);
}
.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
  -ms-transform: rotate(180deg);
  transform: rotate(180deg);
}
.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
  -ms-transform: rotate(270deg);
  transform: rotate(270deg);
}
.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
  -ms-transform: scale(-1, 1);
  transform: scale(-1, 1);
}
.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
  -ms-transform: scale(1, -1);
  transform: scale(1, -1);
}
:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical {
  filter: none;
}
.fa-stack {
  position: relative;
  display: inline-block;
  width: 2em;
  height: 2em;
  line-height: 2em;
  vertical-align: middle;
}
.fa-stack-1x,
.fa-stack-2x {
  position: absolute;
  left: 0;
  width: 100%;
  text-align: center;
}
.fa-stack-1x {
  line-height: inherit;
}
.fa-stack-2x {
  font-size: 2em;
}
.fa-inverse {
  color: #fff;
}
/* Font Awesome uses the Unicode Private Use Area (PUA) to ensure screen
   readers do not read off random characters that represent icons */
.fa-glass:before {
  content: "\f000";
}
.fa-music:before {
  content: "\f001";
}
.fa-search:before {
  content: "\f002";
}
.fa-envelope-o:before {
  content: "\f003";
}
.fa-heart:before {
  content: "\f004";
}
.fa-star:before {
  content: "\f005";
}
.fa-star-o:before {
  content: "\f006";
}
.fa-user:before {
  content: "\f007";
}
.fa-film:before {
  content: "\f008";
}
.fa-th-large:before {
  content: "\f009";
}
.fa-th:before {
  content: "\f00a";
}
.fa-th-list:before {
  content: "\f00b";
}
.fa-check:before {
  content: "\f00c";
}
.fa-remove:before,
.fa-close:before,
.fa-times:before {
  content: "\f00d";
}
.fa-search-plus:before {
  content: "\f00e";
}
.fa-search-minus:before {
  content: "\f010";
}
.fa-power-off:before {
  content: "\f011";
}
.fa-signal:before {
  content: "\f012";
}
.fa-gear:before,
.fa-cog:before {
  content: "\f013";
}
.fa-trash-o:before {
  content: "\f014";
}
.fa-home:before {
  content: "\f015";
}
.fa-file-o:before {
  content: "\f016";
}
.fa-clock-o:before {
  content: "\f017";
}
.fa-road:before {
  content: "\f018";
}
.fa-download:before {
  content: "\f019";
}
.fa-arrow-circle-o-down:before {
  content: "\f01a";
}
.fa-arrow-circle-o-up:before {
  content: "\f01b";
}
.fa-inbox:before {
  content: "\f01c";
}
.fa-play-circle-o:before {
  content: "\f01d";
}
.fa-rotate-right:before,
.fa-repeat:before {
  content: "\f01e";
}
.fa-refresh:before {
  content: "\f021";
}
.fa-list-alt:before {
  content: "\f022";
}
.fa-lock:before {
  content: "\f023";
}
.fa-flag:before {
  content: "\f024";
}
.fa-headphones:before {
  content: "\f025";
}
.fa-volume-off:before {
  content: "\f026";
}
.fa-volume-down:before {
  content: "\f027";
}
.fa-volume-up:before {
  content: "\f028";
}
.fa-qrcode:before {
  content: "\f029";
}
.fa-barcode:before {
  content: "\f02a";
}
.fa-tag:before {
  content: "\f02b";
}
.fa-tags:before {
  content: "\f02c";
}
.fa-book:before {
  content: "\f02d";
}
.fa-bookmark:before {
  content: "\f02e";
}
.fa-print:before {
  content: "\f02f";
}
.fa-camera:before {
  content: "\f030";
}
.fa-font:before {
  content: "\f031";
}
.fa-bold:before {
  content: "\f032";
}
.fa-italic:before {
  content: "\f033";
}
.fa-text-height:before {
  content: "\f034";
}
.fa-text-width:before {
  content: "\f035";
}
.fa-align-left:before {
  content: "\f036";
}
.fa-align-center:before {
  content: "\f037";
}
.fa-align-right:before {
  content: "\f038";
}
.fa-align-justify:before {
  content: "\f039";
}
.fa-list:before {
  content: "\f03a";
}
.fa-dedent:before,
.fa-outdent:before {
  content: "\f03b";
}
.fa-indent:before {
  content: "\f03c";
}
.fa-video-camera:before {
  content: "\f03d";
}
.fa-photo:before,
.fa-image:before,
.fa-picture-o:before {
  content: "\f03e";
}
.fa-pencil:before {
  content: "\f040";
}
.fa-map-marker:before {
  content: "\f041";
}
.fa-adjust:before {
  content: "\f042";
}
.fa-tint:before {
  content: "\f043";
}
.fa-edit:before,
.fa-pencil-square-o:before {
  content: "\f044";
}
.fa-share-square-o:before {
  content: "\f045";
}
.fa-check-square-o:before {
  content: "\f046";
}
.fa-arrows:before {
  content: "\f047";
}
.fa-step-backward:before {
  content: "\f048";
}
.fa-fast-backward:before {
  content: "\f049";
}
.fa-backward:before {
  content: "\f04a";
}
.fa-play:before {
  content: "\f04b";
}
.fa-pause:before {
  content: "\f04c";
}
.fa-stop:before {
  content: "\f04d";
}
.fa-forward:before {
  content: "\f04e";
}
.fa-fast-forward:before {
  content: "\f050";
}
.fa-step-forward:before {
  content: "\f051";
}
.fa-eject:before {
  content: "\f052";
}
.fa-chevron-left:before {
  content: "\f053";
}
.fa-chevron-right:before {
  content: "\f054";
}
.fa-plus-circle:before {
  content: "\f055";
}
.fa-minus-circle:before {
  content: "\f056";
}
.fa-times-circle:before {
  content: "\f057";
}
.fa-check-circle:before {
  content: "\f058";
}
.fa-question-circle:before {
  content: "\f059";
}
.fa-info-circle:before {
  content: "\f05a";
}
.fa-crosshairs:before {
  content: "\f05b";
}
.fa-times-circle-o:before {
  content: "\f05c";
}
.fa-check-circle-o:before {
  content: "\f05d";
}
.fa-ban:before {
  content: "\f05e";
}
.fa-arrow-left:before {
  content: "\f060";
}
.fa-arrow-right:before {
  content: "\f061";
}
.fa-arrow-up:before {
  content: "\f062";
}
.fa-arrow-down:before {
  content: "\f063";
}
.fa-mail-forward:before,
.fa-share:before {
  content: "\f064";
}
.fa-expand:before {
  content: "\f065";
}
.fa-compress:before {
  content: "\f066";
}
.fa-plus:before {
  content: "\f067";
}
.fa-minus:before {
  content: "\f068";
}
.fa-asterisk:before {
  content: "\f069";
}
.fa-exclamation-circle:before {
  content: "\f06a";
}
.fa-gift:before {
  content: "\f06b";
}
.fa-leaf:before {
  content: "\f06c";
}
.fa-fire:before {
  content: "\f06d";
}
.fa-eye:before {
  content: "\f06e";
}
.fa-eye-slash:before {
  content: "\f070";
}
.fa-warning:before,
.fa-exclamation-triangle:before {
  content: "\f071";
}
.fa-plane:before {
  content: "\f072";
}
.fa-calendar:before {
  content: "\f073";
}
.fa-random:before {
  content: "\f074";
}
.fa-comment:before {
  content: "\f075";
}
.fa-magnet:before {
  content: "\f076";
}
.fa-chevron-up:before {
  content: "\f077";
}
.fa-chevron-down:before {
  content: "\f078";
}
.fa-retweet:before {
  content: "\f079";
}
.fa-shopping-cart:before {
  content: "\f07a";
}
.fa-folder:before {
  content: "\f07b";
}
.fa-folder-open:before {
  content: "\f07c";
}
.fa-arrows-v:before {
  content: "\f07d";
}
.fa-arrows-h:before {
  content: "\f07e";
}
.fa-bar-chart-o:before,
.fa-bar-chart:before {
  content: "\f080";
}
.fa-twitter-square:before {
  content: "\f081";
}
.fa-facebook-square:before {
  content: "\f082";
}
.fa-camera-retro:before {
  content: "\f083";
}
.fa-key:before {
  content: "\f084";
}
.fa-gears:before,
.fa-cogs:before {
  content: "\f085";
}
.fa-comments:before {
  content: "\f086";
}
.fa-thumbs-o-up:before {
  content: "\f087";
}
.fa-thumbs-o-down:before {
  content: "\f088";
}
.fa-star-half:before {
  content: "\f089";
}
.fa-heart-o:before {
  content: "\f08a";
}
.fa-sign-out:before {
  content: "\f08b";
}
.fa-linkedin-square:before {
  content: "\f08c";
}
.fa-thumb-tack:before {
  content: "\f08d";
}
.fa-external-link:before {
  content: "\f08e";
}
.fa-sign-in:before {
  content: "\f090";
}
.fa-trophy:before {
  content: "\f091";
}
.fa-github-square:before {
  content: "\f092";
}
.fa-upload:before {
  content: "\f093";
}
.fa-lemon-o:before {
  content: "\f094";
}
.fa-phone:before {
  content: "\f095";
}
.fa-square-o:before {
  content: "\f096";
}
.fa-bookmark-o:before {
  content: "\f097";
}
.fa-phone-square:before {
  content: "\f098";
}
.fa-twitter:before {
  content: "\f099";
}
.fa-facebook-f:before,
.fa-facebook:before {
  content: "\f09a";
}
.fa-github:before {
  content: "\f09b";
}
.fa-unlock:before {
  content: "\f09c";
}
.fa-credit-card:before {
  content: "\f09d";
}
.fa-feed:before,
.fa-rss:before {
  content: "\f09e";
}
.fa-hdd-o:before {
  content: "\f0a0";
}
.fa-bullhorn:before {
  content: "\f0a1";
}
.fa-bell:before {
  content: "\f0f3";
}
.fa-certificate:before {
  content: "\f0a3";
}
.fa-hand-o-right:before {
  content: "\f0a4";
}
.fa-hand-o-left:before {
  content: "\f0a5";
}
.fa-hand-o-up:before {
  content: "\f0a6";
}
.fa-hand-o-down:before {
  content: "\f0a7";
}
.fa-arrow-circle-left:before {
  content: "\f0a8";
}
.fa-arrow-circle-right:before {
  content: "\f0a9";
}
.fa-arrow-circle-up:before {
  content: "\f0aa";
}
.fa-arrow-circle-down:before {
  content: "\f0ab";
}
.fa-globe:before {
  content: "\f0ac";
}
.fa-wrench:before {
  content: "\f0ad";
}
.fa-tasks:before {
  content: "\f0ae";
}
.fa-filter:before {
  content: "\f0b0";
}
.fa-briefcase:before {
  content: "\f0b1";
}
.fa-arrows-alt:before {
  content: "\f0b2";
}
.fa-group:before,
.fa-users:before {
  content: "\f0c0";
}
.fa-chain:before,
.fa-link:before {
  content: "\f0c1";
}
.fa-cloud:before {
  content: "\f0c2";
}
.fa-flask:before {
  content: "\f0c3";
}
.fa-cut:before,
.fa-scissors:before {
  content: "\f0c4";
}
.fa-copy:before,
.fa-files-o:before {
  content: "\f0c5";
}
.fa-paperclip:before {
  content: "\f0c6";
}
.fa-save:before,
.fa-floppy-o:before {
  content: "\f0c7";
}
.fa-square:before {
  content: "\f0c8";
}
.fa-navicon:before,
.fa-reorder:before,
.fa-bars:before {
  content: "\f0c9";
}
.fa-list-ul:before {
  content: "\f0ca";
}
.fa-list-ol:before {
  content: "\f0cb";
}
.fa-strikethrough:before {
  content: "\f0cc";
}
.fa-underline:before {
  content: "\f0cd";
}
.fa-table:before {
  content: "\f0ce";
}
.fa-magic:before {
  content: "\f0d0";
}
.fa-truck:before {
  content: "\f0d1";
}
.fa-pinterest:before {
  content: "\f0d2";
}
.fa-pinterest-square:before {
  content: "\f0d3";
}
.fa-google-plus-square:before {
  content: "\f0d4";
}
.fa-google-plus:before {
  content: "\f0d5";
}
.fa-money:before {
  content: "\f0d6";
}
.fa-caret-down:before {
  content: "\f0d7";
}
.fa-caret-up:before {
  content: "\f0d8";
}
.fa-caret-left:before {
  content: "\f0d9";
}
.fa-caret-right:before {
  content: "\f0da";
}
.fa-columns:before {
  content: "\f0db";
}
.fa-unsorted:before,
.fa-sort:before {
  content: "\f0dc";
}
.fa-sort-down:before,
.fa-sort-desc:before {
  content: "\f0dd";
}
.fa-sort-up:before,
.fa-sort-asc:before {
  content: "\f0de";
}
.fa-envelope:before {
  content: "\f0e0";
}
.fa-linkedin:before {
  content: "\f0e1";
}
.fa-rotate-left:before,
.fa-undo:before {
  content: "\f0e2";
}
.fa-legal:before,
.fa-gavel:before {
  content: "\f0e3";
}
.fa-dashboard:before,
.fa-tachometer:before {
  content: "\f0e4";
}
.fa-comment-o:before {
  content: "\f0e5";
}
.fa-comments-o:before {
  content: "\f0e6";
}
.fa-flash:before,
.fa-bolt:before {
  content: "\f0e7";
}
.fa-sitemap:before {
  content: "\f0e8";
}
.fa-umbrella:before {
  content: "\f0e9";
}
.fa-paste:before,
.fa-clipboard:before {
  content: "\f0ea";
}
.fa-lightbulb-o:before {
  content: "\f0eb";
}
.fa-exchange:before {
  content: "\f0ec";
}
.fa-cloud-download:before {
  content: "\f0ed";
}
.fa-cloud-upload:before {
  content: "\f0ee";
}
.fa-user-md:before {
  content: "\f0f0";
}
.fa-stethoscope:before {
  content: "\f0f1";
}
.fa-suitcase:before {
  content: "\f0f2";
}
.fa-bell-o:before {
  content: "\f0a2";
}
.fa-coffee:before {
  content: "\f0f4";
}
.fa-cutlery:before {
  content: "\f0f5";
}
.fa-file-text-o:before {
  content: "\f0f6";
}
.fa-building-o:before {
  content: "\f0f7";
}
.fa-hospital-o:before {
  content: "\f0f8";
}
.fa-ambulance:before {
  content: "\f0f9";
}
.fa-medkit:before {
  content: "\f0fa";
}
.fa-fighter-jet:before {
  content: "\f0fb";
}
.fa-beer:before {
  content: "\f0fc";
}
.fa-h-square:before {
  content: "\f0fd";
}
.fa-plus-square:before {
  content: "\f0fe";
}
.fa-angle-double-left:before {
  content: "\f100";
}
.fa-angle-double-right:before {
  content: "\f101";
}
.fa-angle-double-up:before {
  content: "\f102";
}
.fa-angle-double-down:before {
  content: "\f103";
}
.fa-angle-left:before {
  content: "\f104";
}
.fa-angle-right:before {
  content: "\f105";
}
.fa-angle-up:before {
  content: "\f106";
}
.fa-angle-down:before {
  content: "\f107";
}
.fa-desktop:before {
  content: "\f108";
}
.fa-laptop:before {
  content: "\f109";
}
.fa-tablet:before {
  content: "\f10a";
}
.fa-mobile-phone:before,
.fa-mobile:before {
  content: "\f10b";
}
.fa-circle-o:before {
  content: "\f10c";
}
.fa-quote-left:before {
  content: "\f10d";
}
.fa-quote-right:before {
  content: "\f10e";
}
.fa-spinner:before {
  content: "\f110";
}
.fa-circle:before {
  content: "\f111";
}
.fa-mail-reply:before,
.fa-reply:before {
  content: "\f112";
}
.fa-github-alt:before {
  content: "\f113";
}
.fa-folder-o:before {
  content: "\f114";
}
.fa-folder-open-o:before {
  content: "\f115";
}
.fa-smile-o:before {
  content: "\f118";
}
.fa-frown-o:before {
  content: "\f119";
}
.fa-meh-o:before {
  content: "\f11a";
}
.fa-gamepad:before {
  content: "\f11b";
}
.fa-keyboard-o:before {
  content: "\f11c";
}
.fa-flag-o:before {
  content: "\f11d";
}
.fa-flag-checkered:before {
  content: "\f11e";
}
.fa-terminal:before {
  content: "\f120";
}
.fa-code:before {
  content: "\f121";
}
.fa-mail-reply-all:before,
.fa-reply-all:before {
  content: "\f122";
}
.fa-star-half-empty:before,
.fa-star-half-full:before,
.fa-star-half-o:before {
  content: "\f123";
}
.fa-location-arrow:before {
  content: "\f124";
}
.fa-crop:before {
  content: "\f125";
}
.fa-code-fork:before {
  content: "\f126";
}
.fa-unlink:before,
.fa-chain-broken:before {
  content: "\f127";
}
.fa-question:before {
  content: "\f128";
}
.fa-info:before {
  content: "\f129";
}
.fa-exclamation:before {
  content: "\f12a";
}
.fa-superscript:before {
  content: "\f12b";
}
.fa-subscript:before {
  content: "\f12c";
}
.fa-eraser:before {
  content: "\f12d";
}
.fa-puzzle-piece:before {
  content: "\f12e";
}
.fa-microphone:before {
  content: "\f130";
}
.fa-microphone-slash:before {
  content: "\f131";
}
.fa-shield:before {
  content: "\f132";
}
.fa-calendar-o:before {
  content: "\f133";
}
.fa-fire-extinguisher:before {
  content: "\f134";
}
.fa-rocket:before {
  content: "\f135";
}
.fa-maxcdn:before {
  content: "\f136";
}
.fa-chevron-circle-left:before {
  content: "\f137";
}
.fa-chevron-circle-right:before {
  content: "\f138";
}
.fa-chevron-circle-up:before {
  content: "\f139";
}
.fa-chevron-circle-down:before {
  content: "\f13a";
}
.fa-html5:before {
  content: "\f13b";
}
.fa-css3:before {
  content: "\f13c";
}
.fa-anchor:before {
  content: "\f13d";
}
.fa-unlock-alt:before {
  content: "\f13e";
}
.fa-bullseye:before {
  content: "\f140";
}
.fa-ellipsis-h:before {
  content: "\f141";
}
.fa-ellipsis-v:before {
  content: "\f142";
}
.fa-rss-square:before {
  content: "\f143";
}
.fa-play-circle:before {
  content: "\f144";
}
.fa-ticket:before {
  content: "\f145";
}
.fa-minus-square:before {
  content: "\f146";
}
.fa-minus-square-o:before {
  content: "\f147";
}
.fa-level-up:before {
  content: "\f148";
}
.fa-level-down:before {
  content: "\f149";
}
.fa-check-square:before {
  content: "\f14a";
}
.fa-pencil-square:before {
  content: "\f14b";
}
.fa-external-link-square:before {
  content: "\f14c";
}
.fa-share-square:before {
  content: "\f14d";
}
.fa-compass:before {
  content: "\f14e";
}
.fa-toggle-down:before,
.fa-caret-square-o-down:before {
  content: "\f150";
}
.fa-toggle-up:before,
.fa-caret-square-o-up:before {
  content: "\f151";
}
.fa-toggle-right:before,
.fa-caret-square-o-right:before {
  content: "\f152";
}
.fa-euro:before,
.fa-eur:before {
  content: "\f153";
}
.fa-gbp:before {
  content: "\f154";
}
.fa-dollar:before,
.fa-usd:before {
  content: "\f155";
}
.fa-rupee:before,
.fa-inr:before {
  content: "\f156";
}
.fa-cny:before,
.fa-rmb:before,
.fa-yen:before,
.fa-jpy:before {
  content: "\f157";
}
.fa-ruble:before,
.fa-rouble:before,
.fa-rub:before {
  content: "\f158";
}
.fa-won:before,
.fa-krw:before {
  content: "\f159";
}
.fa-bitcoin:before,
.fa-btc:before {
  content: "\f15a";
}
.fa-file:before {
  content: "\f15b";
}
.fa-file-text:before {
  content: "\f15c";
}
.fa-sort-alpha-asc:before {
  content: "\f15d";
}
.fa-sort-alpha-desc:before {
  content: "\f15e";
}
.fa-sort-amount-asc:before {
  content: "\f160";
}
.fa-sort-amount-desc:before {
  content: "\f161";
}
.fa-sort-numeric-asc:before {
  content: "\f162";
}
.fa-sort-numeric-desc:before {
  content: "\f163";
}
.fa-thumbs-up:before {
  content: "\f164";
}
.fa-thumbs-down:before {
  content: "\f165";
}
.fa-youtube-square:before {
  content: "\f166";
}
.fa-youtube:before {
  content: "\f167";
}
.fa-xing:before {
  content: "\f168";
}
.fa-xing-square:before {
  content: "\f169";
}
.fa-youtube-play:before {
  content: "\f16a";
}
.fa-dropbox:before {
  content: "\f16b";
}
.fa-stack-overflow:before {
  content: "\f16c";
}
.fa-instagram:before {
  content: "\f16d";
}
.fa-flickr:before {
  content: "\f16e";
}
.fa-adn:before {
  content: "\f170";
}
.fa-bitbucket:before {
  content: "\f171";
}
.fa-bitbucket-square:before {
  content: "\f172";
}
.fa-tumblr:before {
  content: "\f173";
}
.fa-tumblr-square:before {
  content: "\f174";
}
.fa-long-arrow-down:before {
  content: "\f175";
}
.fa-long-arrow-up:before {
  content: "\f176";
}
.fa-long-arrow-left:before {
  content: "\f177";
}
.fa-long-arrow-right:before {
  content: "\f178";
}
.fa-apple:before {
  content: "\f179";
}
.fa-windows:before {
  content: "\f17a";
}
.fa-android:before {
  content: "\f17b";
}
.fa-linux:before {
  content: "\f17c";
}
.fa-dribbble:before {
  content: "\f17d";
}
.fa-skype:before {
  content: "\f17e";
}
.fa-foursquare:before {
  content: "\f180";
}
.fa-trello:before {
  content: "\f181";
}
.fa-female:before {
  content: "\f182";
}
.fa-male:before {
  content: "\f183";
}
.fa-gittip:before,
.fa-gratipay:before {
  content: "\f184";
}
.fa-sun-o:before {
  content: "\f185";
}
.fa-moon-o:before {
  content: "\f186";
}
.fa-archive:before {
  content: "\f187";
}
.fa-bug:before {
  content: "\f188";
}
.fa-vk:before {
  content: "\f189";
}
.fa-weibo:before {
  content: "\f18a";
}
.fa-renren:before {
  content: "\f18b";
}
.fa-pagelines:before {
  content: "\f18c";
}
.fa-stack-exchange:before {
  content: "\f18d";
}
.fa-arrow-circle-o-right:before {
  content: "\f18e";
}
.fa-arrow-circle-o-left:before {
  content: "\f190";
}
.fa-toggle-left:before,
.fa-caret-square-o-left:before {
  content: "\f191";
}
.fa-dot-circle-o:before {
  content: "\f192";
}
.fa-wheelchair:before {
  content: "\f193";
}
.fa-vimeo-square:before {
  content: "\f194";
}
.fa-turkish-lira:before,
.fa-try:before {
  content: "\f195";
}
.fa-plus-square-o:before {
  content: "\f196";
}
.fa-space-shuttle:before {
  content: "\f197";
}
.fa-slack:before {
  content: "\f198";
}
.fa-envelope-square:before {
  content: "\f199";
}
.fa-wordpress:before {
  content: "\f19a";
}
.fa-openid:before {
  content: "\f19b";
}
.fa-institution:before,
.fa-bank:before,
.fa-university:before {
  content: "\f19c";
}
.fa-mortar-board:before,
.fa-graduation-cap:before {
  content: "\f19d";
}
.fa-yahoo:before {
  content: "\f19e";
}
.fa-google:before {
  content: "\f1a0";
}
.fa-reddit:before {
  content: "\f1a1";
}
.fa-reddit-square:before {
  content: "\f1a2";
}
.fa-stumbleupon-circle:before {
  content: "\f1a3";
}
.fa-stumbleupon:before {
  content: "\f1a4";
}
.fa-delicious:before {
  content: "\f1a5";
}
.fa-digg:before {
  content: "\f1a6";
}
.fa-pied-piper-pp:before {
  content: "\f1a7";
}
.fa-pied-piper-alt:before {
  content: "\f1a8";
}
.fa-drupal:before {
  content: "\f1a9";
}
.fa-joomla:before {
  content: "\f1aa";
}
.fa-language:before {
  content: "\f1ab";
}
.fa-fax:before {
  content: "\f1ac";
}
.fa-building:before {
  content: "\f1ad";
}
.fa-child:before {
  content: "\f1ae";
}
.fa-paw:before {
  content: "\f1b0";
}
.fa-spoon:before {
  content: "\f1b1";
}
.fa-cube:before {
  content: "\f1b2";
}
.fa-cubes:before {
  content: "\f1b3";
}
.fa-behance:before {
  content: "\f1b4";
}
.fa-behance-square:before {
  content: "\f1b5";
}
.fa-steam:before {
  content: "\f1b6";
}
.fa-steam-square:before {
  content: "\f1b7";
}
.fa-recycle:before {
  content: "\f1b8";
}
.fa-automobile:before,
.fa-car:before {
  content: "\f1b9";
}
.fa-cab:before,
.fa-taxi:before {
  content: "\f1ba";
}
.fa-tree:before {
  content: "\f1bb";
}
.fa-spotify:before {
  content: "\f1bc";
}
.fa-deviantart:before {
  content: "\f1bd";
}
.fa-soundcloud:before {
  content: "\f1be";
}
.fa-database:before {
  content: "\f1c0";
}
.fa-file-pdf-o:before {
  content: "\f1c1";
}
.fa-file-word-o:before {
  content: "\f1c2";
}
.fa-file-excel-o:before {
  content: "\f1c3";
}
.fa-file-powerpoint-o:before {
  content: "\f1c4";
}
.fa-file-photo-o:before,
.fa-file-picture-o:before,
.fa-file-image-o:before {
  content: "\f1c5";
}
.fa-file-zip-o:before,
.fa-file-archive-o:before {
  content: "\f1c6";
}
.fa-file-sound-o:before,
.fa-file-audio-o:before {
  content: "\f1c7";
}
.fa-file-movie-o:before,
.fa-file-video-o:before {
  content: "\f1c8";
}
.fa-file-code-o:before {
  content: "\f1c9";
}
.fa-vine:before {
  content: "\f1ca";
}
.fa-codepen:before {
  content: "\f1cb";
}
.fa-jsfiddle:before {
  content: "\f1cc";
}
.fa-life-bouy:before,
.fa-life-buoy:before,
.fa-life-saver:before,
.fa-support:before,
.fa-life-ring:before {
  content: "\f1cd";
}
.fa-circle-o-notch:before {
  content: "\f1ce";
}
.fa-ra:before,
.fa-resistance:before,
.fa-rebel:before {
  content: "\f1d0";
}
.fa-ge:before,
.fa-empire:before {
  content: "\f1d1";
}
.fa-git-square:before {
  content: "\f1d2";
}
.fa-git:before {
  content: "\f1d3";
}
.fa-y-combinator-square:before,
.fa-yc-square:before,
.fa-hacker-news:before {
  content: "\f1d4";
}
.fa-tencent-weibo:before {
  content: "\f1d5";
}
.fa-qq:before {
  content: "\f1d6";
}
.fa-wechat:before,
.fa-weixin:before {
  content: "\f1d7";
}
.fa-send:before,
.fa-paper-plane:before {
  content: "\f1d8";
}
.fa-send-o:before,
.fa-paper-plane-o:before {
  content: "\f1d9";
}
.fa-history:before {
  content: "\f1da";
}
.fa-circle-thin:before {
  content: "\f1db";
}
.fa-header:before {
  content: "\f1dc";
}
.fa-paragraph:before {
  content: "\f1dd";
}
.fa-sliders:before {
  content: "\f1de";
}
.fa-share-alt:before {
  content: "\f1e0";
}
.fa-share-alt-square:before {
  content: "\f1e1";
}
.fa-bomb:before {
  content: "\f1e2";
}
.fa-soccer-ball-o:before,
.fa-futbol-o:before {
  content: "\f1e3";
}
.fa-tty:before {
  content: "\f1e4";
}
.fa-binoculars:before {
  content: "\f1e5";
}
.fa-plug:before {
  content: "\f1e6";
}
.fa-slideshare:before {
  content: "\f1e7";
}
.fa-twitch:before {
  content: "\f1e8";
}
.fa-yelp:before {
  content: "\f1e9";
}
.fa-newspaper-o:before {
  content: "\f1ea";
}
.fa-wifi:before {
  content: "\f1eb";
}
.fa-calculator:before {
  content: "\f1ec";
}
.fa-paypal:before {
  content: "\f1ed";
}
.fa-google-wallet:before {
  content: "\f1ee";
}
.fa-cc-visa:before {
  content: "\f1f0";
}
.fa-cc-mastercard:before {
  content: "\f1f1";
}
.fa-cc-discover:before {
  content: "\f1f2";
}
.fa-cc-amex:before {
  content: "\f1f3";
}
.fa-cc-paypal:before {
  content: "\f1f4";
}
.fa-cc-stripe:before {
  content: "\f1f5";
}
.fa-bell-slash:before {
  content: "\f1f6";
}
.fa-bell-slash-o:before {
  content: "\f1f7";
}
.fa-trash:before {
  content: "\f1f8";
}
.fa-copyright:before {
  content: "\f1f9";
}
.fa-at:before {
  content: "\f1fa";
}
.fa-eyedropper:before {
  content: "\f1fb";
}
.fa-paint-brush:before {
  content: "\f1fc";
}
.fa-birthday-cake:before {
  content: "\f1fd";
}
.fa-area-chart:before {
  content: "\f1fe";
}
.fa-pie-chart:before {
  content: "\f200";
}
.fa-line-chart:before {
  content: "\f201";
}
.fa-lastfm:before {
  content: "\f202";
}
.fa-lastfm-square:before {
  content: "\f203";
}
.fa-toggle-off:before {
  content: "\f204";
}
.fa-toggle-on:before {
  content: "\f205";
}
.fa-bicycle:before {
  content: "\f206";
}
.fa-bus:before {
  content: "\f207";
}
.fa-ioxhost:before {
  content: "\f208";
}
.fa-angellist:before {
  content: "\f209";
}
.fa-cc:before {
  content: "\f20a";
}
.fa-shekel:before,
.fa-sheqel:before,
.fa-ils:before {
  content: "\f20b";
}
.fa-meanpath:before {
  content: "\f20c";
}
.fa-buysellads:before {
  content: "\f20d";
}
.fa-connectdevelop:before {
  content: "\f20e";
}
.fa-dashcube:before {
  content: "\f210";
}
.fa-forumbee:before {
  content: "\f211";
}
.fa-leanpub:before {
  content: "\f212";
}
.fa-sellsy:before {
  content: "\f213";
}
.fa-shirtsinbulk:before {
  content: "\f214";
}
.fa-simplybuilt:before {
  content: "\f215";
}
.fa-skyatlas:before {
  content: "\f216";
}
.fa-cart-plus:before {
  content: "\f217";
}
.fa-cart-arrow-down:before {
  content: "\f218";
}
.fa-diamond:before {
  content: "\f219";
}
.fa-ship:before {
  content: "\f21a";
}
.fa-user-secret:before {
  content: "\f21b";
}
.fa-motorcycle:before {
  content: "\f21c";
}
.fa-street-view:before {
  content: "\f21d";
}
.fa-heartbeat:before {
  content: "\f21e";
}
.fa-venus:before {
  content: "\f221";
}
.fa-mars:before {
  content: "\f222";
}
.fa-mercury:before {
  content: "\f223";
}
.fa-intersex:before,
.fa-transgender:before {
  content: "\f224";
}
.fa-transgender-alt:before {
  content: "\f225";
}
.fa-venus-double:before {
  content: "\f226";
}
.fa-mars-double:before {
  content: "\f227";
}
.fa-venus-mars:before {
  content: "\f228";
}
.fa-mars-stroke:before {
  content: "\f229";
}
.fa-mars-stroke-v:before {
  content: "\f22a";
}
.fa-mars-stroke-h:before {
  content: "\f22b";
}
.fa-neuter:before {
  content: "\f22c";
}
.fa-genderless:before {
  content: "\f22d";
}
.fa-facebook-official:before {
  content: "\f230";
}
.fa-pinterest-p:before {
  content: "\f231";
}
.fa-whatsapp:before {
  content: "\f232";
}
.fa-server:before {
  content: "\f233";
}
.fa-user-plus:before {
  content: "\f234";
}
.fa-user-times:before {
  content: "\f235";
}
.fa-hotel:before,
.fa-bed:before {
  content: "\f236";
}
.fa-viacoin:before {
  content: "\f237";
}
.fa-train:before {
  content: "\f238";
}
.fa-subway:before {
  content: "\f239";
}
.fa-medium:before {
  content: "\f23a";
}
.fa-yc:before,
.fa-y-combinator:before {
  content: "\f23b";
}
.fa-optin-monster:before {
  content: "\f23c";
}
.fa-opencart:before {
  content: "\f23d";
}
.fa-expeditedssl:before {
  content: "\f23e";
}
.fa-battery-4:before,
.fa-battery:before,
.fa-battery-full:before {
  content: "\f240";
}
.fa-battery-3:before,
.fa-battery-three-quarters:before {
  content: "\f241";
}
.fa-battery-2:before,
.fa-battery-half:before {
  content: "\f242";
}
.fa-battery-1:before,
.fa-battery-quarter:before {
  content: "\f243";
}
.fa-battery-0:before,
.fa-battery-empty:before {
  content: "\f244";
}
.fa-mouse-pointer:before {
  content: "\f245";
}
.fa-i-cursor:before {
  content: "\f246";
}
.fa-object-group:before {
  content: "\f247";
}
.fa-object-ungroup:before {
  content: "\f248";
}
.fa-sticky-note:before {
  content: "\f249";
}
.fa-sticky-note-o:before {
  content: "\f24a";
}
.fa-cc-jcb:before {
  content: "\f24b";
}
.fa-cc-diners-club:before {
  content: "\f24c";
}
.fa-clone:before {
  content: "\f24d";
}
.fa-balance-scale:before {
  content: "\f24e";
}
.fa-hourglass-o:before {
  content: "\f250";
}
.fa-hourglass-1:before,
.fa-hourglass-start:before {
  content: "\f251";
}
.fa-hourglass-2:before,
.fa-hourglass-half:before {
  content: "\f252";
}
.fa-hourglass-3:before,
.fa-hourglass-end:before {
  content: "\f253";
}
.fa-hourglass:before {
  content: "\f254";
}
.fa-hand-grab-o:before,
.fa-hand-rock-o:before {
  content: "\f255";
}
.fa-hand-stop-o:before,
.fa-hand-paper-o:before {
  content: "\f256";
}
.fa-hand-scissors-o:before {
  content: "\f257";
}
.fa-hand-lizard-o:before {
  content: "\f258";
}
.fa-hand-spock-o:before {
  content: "\f259";
}
.fa-hand-pointer-o:before {
  content: "\f25a";
}
.fa-hand-peace-o:before {
  content: "\f25b";
}
.fa-trademark:before {
  content: "\f25c";
}
.fa-registered:before {
  content: "\f25d";
}
.fa-creative-commons:before {
  content: "\f25e";
}
.fa-gg:before {
  content: "\f260";
}
.fa-gg-circle:before {
  content: "\f261";
}
.fa-tripadvisor:before {
  content: "\f262";
}
.fa-odnoklassniki:before {
  content: "\f263";
}
.fa-odnoklassniki-square:before {
  content: "\f264";
}
.fa-get-pocket:before {
  content: "\f265";
}
.fa-wikipedia-w:before {
  content: "\f266";
}
.fa-safari:before {
  content: "\f267";
}
.fa-chrome:before {
  content: "\f268";
}
.fa-firefox:before {
  content: "\f269";
}
.fa-opera:before {
  content: "\f26a";
}
.fa-internet-explorer:before {
  content: "\f26b";
}
.fa-tv:before,
.fa-television:before {
  content: "\f26c";
}
.fa-contao:before {
  content: "\f26d";
}
.fa-500px:before {
  content: "\f26e";
}
.fa-amazon:before {
  content: "\f270";
}
.fa-calendar-plus-o:before {
  content: "\f271";
}
.fa-calendar-minus-o:before {
  content: "\f272";
}
.fa-calendar-times-o:before {
  content: "\f273";
}
.fa-calendar-check-o:before {
  content: "\f274";
}
.fa-industry:before {
  content: "\f275";
}
.fa-map-pin:before {
  content: "\f276";
}
.fa-map-signs:before {
  content: "\f277";
}
.fa-map-o:before {
  content: "\f278";
}
.fa-map:before {
  content: "\f279";
}
.fa-commenting:before {
  content: "\f27a";
}
.fa-commenting-o:before {
  content: "\f27b";
}
.fa-houzz:before {
  content: "\f27c";
}
.fa-vimeo:before {
  content: "\f27d";
}
.fa-black-tie:before {
  content: "\f27e";
}
.fa-fonticons:before {
  content: "\f280";
}
.fa-reddit-alien:before {
  content: "\f281";
}
.fa-edge:before {
  content: "\f282";
}
.fa-credit-card-alt:before {
  content: "\f283";
}
.fa-codiepie:before {
  content: "\f284";
}
.fa-modx:before {
  content: "\f285";
}
.fa-fort-awesome:before {
  content: "\f286";
}
.fa-usb:before {
  content: "\f287";
}
.fa-product-hunt:before {
  content: "\f288";
}
.fa-mixcloud:before {
  content: "\f289";
}
.fa-scribd:before {
  content: "\f28a";
}
.fa-pause-circle:before {
  content: "\f28b";
}
.fa-pause-circle-o:before {
  content: "\f28c";
}
.fa-stop-circle:before {
  content: "\f28d";
}
.fa-stop-circle-o:before {
  content: "\f28e";
}
.fa-shopping-bag:before {
  content: "\f290";
}
.fa-shopping-basket:before {
  content: "\f291";
}
.fa-hashtag:before {
  content: "\f292";
}
.fa-bluetooth:before {
  content: "\f293";
}
.fa-bluetooth-b:before {
  content: "\f294";
}
.fa-percent:before {
  content: "\f295";
}
.fa-gitlab:before {
  content: "\f296";
}
.fa-wpbeginner:before {
  content: "\f297";
}
.fa-wpforms:before {
  content: "\f298";
}
.fa-envira:before {
  content: "\f299";
}
.fa-universal-access:before {
  content: "\f29a";
}
.fa-wheelchair-alt:before {
  content: "\f29b";
}
.fa-question-circle-o:before {
  content: "\f29c";
}
.fa-blind:before {
  content: "\f29d";
}
.fa-audio-description:before {
  content: "\f29e";
}
.fa-volume-control-phone:before {
  content: "\f2a0";
}
.fa-braille:before {
  content: "\f2a1";
}
.fa-assistive-listening-systems:before {
  content: "\f2a2";
}
.fa-asl-interpreting:before,
.fa-american-sign-language-interpreting:before {
  content: "\f2a3";
}
.fa-deafness:before,
.fa-hard-of-hearing:before,
.fa-deaf:before {
  content: "\f2a4";
}
.fa-glide:before {
  content: "\f2a5";
}
.fa-glide-g:before {
  content: "\f2a6";
}
.fa-signing:before,
.fa-sign-language:before {
  content: "\f2a7";
}
.fa-low-vision:before {
  content: "\f2a8";
}
.fa-viadeo:before {
  content: "\f2a9";
}
.fa-viadeo-square:before {
  content: "\f2aa";
}
.fa-snapchat:before {
  content: "\f2ab";
}
.fa-snapchat-ghost:before {
  content: "\f2ac";
}
.fa-snapchat-square:before {
  content: "\f2ad";
}
.fa-pied-piper:before {
  content: "\f2ae";
}
.fa-first-order:before {
  content: "\f2b0";
}
.fa-yoast:before {
  content: "\f2b1";
}
.fa-themeisle:before {
  content: "\f2b2";
}
.fa-google-plus-circle:before,
.fa-google-plus-official:before {
  content: "\f2b3";
}
.fa-fa:before,
.fa-font-awesome:before {
  content: "\f2b4";
}
.fa-handshake-o:before {
  content: "\f2b5";
}
.fa-envelope-open:before {
  content: "\f2b6";
}
.fa-envelope-open-o:before {
  content: "\f2b7";
}
.fa-linode:before {
  content: "\f2b8";
}
.fa-address-book:before {
  content: "\f2b9";
}
.fa-address-book-o:before {
  content: "\f2ba";
}
.fa-vcard:before,
.fa-address-card:before {
  content: "\f2bb";
}
.fa-vcard-o:before,
.fa-address-card-o:before {
  content: "\f2bc";
}
.fa-user-circle:before {
  content: "\f2bd";
}
.fa-user-circle-o:before {
  content: "\f2be";
}
.fa-user-o:before {
  content: "\f2c0";
}
.fa-id-badge:before {
  content: "\f2c1";
}
.fa-drivers-license:before,
.fa-id-card:before {
  content: "\f2c2";
}
.fa-drivers-license-o:before,
.fa-id-card-o:before {
  content: "\f2c3";
}
.fa-quora:before {
  content: "\f2c4";
}
.fa-free-code-camp:before {
  content: "\f2c5";
}
.fa-telegram:before {
  content: "\f2c6";
}
.fa-thermometer-4:before,
.fa-thermometer:before,
.fa-thermometer-full:before {
  content: "\f2c7";
}
.fa-thermometer-3:before,
.fa-thermometer-three-quarters:before {
  content: "\f2c8";
}
.fa-thermometer-2:before,
.fa-thermometer-half:before {
  content: "\f2c9";
}
.fa-thermometer-1:before,
.fa-thermometer-quarter:before {
  content: "\f2ca";
}
.fa-thermometer-0:before,
.fa-thermometer-empty:before {
  content: "\f2cb";
}
.fa-shower:before {
  content: "\f2cc";
}
.fa-bathtub:before,
.fa-s15:before,
.fa-bath:before {
  content: "\f2cd";
}
.fa-podcast:before {
  content: "\f2ce";
}
.fa-window-maximize:before {
  content: "\f2d0";
}
.fa-window-minimize:before {
  content: "\f2d1";
}
.fa-window-restore:before {
  content: "\f2d2";
}
.fa-times-rectangle:before,
.fa-window-close:before {
  content: "\f2d3";
}
.fa-times-rectangle-o:before,
.fa-window-close-o:before {
  content: "\f2d4";
}
.fa-bandcamp:before {
  content: "\f2d5";
}
.fa-grav:before {
  content: "\f2d6";
}
.fa-etsy:before {
  content: "\f2d7";
}
.fa-imdb:before {
  content: "\f2d8";
}
.fa-ravelry:before {
  content: "\f2d9";
}
.fa-eercast:before {
  content: "\f2da";
}
.fa-microchip:before {
  content: "\f2db";
}
.fa-snowflake-o:before {
  content: "\f2dc";
}
.fa-superpowers:before {
  content: "\f2dd";
}
.fa-wpexplorer:before {
  content: "\f2de";
}
.fa-meetup:before {
  content: "\f2e0";
}
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}
.sr-only-focusable:active,
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  clip: auto;
}
.sr-only-focusable:active,
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  clip: auto;
}
/*!
*
* IPython base
*
*/
.modal.fade .modal-dialog {
  -webkit-transform: translate(0, 0);
  -ms-transform: translate(0, 0);
  -o-transform: translate(0, 0);
  transform: translate(0, 0);
}
code {
  color: #000;
}
pre {
  font-size: inherit;
  line-height: inherit;
}
label {
  font-weight: normal;
}
/* Make the page background atleast 100% the height of the view port */
/* Make the page itself atleast 70% the height of the view port */
.border-box-sizing {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
.corner-all {
  border-radius: 2px;
}
.no-padding {
  padding: 0px;
}
/* Flexible box model classes */
/* Taken from Alex Russell http://infrequently.org/2009/08/css-3-progress/ */
/* This file is a compatability layer.  It allows the usage of flexible box 
model layouts accross multiple browsers, including older browsers.  The newest,
universal implementation of the flexible box model is used when available (see
`Modern browsers` comments below).  Browsers that are known to implement this 
new spec completely include:

    Firefox 28.0+
    Chrome 29.0+
    Internet Explorer 11+ 
    Opera 17.0+

Browsers not listed, including Safari, are supported via the styling under the
`Old browsers` comments below.
*/
.hbox {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
.hbox > * {
  /* Old browsers */
  -webkit-box-flex: 0;
  -moz-box-flex: 0;
  box-flex: 0;
  /* Modern browsers */
  flex: none;
}
.vbox {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
.vbox > * {
  /* Old browsers */
  -webkit-box-flex: 0;
  -moz-box-flex: 0;
  box-flex: 0;
  /* Modern browsers */
  flex: none;
}
.hbox.reverse,
.vbox.reverse,
.reverse {
  /* Old browsers */
  -webkit-box-direction: reverse;
  -moz-box-direction: reverse;
  box-direction: reverse;
  /* Modern browsers */
  flex-direction: row-reverse;
}
.hbox.box-flex0,
.vbox.box-flex0,
.box-flex0 {
  /* Old browsers */
  -webkit-box-flex: 0;
  -moz-box-flex: 0;
  box-flex: 0;
  /* Modern browsers */
  flex: none;
  width: auto;
}
.hbox.box-flex1,
.vbox.box-flex1,
.box-flex1 {
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
.hbox.box-flex,
.vbox.box-flex,
.box-flex {
  /* Old browsers */
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
.hbox.box-flex2,
.vbox.box-flex2,
.box-flex2 {
  /* Old browsers */
  -webkit-box-flex: 2;
  -moz-box-flex: 2;
  box-flex: 2;
  /* Modern browsers */
  flex: 2;
}
.box-group1 {
  /*  Deprecated */
  -webkit-box-flex-group: 1;
  -moz-box-flex-group: 1;
  box-flex-group: 1;
}
.box-group2 {
  /* Deprecated */
  -webkit-box-flex-group: 2;
  -moz-box-flex-group: 2;
  box-flex-group: 2;
}
.hbox.start,
.vbox.start,
.start {
  /* Old browsers */
  -webkit-box-pack: start;
  -moz-box-pack: start;
  box-pack: start;
  /* Modern browsers */
  justify-content: flex-start;
}
.hbox.end,
.vbox.end,
.end {
  /* Old browsers */
  -webkit-box-pack: end;
  -moz-box-pack: end;
  box-pack: end;
  /* Modern browsers */
  justify-content: flex-end;
}
.hbox.center,
.vbox.center,
.center {
  /* Old browsers */
  -webkit-box-pack: center;
  -moz-box-pack: center;
  box-pack: center;
  /* Modern browsers */
  justify-content: center;
}
.hbox.baseline,
.vbox.baseline,
.baseline {
  /* Old browsers */
  -webkit-box-pack: baseline;
  -moz-box-pack: baseline;
  box-pack: baseline;
  /* Modern browsers */
  justify-content: baseline;
}
.hbox.stretch,
.vbox.stretch,
.stretch {
  /* Old browsers */
  -webkit-box-pack: stretch;
  -moz-box-pack: stretch;
  box-pack: stretch;
  /* Modern browsers */
  justify-content: stretch;
}
.hbox.align-start,
.vbox.align-start,
.align-start {
  /* Old browsers */
  -webkit-box-align: start;
  -moz-box-align: start;
  box-align: start;
  /* Modern browsers */
  align-items: flex-start;
}
.hbox.align-end,
.vbox.align-end,
.align-end {
  /* Old browsers */
  -webkit-box-align: end;
  -moz-box-align: end;
  box-align: end;
  /* Modern browsers */
  align-items: flex-end;
}
.hbox.align-center,
.vbox.align-center,
.align-center {
  /* Old browsers */
  -webkit-box-align: center;
  -moz-box-align: center;
  box-align: center;
  /* Modern browsers */
  align-items: center;
}
.hbox.align-baseline,
.vbox.align-baseline,
.align-baseline {
  /* Old browsers */
  -webkit-box-align: baseline;
  -moz-box-align: baseline;
  box-align: baseline;
  /* Modern browsers */
  align-items: baseline;
}
.hbox.align-stretch,
.vbox.align-stretch,
.align-stretch {
  /* Old browsers */
  -webkit-box-align: stretch;
  -moz-box-align: stretch;
  box-align: stretch;
  /* Modern browsers */
  align-items: stretch;
}
div.error {
  margin: 2em;
  text-align: center;
}
div.error > h1 {
  font-size: 500%;
  line-height: normal;
}
div.error > p {
  font-size: 200%;
  line-height: normal;
}
div.traceback-wrapper {
  text-align: left;
  max-width: 800px;
  margin: auto;
}
div.traceback-wrapper pre.traceback {
  max-height: 600px;
  overflow: auto;
}
/**
 * Primary styles
 *
 * Author: Jupyter Development Team
 */
body {
  background-color: #fff;
  /* This makes sure that the body covers the entire window and needs to
       be in a different element than the display: box in wrapper below */
  position: absolute;
  left: 0px;
  right: 0px;
  top: 0px;
  bottom: 0px;
  overflow: visible;
}
body > #header {
  /* Initially hidden to prevent FLOUC */
  display: none;
  background-color: #fff;
  /* Display over codemirror */
  position: relative;
  z-index: 100;
}
body > #header #header-container {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  padding: 5px;
  padding-bottom: 5px;
  padding-top: 5px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
body > #header .header-bar {
  width: 100%;
  height: 1px;
  background: #e7e7e7;
  margin-bottom: -1px;
}
@media print {
  body > #header {
    display: none !important;
  }
}
#header-spacer {
  width: 100%;
  visibility: hidden;
}
@media print {
  #header-spacer {
    display: none;
  }
}
#ipython_notebook {
  padding-left: 0px;
  padding-top: 1px;
  padding-bottom: 1px;
}
[dir="rtl"] #ipython_notebook {
  margin-right: 10px;
  margin-left: 0;
}
[dir="rtl"] #ipython_notebook.pull-left {
  float: right !important;
  float: right;
}
.flex-spacer {
  flex: 1;
}
#noscript {
  width: auto;
  padding-top: 16px;
  padding-bottom: 16px;
  text-align: center;
  font-size: 22px;
  color: red;
  font-weight: bold;
}
#ipython_notebook img {
  height: 28px;
}
#site {
  width: 100%;
  display: none;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  overflow: auto;
}
@media print {
  #site {
    height: auto !important;
  }
}
/* Smaller buttons */
.ui-button .ui-button-text {
  padding: 0.2em 0.8em;
  font-size: 77%;
}
input.ui-button {
  padding: 0.3em 0.9em;
}
span#kernel_logo_widget {
  margin: 0 10px;
}
span#login_widget {
  float: right;
}
[dir="rtl"] span#login_widget {
  float: left;
}
span#login_widget > .button,
#logout {
  color: #333;
  background-color: #fff;
  border-color: #ccc;
}
span#login_widget > .button:focus,
#logout:focus,
span#login_widget > .button.focus,
#logout.focus {
  color: #333;
  background-color: #e6e6e6;
  border-color: #8c8c8c;
}
span#login_widget > .button:hover,
#logout:hover {
  color: #333;
  background-color: #e6e6e6;
  border-color: #adadad;
}
span#login_widget > .button:active,
#logout:active,
span#login_widget > .button.active,
#logout.active,
.open > .dropdown-togglespan#login_widget > .button,
.open > .dropdown-toggle#logout {
  color: #333;
  background-color: #e6e6e6;
  border-color: #adadad;
}
span#login_widget > .button:active:hover,
#logout:active:hover,
span#login_widget > .button.active:hover,
#logout.active:hover,
.open > .dropdown-togglespan#login_widget > .button:hover,
.open > .dropdown-toggle#logout:hover,
span#login_widget > .button:active:focus,
#logout:active:focus,
span#login_widget > .button.active:focus,
#logout.active:focus,
.open > .dropdown-togglespan#login_widget > .button:focus,
.open > .dropdown-toggle#logout:focus,
span#login_widget > .button:active.focus,
#logout:active.focus,
span#login_widget > .button.active.focus,
#logout.active.focus,
.open > .dropdown-togglespan#login_widget > .button.focus,
.open > .dropdown-toggle#logout.focus {
  color: #333;
  background-color: #d4d4d4;
  border-color: #8c8c8c;
}
span#login_widget > .button:active,
#logout:active,
span#login_widget > .button.active,
#logout.active,
.open > .dropdown-togglespan#login_widget > .button,
.open > .dropdown-toggle#logout {
  background-image: none;
}
span#login_widget > .button.disabled:hover,
#logout.disabled:hover,
span#login_widget > .button[disabled]:hover,
#logout[disabled]:hover,
fieldset[disabled] span#login_widget > .button:hover,
fieldset[disabled] #logout:hover,
span#login_widget > .button.disabled:focus,
#logout.disabled:focus,
span#login_widget > .button[disabled]:focus,
#logout[disabled]:focus,
fieldset[disabled] span#login_widget > .button:focus,
fieldset[disabled] #logout:focus,
span#login_widget > .button.disabled.focus,
#logout.disabled.focus,
span#login_widget > .button[disabled].focus,
#logout[disabled].focus,
fieldset[disabled] span#login_widget > .button.focus,
fieldset[disabled] #logout.focus {
  background-color: #fff;
  border-color: #ccc;
}
span#login_widget > .button .badge,
#logout .badge {
  color: #fff;
  background-color: #333;
}
.nav-header {
  text-transform: none;
}
#header > span {
  margin-top: 10px;
}
.modal_stretch .modal-dialog {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  min-height: 80vh;
}
.modal_stretch .modal-dialog .modal-body {
  max-height: calc(100vh - 200px);
  overflow: auto;
  flex: 1;
}
.modal-header {
  cursor: move;
}
@media (min-width: 768px) {
  .modal .modal-dialog {
    width: 700px;
  }
}
@media (min-width: 768px) {
  select.form-control {
    margin-left: 12px;
    margin-right: 12px;
  }
}
/*!
*
* IPython auth
*
*/
.center-nav {
  display: inline-block;
  margin-bottom: -4px;
}
[dir="rtl"] .center-nav form.pull-left {
  float: right !important;
  float: right;
}
[dir="rtl"] .center-nav .navbar-text {
  float: right;
}
[dir="rtl"] .navbar-inner {
  text-align: right;
}
[dir="rtl"] div.text-left {
  text-align: right;
}
/*!
*
* IPython tree view
*
*/
/* We need an invisible input field on top of the sentense*/
/* "Drag file onto the list ..." */
.alternate_upload {
  background-color: none;
  display: inline;
}
.alternate_upload.form {
  padding: 0;
  margin: 0;
}
.alternate_upload input.fileinput {
  position: absolute;
  display: block;
  width: 100%;
  height: 100%;
  overflow: hidden;
  cursor: pointer;
  opacity: 0;
  z-index: 2;
}
.alternate_upload .btn-xs > input.fileinput {
  margin: -1px -5px;
}
.alternate_upload .btn-upload {
  position: relative;
  height: 22px;
}
::-webkit-file-upload-button {
  cursor: pointer;
}
/**
 * Primary styles
 *
 * Author: Jupyter Development Team
 */
ul#tabs {
  margin-bottom: 4px;
}
ul#tabs a {
  padding-top: 6px;
  padding-bottom: 4px;
}
[dir="rtl"] ul#tabs.nav-tabs > li {
  float: right;
}
[dir="rtl"] ul#tabs.nav.nav-tabs {
  padding-right: 0;
}
ul.breadcrumb a:focus,
ul.breadcrumb a:hover {
  text-decoration: none;
}
ul.breadcrumb i.icon-home {
  font-size: 16px;
  margin-right: 4px;
}
ul.breadcrumb span {
  color: #5e5e5e;
}
.list_toolbar {
  padding: 4px 0 4px 0;
  vertical-align: middle;
}
.list_toolbar .tree-buttons {
  padding-top: 1px;
}
[dir="rtl"] .list_toolbar .tree-buttons .pull-right {
  float: left !important;
  float: left;
}
[dir="rtl"] .list_toolbar .col-sm-4,
[dir="rtl"] .list_toolbar .col-sm-8 {
  float: right;
}
.dynamic-buttons {
  padding-top: 3px;
  display: inline-block;
}
.list_toolbar [class*="span"] {
  min-height: 24px;
}
.list_header {
  font-weight: bold;
  background-color: #EEE;
}
.list_placeholder {
  font-weight: bold;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 7px;
  padding-right: 7px;
}
.list_container {
  margin-top: 4px;
  margin-bottom: 20px;
  border: 1px solid #ddd;
  border-radius: 2px;
}
.list_container > div {
  border-bottom: 1px solid #ddd;
}
.list_container > div:hover .list-item {
  background-color: red;
}
.list_container > div:last-child {
  border: none;
}
.list_item:hover .list_item {
  background-color: #ddd;
}
.list_item a {
  text-decoration: none;
}
.list_item:hover {
  background-color: #fafafa;
}
.list_header > div,
.list_item > div {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 7px;
  padding-right: 7px;
  line-height: 22px;
}
.list_header > div input,
.list_item > div input {
  margin-right: 7px;
  margin-left: 14px;
  vertical-align: text-bottom;
  line-height: 22px;
  position: relative;
  top: -1px;
}
.list_header > div .item_link,
.list_item > div .item_link {
  margin-left: -1px;
  vertical-align: baseline;
  line-height: 22px;
}
[dir="rtl"] .list_item > div input {
  margin-right: 0;
}
.new-file input[type=checkbox] {
  visibility: hidden;
}
.item_name {
  line-height: 22px;
  height: 24px;
}
.item_icon {
  font-size: 14px;
  color: #5e5e5e;
  margin-right: 7px;
  margin-left: 7px;
  line-height: 22px;
  vertical-align: baseline;
}
.item_modified {
  margin-right: 7px;
  margin-left: 7px;
}
[dir="rtl"] .item_modified.pull-right {
  float: left !important;
  float: left;
}
.item_buttons {
  line-height: 1em;
  margin-left: -5px;
}
.item_buttons .btn,
.item_buttons .btn-group,
.item_buttons .input-group {
  float: left;
}
.item_buttons > .btn,
.item_buttons > .btn-group,
.item_buttons > .input-group {
  margin-left: 5px;
}
.item_buttons .btn {
  min-width: 13ex;
}
.item_buttons .running-indicator {
  padding-top: 4px;
  color: #5cb85c;
}
.item_buttons .kernel-name {
  padding-top: 4px;
  color: #5bc0de;
  margin-right: 7px;
  float: left;
}
[dir="rtl"] .item_buttons.pull-right {
  float: left !important;
  float: left;
}
[dir="rtl"] .item_buttons .kernel-name {
  margin-left: 7px;
  float: right;
}
.toolbar_info {
  height: 24px;
  line-height: 24px;
}
.list_item input:not([type=checkbox]) {
  padding-top: 3px;
  padding-bottom: 3px;
  height: 22px;
  line-height: 14px;
  margin: 0px;
}
.highlight_text {
  color: blue;
}
#project_name {
  display: inline-block;
  padding-left: 7px;
  margin-left: -2px;
}
#project_name > .breadcrumb {
  padding: 0px;
  margin-bottom: 0px;
  background-color: transparent;
  font-weight: bold;
}
.sort_button {
  display: inline-block;
  padding-left: 7px;
}
[dir="rtl"] .sort_button.pull-right {
  float: left !important;
  float: left;
}
#tree-selector {
  padding-right: 0px;
}
#button-select-all {
  min-width: 50px;
}
[dir="rtl"] #button-select-all.btn {
  float: right ;
}
#select-all {
  margin-left: 7px;
  margin-right: 2px;
  margin-top: 2px;
  height: 16px;
}
[dir="rtl"] #select-all.pull-left {
  float: right !important;
  float: right;
}
.menu_icon {
  margin-right: 2px;
}
.tab-content .row {
  margin-left: 0px;
  margin-right: 0px;
}
.folder_icon:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f114";
}
.folder_icon:before.fa-pull-left {
  margin-right: .3em;
}
.folder_icon:before.fa-pull-right {
  margin-left: .3em;
}
.folder_icon:before.pull-left {
  margin-right: .3em;
}
.folder_icon:before.pull-right {
  margin-left: .3em;
}
.notebook_icon:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f02d";
  position: relative;
  top: -1px;
}
.notebook_icon:before.fa-pull-left {
  margin-right: .3em;
}
.notebook_icon:before.fa-pull-right {
  margin-left: .3em;
}
.notebook_icon:before.pull-left {
  margin-right: .3em;
}
.notebook_icon:before.pull-right {
  margin-left: .3em;
}
.running_notebook_icon:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f02d";
  position: relative;
  top: -1px;
  color: #5cb85c;
}
.running_notebook_icon:before.fa-pull-left {
  margin-right: .3em;
}
.running_notebook_icon:before.fa-pull-right {
  margin-left: .3em;
}
.running_notebook_icon:before.pull-left {
  margin-right: .3em;
}
.running_notebook_icon:before.pull-right {
  margin-left: .3em;
}
.file_icon:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f016";
  position: relative;
  top: -2px;
}
.file_icon:before.fa-pull-left {
  margin-right: .3em;
}
.file_icon:before.fa-pull-right {
  margin-left: .3em;
}
.file_icon:before.pull-left {
  margin-right: .3em;
}
.file_icon:before.pull-right {
  margin-left: .3em;
}
#notebook_toolbar .pull-right {
  padding-top: 0px;
  margin-right: -1px;
}
ul#new-menu {
  left: auto;
  right: 0;
}
#new-menu .dropdown-header {
  font-size: 10px;
  border-bottom: 1px solid #e5e5e5;
  padding: 0 0 3px;
  margin: -3px 20px 0;
}
.kernel-menu-icon {
  padding-right: 12px;
  width: 24px;
  content: "\f096";
}
.kernel-menu-icon:before {
  content: "\f096";
}
.kernel-menu-icon-current:before {
  content: "\f00c";
}
#tab_content {
  padding-top: 20px;
}
#running .panel-group .panel {
  margin-top: 3px;
  margin-bottom: 1em;
}
#running .panel-group .panel .panel-heading {
  background-color: #EEE;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 7px;
  padding-right: 7px;
  line-height: 22px;
}
#running .panel-group .panel .panel-heading a:focus,
#running .panel-group .panel .panel-heading a:hover {
  text-decoration: none;
}
#running .panel-group .panel .panel-body {
  padding: 0px;
}
#running .panel-group .panel .panel-body .list_container {
  margin-top: 0px;
  margin-bottom: 0px;
  border: 0px;
  border-radius: 0px;
}
#running .panel-group .panel .panel-body .list_container .list_item {
  border-bottom: 1px solid #ddd;
}
#running .panel-group .panel .panel-body .list_container .list_item:last-child {
  border-bottom: 0px;
}
.delete-button {
  display: none;
}
.duplicate-button {
  display: none;
}
.rename-button {
  display: none;
}
.move-button {
  display: none;
}
.download-button {
  display: none;
}
.shutdown-button {
  display: none;
}
.dynamic-instructions {
  display: inline-block;
  padding-top: 4px;
}
/*!
*
* IPython text editor webapp
*
*/
.selected-keymap i.fa {
  padding: 0px 5px;
}
.selected-keymap i.fa:before {
  content: "\f00c";
}
#mode-menu {
  overflow: auto;
  max-height: 20em;
}
.edit_app #header {
  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
}
.edit_app #menubar .navbar {
  /* Use a negative 1 bottom margin, so the border overlaps the border of the
    header */
  margin-bottom: -1px;
}
.dirty-indicator {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  width: 20px;
}
.dirty-indicator.fa-pull-left {
  margin-right: .3em;
}
.dirty-indicator.fa-pull-right {
  margin-left: .3em;
}
.dirty-indicator.pull-left {
  margin-right: .3em;
}
.dirty-indicator.pull-right {
  margin-left: .3em;
}
.dirty-indicator-dirty {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  width: 20px;
}
.dirty-indicator-dirty.fa-pull-left {
  margin-right: .3em;
}
.dirty-indicator-dirty.fa-pull-right {
  margin-left: .3em;
}
.dirty-indicator-dirty.pull-left {
  margin-right: .3em;
}
.dirty-indicator-dirty.pull-right {
  margin-left: .3em;
}
.dirty-indicator-clean {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  width: 20px;
}
.dirty-indicator-clean.fa-pull-left {
  margin-right: .3em;
}
.dirty-indicator-clean.fa-pull-right {
  margin-left: .3em;
}
.dirty-indicator-clean.pull-left {
  margin-right: .3em;
}
.dirty-indicator-clean.pull-right {
  margin-left: .3em;
}
.dirty-indicator-clean:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f00c";
}
.dirty-indicator-clean:before.fa-pull-left {
  margin-right: .3em;
}
.dirty-indicator-clean:before.fa-pull-right {
  margin-left: .3em;
}
.dirty-indicator-clean:before.pull-left {
  margin-right: .3em;
}
.dirty-indicator-clean:before.pull-right {
  margin-left: .3em;
}
#filename {
  font-size: 16pt;
  display: table;
  padding: 0px 5px;
}
#current-mode {
  padding-left: 5px;
  padding-right: 5px;
}
#texteditor-backdrop {
  padding-top: 20px;
  padding-bottom: 20px;
}
@media not print {
  #texteditor-backdrop {
    background-color: #EEE;
  }
}
@media print {
  #texteditor-backdrop #texteditor-container .CodeMirror-gutter,
  #texteditor-backdrop #texteditor-container .CodeMirror-gutters {
    background-color: #fff;
  }
}
@media not print {
  #texteditor-backdrop #texteditor-container .CodeMirror-gutter,
  #texteditor-backdrop #texteditor-container .CodeMirror-gutters {
    background-color: #fff;
  }
}
@media not print {
  #texteditor-backdrop #texteditor-container {
    padding: 0px;
    background-color: #fff;
    -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
    box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
  }
}
.CodeMirror-dialog {
  background-color: #fff;
}
/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color: #B22B31;
}
.ansi-red-intense-bg {
  background-color: #B22B31;
}
.ansi-green-fg {
  color: #00A250;
}
.ansi-green-bg {
  background-color: #00A250;
}
.ansi-green-intense-fg {
  color: #007427;
}
.ansi-green-intense-bg {
  background-color: #007427;
}
.ansi-yellow-fg {
  color: #DDB62B;
}
.ansi-yellow-bg {
  background-color: #DDB62B;
}
.ansi-yellow-intense-fg {
  color: #B27D12;
}
.ansi-yellow-intense-bg {
  background-color: #B27D12;
}
.ansi-blue-fg {
  color: #208FFB;
}
.ansi-blue-bg {
  background-color: #208FFB;
}
.ansi-blue-intense-fg {
  color: #0065CA;
}
.ansi-blue-intense-bg {
  background-color: #0065CA;
}
.ansi-magenta-fg {
  color: #D160C4;
}
.ansi-magenta-bg {
  background-color: #D160C4;
}
.ansi-magenta-intense-fg {
  color: #A03196;
}
.ansi-magenta-intense-bg {
  background-color: #A03196;
}
.ansi-cyan-fg {
  color: #60C6C8;
}
.ansi-cyan-bg {
  background-color: #60C6C8;
}
.ansi-cyan-intense-fg {
  color: #258F8F;
}
.ansi-cyan-intense-bg {
  background-color: #258F8F;
}
.ansi-white-fg {
  color: #C5C1B4;
}
.ansi-white-bg {
  background-color: #C5C1B4;
}
.ansi-white-intense-fg {
  color: #A1A6B2;
}
.ansi-white-intense-bg {
  background-color: #A1A6B2;
}
.ansi-default-inverse-fg {
  color: #FFFFFF;
}
.ansi-default-inverse-bg {
  background-color: #000000;
}
.ansi-bold {
  font-weight: bold;
}
.ansi-underline {
  text-decoration: underline;
}
/* The following styles are deprecated an will be removed in a future version */
.ansibold {
  font-weight: bold;
}
.ansi-inverse {
  outline: 0.5px dotted;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  position: relative;
  overflow: visible;
}
div.cell:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: transparent;
}
div.cell.jupyter-soft-selected {
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected,
div.cell.selected.jupyter-soft-selected {
  border-color: #ababab;
}
div.cell.selected:before,
div.cell.selected.jupyter-soft-selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #42A5F5;
}
@media print {
  div.cell.selected,
  div.cell.selected.jupyter-soft-selected {
    border-color: transparent;
  }
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
}
.edit_mode div.cell.selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #66BB6A;
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  /* Note that this should set vertical padding only, since CodeMirror assumes
       that horizontal padding will be set on CodeMirror pre */
  padding: 0.4em 0;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,
    use .CodeMirror-lines for vertical */
  padding: 0 0.4em;
  border: 0;
  border-radius: 0;
}
.CodeMirror-cursor {
  border-left: 1.4px solid black;
}
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .CodeMirror-cursor {
    border-left: 2px solid black;
  }
}
@media screen and (min-width: 4320px) {
  .CodeMirror-cursor {
    border-left: 4px solid black;
  }
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area .rendered_html table {
  margin-left: 0;
  margin-right: 0;
}
div.output_area .rendered_html img {
  margin-left: 0;
  margin-right: 0;
}
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
div.output_area .mglyph > img {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 1px 0 1px 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}
.rendered_html em {
  font-style: italic;
}
.rendered_html strong {
  font-weight: bold;
}
.rendered_html u {
  text-decoration: underline;
}
.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}
.rendered_html h1 {
  font-size: 185.7%;
  margin: 1.08em 0 0 0;
  font-weight: bold;
  line-height: 1.0;
}
.rendered_html h2 {
  font-size: 157.1%;
  margin: 1.27em 0 0 0;
  font-weight: bold;
  line-height: 1.0;
}
.rendered_html h3 {
  font-size: 128.6%;
  margin: 1.55em 0 0 0;
  font-weight: bold;
  line-height: 1.0;
}
.rendered_html h4 {
  font-size: 100%;
  margin: 2em 0 0 0;
  font-weight: bold;
  line-height: 1.0;
}
.rendered_html h5 {
  font-size: 100%;
  margin: 2em 0 0 0;
  font-weight: bold;
  line-height: 1.0;
  font-style: italic;
}
.rendered_html h6 {
  font-size: 100%;
  margin: 2em 0 0 0;
  font-weight: bold;
  line-height: 1.0;
  font-style: italic;
}
.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}
.rendered_html ul:not(.list-inline),
.rendered_html ol:not(.list-inline) {
  padding-left: 2em;
}
.rendered_html ul {
  list-style: disc;
}
.rendered_html ul ul {
  list-style: square;
  margin-top: 0;
}
.rendered_html ul ul ul {
  list-style: circle;
}
.rendered_html ol {
  list-style: decimal;
}
.rendered_html ol ol {
  list-style: upper-alpha;
  margin-top: 0;
}
.rendered_html ol ol ol {
  list-style: lower-alpha;
}
.rendered_html ol ol ol ol {
  list-style: lower-roman;
}
.rendered_html ol ol ol ol ol {
  list-style: decimal;
}
.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}
.rendered_html hr {
  color: black;
  background-color: black;
}
.rendered_html pre {
  margin: 1em 2em;
  padding: 0px;
  background-color: #fff;
}
.rendered_html code {
  background-color: #eff0f1;
}
.rendered_html p code {
  padding: 1px 5px;
}
.rendered_html pre code {
  background-color: #fff;
}
.rendered_html pre,
.rendered_html code {
  border: 0;
  color: #000;
  font-size: 100%;
}
.rendered_html blockquote {
  margin: 1em 2em;
}
.rendered_html table {
  margin-left: auto;
  margin-right: auto;
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.rendered_html tr,
.rendered_html th,
.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.rendered_html th {
  font-weight: bold;
}
.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
.rendered_html * + table {
  margin-top: 1em;
}
.rendered_html p {
  text-align: left;
}
.rendered_html * + p {
  margin-top: 1em;
}
.rendered_html img {
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,
.rendered_html svg {
  max-width: 100%;
  height: auto;
}
.rendered_html img.unconfined,
.rendered_html svg.unconfined {
  max-width: none;
}
.rendered_html .alert {
  margin-bottom: initial;
}
.rendered_html * + .alert {
  margin-top: 1em;
}
[dir="rtl"] .rendered_html p {
  text-align: right;
}
div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered .rendered_html {
  overflow-x: auto;
  overflow-y: hidden;
}
.text_cell.rendered .rendered_html tr,
.text_cell.rendered .rendered_html th,
.text_cell.rendered .rendered_html td {
  max-width: none;
}
.text_cell.unrendered .text_cell_render {
  display: none;
}
.text_cell .dropzone .input_area {
  border: 2px dashed #bababa;
  margin: -1px;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
/*!
*
* IPython notebook webapp
*
*/
@media (max-width: 767px) {
  .notebook_app {
    padding-left: 0px;
    padding-right: 0px;
  }
}
#ipython-main-app {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  height: 100%;
}
div#notebook_panel {
  margin: 0px;
  padding: 0px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  height: 100%;
}
div#notebook {
  font-size: 14px;
  line-height: 20px;
  overflow-y: hidden;
  overflow-x: auto;
  width: 100%;
  /* This spaces the page away from the edge of the notebook area */
  padding-top: 20px;
  margin: 0px;
  outline: none;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  min-height: 100%;
}
@media not print {
  #notebook-container {
    padding: 15px;
    background-color: #fff;
    min-height: 0;
    -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
    box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
  }
}
@media print {
  #notebook-container {
    width: 100%;
  }
}
div.ui-widget-content {
  border: 1px solid #ababab;
  outline: none;
}
pre.dialog {
  background-color: #f7f7f7;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0.4em;
  padding-left: 2em;
}
p.dialog {
  padding: 0.2em;
}
/* Word-wrap output correctly.  This is the CSS3 spelling, though Firefox seems
   to not honor it correctly.  Webkit browsers (Chrome, rekonq, Safari) do.
 */
pre,
code,
kbd,
samp {
  white-space: pre-wrap;
}
#fonttest {
  font-family: monospace;
}
p {
  margin-bottom: 0;
}
.end_space {
  min-height: 100px;
  transition: height .2s ease;
}
.notebook_app > #header {
  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
}
@media not print {
  .notebook_app {
    background-color: #EEE;
  }
}
kbd {
  border-style: solid;
  border-width: 1px;
  box-shadow: none;
  margin: 2px;
  padding-left: 2px;
  padding-right: 2px;
  padding-top: 1px;
  padding-bottom: 1px;
}
.jupyter-keybindings {
  padding: 1px;
  line-height: 24px;
  border-bottom: 1px solid gray;
}
.jupyter-keybindings input {
  margin: 0;
  padding: 0;
  border: none;
}
.jupyter-keybindings i {
  padding: 6px;
}
.well code {
  background-color: #ffffff;
  border-color: #ababab;
  border-width: 1px;
  border-style: solid;
  padding: 2px;
  padding-top: 1px;
  padding-bottom: 1px;
}
/* CSS for the cell toolbar */
.celltoolbar {
  border: thin solid #CFCFCF;
  border-bottom: none;
  background: #EEE;
  border-radius: 2px 2px 0px 0px;
  width: 100%;
  height: 29px;
  padding-right: 4px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-pack: end;
  -moz-box-pack: end;
  box-pack: end;
  /* Modern browsers */
  justify-content: flex-end;
  display: -webkit-flex;
}
@media print {
  .celltoolbar {
    display: none;
  }
}
.ctb_hideshow {
  display: none;
  vertical-align: bottom;
}
/* ctb_show is added to the ctb_hideshow div to show the cell toolbar.
   Cell toolbars are only shown when the ctb_global_show class is also set.
*/
.ctb_global_show .ctb_show.ctb_hideshow {
  display: block;
}
.ctb_global_show .ctb_show + .input_area,
.ctb_global_show .ctb_show + div.text_cell_input,
.ctb_global_show .ctb_show ~ div.text_cell_render {
  border-top-right-radius: 0px;
  border-top-left-radius: 0px;
}
.ctb_global_show .ctb_show ~ div.text_cell_render {
  border: 1px solid #cfcfcf;
}
.celltoolbar {
  font-size: 87%;
  padding-top: 3px;
}
.celltoolbar select {
  display: block;
  width: 100%;
  height: 32px;
  padding: 6px 12px;
  font-size: 13px;
  line-height: 1.42857143;
  color: #555555;
  background-color: #fff;
  background-image: none;
  border: 1px solid #ccc;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  height: 30px;
  padding: 5px 10px;
  font-size: 12px;
  line-height: 1.5;
  border-radius: 1px;
  width: inherit;
  font-size: inherit;
  height: 22px;
  padding: 0px;
  display: inline-block;
}
.celltoolbar select:focus {
  border-color: #66afe9;
  outline: 0;
  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
}
.celltoolbar select::-moz-placeholder {
  color: #999;
  opacity: 1;
}
.celltoolbar select:-ms-input-placeholder {
  color: #999;
}
.celltoolbar select::-webkit-input-placeholder {
  color: #999;
}
.celltoolbar select::-ms-expand {
  border: 0;
  background-color: transparent;
}
.celltoolbar select[disabled],
.celltoolbar select[readonly],
fieldset[disabled] .celltoolbar select {
  background-color: #eeeeee;
  opacity: 1;
}
.celltoolbar select[disabled],
fieldset[disabled] .celltoolbar select {
  cursor: not-allowed;
}
textarea.celltoolbar select {
  height: auto;
}
select.celltoolbar select {
  height: 30px;
  line-height: 30px;
}
textarea.celltoolbar select,
select[multiple].celltoolbar select {
  height: auto;
}
.celltoolbar label {
  margin-left: 5px;
  margin-right: 5px;
}
.tags_button_container {
  width: 100%;
  display: flex;
}
.tag-container {
  display: flex;
  flex-direction: row;
  flex-grow: 1;
  overflow: hidden;
  position: relative;
}
.tag-container > * {
  margin: 0 4px;
}
.remove-tag-btn {
  margin-left: 4px;
}
.tags-input {
  display: flex;
}
.cell-tag:last-child:after {
  content: "";
  position: absolute;
  right: 0;
  width: 40px;
  height: 100%;
  /* Fade to background color of cell toolbar */
  background: linear-gradient(to right, rgba(0, 0, 0, 0), #EEE);
}
.tags-input > * {
  margin-left: 4px;
}
.cell-tag,
.tags-input input,
.tags-input button {
  display: block;
  width: 100%;
  height: 32px;
  padding: 6px 12px;
  font-size: 13px;
  line-height: 1.42857143;
  color: #555555;
  background-color: #fff;
  background-image: none;
  border: 1px solid #ccc;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
  height: 30px;
  padding: 5px 10px;
  font-size: 12px;
  line-height: 1.5;
  border-radius: 1px;
  box-shadow: none;
  width: inherit;
  font-size: inherit;
  height: 22px;
  line-height: 22px;
  padding: 0px 4px;
  display: inline-block;
}
.cell-tag:focus,
.tags-input input:focus,
.tags-input button:focus {
  border-color: #66afe9;
  outline: 0;
  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);
}
.cell-tag::-moz-placeholder,
.tags-input input::-moz-placeholder,
.tags-input button::-moz-placeholder {
  color: #999;
  opacity: 1;
}
.cell-tag:-ms-input-placeholder,
.tags-input input:-ms-input-placeholder,
.tags-input button:-ms-input-placeholder {
  color: #999;
}
.cell-tag::-webkit-input-placeholder,
.tags-input input::-webkit-input-placeholder,
.tags-input button::-webkit-input-placeholder {
  color: #999;
}
.cell-tag::-ms-expand,
.tags-input input::-ms-expand,
.tags-input button::-ms-expand {
  border: 0;
  background-color: transparent;
}
.cell-tag[disabled],
.tags-input input[disabled],
.tags-input button[disabled],
.cell-tag[readonly],
.tags-input input[readonly],
.tags-input button[readonly],
fieldset[disabled] .cell-tag,
fieldset[disabled] .tags-input input,
fieldset[disabled] .tags-input button {
  background-color: #eeeeee;
  opacity: 1;
}
.cell-tag[disabled],
.tags-input input[disabled],
.tags-input button[disabled],
fieldset[disabled] .cell-tag,
fieldset[disabled] .tags-input input,
fieldset[disabled] .tags-input button {
  cursor: not-allowed;
}
textarea.cell-tag,
textarea.tags-input input,
textarea.tags-input button {
  height: auto;
}
select.cell-tag,
select.tags-input input,
select.tags-input button {
  height: 30px;
  line-height: 30px;
}
textarea.cell-tag,
textarea.tags-input input,
textarea.tags-input button,
select[multiple].cell-tag,
select[multiple].tags-input input,
select[multiple].tags-input button {
  height: auto;
}
.cell-tag,
.tags-input button {
  padding: 0px 4px;
}
.cell-tag {
  background-color: #fff;
  white-space: nowrap;
}
.tags-input input[type=text]:focus {
  outline: none;
  box-shadow: none;
  border-color: #ccc;
}
.completions {
  position: absolute;
  z-index: 110;
  overflow: hidden;
  border: 1px solid #ababab;
  border-radius: 2px;
  -webkit-box-shadow: 0px 6px 10px -1px #adadad;
  box-shadow: 0px 6px 10px -1px #adadad;
  line-height: 1;
}
.completions select {
  background: white;
  outline: none;
  border: none;
  padding: 0px;
  margin: 0px;
  overflow: auto;
  font-family: monospace;
  font-size: 110%;
  color: #000;
  width: auto;
}
.completions select option.context {
  color: #286090;
}
#kernel_logo_widget .current_kernel_logo {
  display: none;
  margin-top: -1px;
  margin-bottom: -1px;
  width: 32px;
  height: 32px;
}
[dir="rtl"] #kernel_logo_widget {
  float: left !important;
  float: left;
}
.modal .modal-body .move-path {
  display: flex;
  flex-direction: row;
  justify-content: space;
  align-items: center;
}
.modal .modal-body .move-path .server-root {
  padding-right: 20px;
}
.modal .modal-body .move-path .path-input {
  flex: 1;
}
#menubar {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  margin-top: 1px;
}
#menubar .navbar {
  border-top: 1px;
  border-radius: 0px 0px 2px 2px;
  margin-bottom: 0px;
}
#menubar .navbar-toggle {
  float: left;
  padding-top: 7px;
  padding-bottom: 7px;
  border: none;
}
#menubar .navbar-collapse {
  clear: left;
}
[dir="rtl"] #menubar .navbar-toggle {
  float: right;
}
[dir="rtl"] #menubar .navbar-collapse {
  clear: right;
}
[dir="rtl"] #menubar .navbar-nav {
  float: right;
}
[dir="rtl"] #menubar .nav {
  padding-right: 0px;
}
[dir="rtl"] #menubar .navbar-nav > li {
  float: right;
}
[dir="rtl"] #menubar .navbar-right {
  float: left !important;
}
[dir="rtl"] ul.dropdown-menu {
  text-align: right;
  left: auto;
}
[dir="rtl"] ul#new-menu.dropdown-menu {
  right: auto;
  left: 0;
}
.nav-wrapper {
  border-bottom: 1px solid #e7e7e7;
}
i.menu-icon {
  padding-top: 4px;
}
[dir="rtl"] i.menu-icon.pull-right {
  float: left !important;
  float: left;
}
ul#help_menu li a {
  overflow: hidden;
  padding-right: 2.2em;
}
ul#help_menu li a i {
  margin-right: -1.2em;
}
[dir="rtl"] ul#help_menu li a {
  padding-left: 2.2em;
}
[dir="rtl"] ul#help_menu li a i {
  margin-right: 0;
  margin-left: -1.2em;
}
[dir="rtl"] ul#help_menu li a i.pull-right {
  float: left !important;
  float: left;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu > .dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
}
[dir="rtl"] .dropdown-submenu > .dropdown-menu {
  right: 100%;
  margin-right: -1px;
}
.dropdown-submenu:hover > .dropdown-menu {
  display: block;
}
.dropdown-submenu > a:after {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  display: block;
  content: "\f0da";
  float: right;
  color: #333333;
  margin-top: 2px;
  margin-right: -10px;
}
.dropdown-submenu > a:after.fa-pull-left {
  margin-right: .3em;
}
.dropdown-submenu > a:after.fa-pull-right {
  margin-left: .3em;
}
.dropdown-submenu > a:after.pull-left {
  margin-right: .3em;
}
.dropdown-submenu > a:after.pull-right {
  margin-left: .3em;
}
[dir="rtl"] .dropdown-submenu > a:after {
  float: left;
  content: "\f0d9";
  margin-right: 0;
  margin-left: -10px;
}
.dropdown-submenu:hover > a:after {
  color: #262626;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left > .dropdown-menu {
  left: -100%;
  margin-left: 10px;
}
#notification_area {
  float: right !important;
  float: right;
  z-index: 10;
}
[dir="rtl"] #notification_area {
  float: left !important;
  float: left;
}
.indicator_area {
  float: right !important;
  float: right;
  color: #777;
  margin-left: 5px;
  margin-right: 5px;
  width: 11px;
  z-index: 10;
  text-align: center;
  width: auto;
}
[dir="rtl"] .indicator_area {
  float: left !important;
  float: left;
}
#kernel_indicator {
  float: right !important;
  float: right;
  color: #777;
  margin-left: 5px;
  margin-right: 5px;
  width: 11px;
  z-index: 10;
  text-align: center;
  width: auto;
  border-left: 1px solid;
}
#kernel_indicator .kernel_indicator_name {
  padding-left: 5px;
  padding-right: 5px;
}
[dir="rtl"] #kernel_indicator {
  float: left !important;
  float: left;
  border-left: 0;
  border-right: 1px solid;
}
#modal_indicator {
  float: right !important;
  float: right;
  color: #777;
  margin-left: 5px;
  margin-right: 5px;
  width: 11px;
  z-index: 10;
  text-align: center;
  width: auto;
}
[dir="rtl"] #modal_indicator {
  float: left !important;
  float: left;
}
#readonly-indicator {
  float: right !important;
  float: right;
  color: #777;
  margin-left: 5px;
  margin-right: 5px;
  width: 11px;
  z-index: 10;
  text-align: center;
  width: auto;
  margin-top: 2px;
  margin-bottom: 0px;
  margin-left: 0px;
  margin-right: 0px;
  display: none;
}
.modal_indicator:before {
  width: 1.28571429em;
  text-align: center;
}
.edit_mode .modal_indicator:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f040";
}
.edit_mode .modal_indicator:before.fa-pull-left {
  margin-right: .3em;
}
.edit_mode .modal_indicator:before.fa-pull-right {
  margin-left: .3em;
}
.edit_mode .modal_indicator:before.pull-left {
  margin-right: .3em;
}
.edit_mode .modal_indicator:before.pull-right {
  margin-left: .3em;
}
.command_mode .modal_indicator:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: ' ';
}
.command_mode .modal_indicator:before.fa-pull-left {
  margin-right: .3em;
}
.command_mode .modal_indicator:before.fa-pull-right {
  margin-left: .3em;
}
.command_mode .modal_indicator:before.pull-left {
  margin-right: .3em;
}
.command_mode .modal_indicator:before.pull-right {
  margin-left: .3em;
}
.kernel_idle_icon:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f10c";
}
.kernel_idle_icon:before.fa-pull-left {
  margin-right: .3em;
}
.kernel_idle_icon:before.fa-pull-right {
  margin-left: .3em;
}
.kernel_idle_icon:before.pull-left {
  margin-right: .3em;
}
.kernel_idle_icon:before.pull-right {
  margin-left: .3em;
}
.kernel_busy_icon:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f111";
}
.kernel_busy_icon:before.fa-pull-left {
  margin-right: .3em;
}
.kernel_busy_icon:before.fa-pull-right {
  margin-left: .3em;
}
.kernel_busy_icon:before.pull-left {
  margin-right: .3em;
}
.kernel_busy_icon:before.pull-right {
  margin-left: .3em;
}
.kernel_dead_icon:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f1e2";
}
.kernel_dead_icon:before.fa-pull-left {
  margin-right: .3em;
}
.kernel_dead_icon:before.fa-pull-right {
  margin-left: .3em;
}
.kernel_dead_icon:before.pull-left {
  margin-right: .3em;
}
.kernel_dead_icon:before.pull-right {
  margin-left: .3em;
}
.kernel_disconnected_icon:before {
  display: inline-block;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  content: "\f127";
}
.kernel_disconnected_icon:before.fa-pull-left {
  margin-right: .3em;
}
.kernel_disconnected_icon:before.fa-pull-right {
  margin-left: .3em;
}
.kernel_disconnected_icon:before.pull-left {
  margin-right: .3em;
}
.kernel_disconnected_icon:before.pull-right {
  margin-left: .3em;
}
.notification_widget {
  color: #777;
  z-index: 10;
  background: rgba(240, 240, 240, 0.5);
  margin-right: 4px;
  color: #333;
  background-color: #fff;
  border-color: #ccc;
}
.notification_widget:focus,
.notification_widget.focus {
  color: #333;
  background-color: #e6e6e6;
  border-color: #8c8c8c;
}
.notification_widget:hover {
  color: #333;
  background-color: #e6e6e6;
  border-color: #adadad;
}
.notification_widget:active,
.notification_widget.active,
.open > .dropdown-toggle.notification_widget {
  color: #333;
  background-color: #e6e6e6;
  border-color: #adadad;
}
.notification_widget:active:hover,
.notification_widget.active:hover,
.open > .dropdown-toggle.notification_widget:hover,
.notification_widget:active:focus,
.notification_widget.active:focus,
.open > .dropdown-toggle.notification_widget:focus,
.notification_widget:active.focus,
.notification_widget.active.focus,
.open > .dropdown-toggle.notification_widget.focus {
  color: #333;
  background-color: #d4d4d4;
  border-color: #8c8c8c;
}
.notification_widget:active,
.notification_widget.active,
.open > .dropdown-toggle.notification_widget {
  background-image: none;
}
.notification_widget.disabled:hover,
.notification_widget[disabled]:hover,
fieldset[disabled] .notification_widget:hover,
.notification_widget.disabled:focus,
.notification_widget[disabled]:focus,
fieldset[disabled] .notification_widget:focus,
.notification_widget.disabled.focus,
.notification_widget[disabled].focus,
fieldset[disabled] .notification_widget.focus {
  background-color: #fff;
  border-color: #ccc;
}
.notification_widget .badge {
  color: #fff;
  background-color: #333;
}
.notification_widget.warning {
  color: #fff;
  background-color: #f0ad4e;
  border-color: #eea236;
}
.notification_widget.warning:focus,
.notification_widget.warning.focus {
  color: #fff;
  background-color: #ec971f;
  border-color: #985f0d;
}
.notification_widget.warning:hover {
  color: #fff;
  background-color: #ec971f;
  border-color: #d58512;
}
.notification_widget.warning:active,
.notification_widget.warning.active,
.open > .dropdown-toggle.notification_widget.warning {
  color: #fff;
  background-color: #ec971f;
  border-color: #d58512;
}
.notification_widget.warning:active:hover,
.notification_widget.warning.active:hover,
.open > .dropdown-toggle.notification_widget.warning:hover,
.notification_widget.warning:active:focus,
.notification_widget.warning.active:focus,
.open > .dropdown-toggle.notification_widget.warning:focus,
.notification_widget.warning:active.focus,
.notification_widget.warning.active.focus,
.open > .dropdown-toggle.notification_widget.warning.focus {
  color: #fff;
  background-color: #d58512;
  border-color: #985f0d;
}
.notification_widget.warning:active,
.notification_widget.warning.active,
.open > .dropdown-toggle.notification_widget.warning {
  background-image: none;
}
.notification_widget.warning.disabled:hover,
.notification_widget.warning[disabled]:hover,
fieldset[disabled] .notification_widget.warning:hover,
.notification_widget.warning.disabled:focus,
.notification_widget.warning[disabled]:focus,
fieldset[disabled] .notification_widget.warning:focus,
.notification_widget.warning.disabled.focus,
.notification_widget.warning[disabled].focus,
fieldset[disabled] .notification_widget.warning.focus {
  background-color: #f0ad4e;
  border-color: #eea236;
}
.notification_widget.warning .badge {
  color: #f0ad4e;
  background-color: #fff;
}
.notification_widget.success {
  color: #fff;
  background-color: #5cb85c;
  border-color: #4cae4c;
}
.notification_widget.success:focus,
.notification_widget.success.focus {
  color: #fff;
  background-color: #449d44;
  border-color: #255625;
}
.notification_widget.success:hover {
  color: #fff;
  background-color: #449d44;
  border-color: #398439;
}
.notification_widget.success:active,
.notification_widget.success.active,
.open > .dropdown-toggle.notification_widget.success {
  color: #fff;
  background-color: #449d44;
  border-color: #398439;
}
.notification_widget.success:active:hover,
.notification_widget.success.active:hover,
.open > .dropdown-toggle.notification_widget.success:hover,
.notification_widget.success:active:focus,
.notification_widget.success.active:focus,
.open > .dropdown-toggle.notification_widget.success:focus,
.notification_widget.success:active.focus,
.notification_widget.success.active.focus,
.open > .dropdown-toggle.notification_widget.success.focus {
  color: #fff;
  background-color: #398439;
  border-color: #255625;
}
.notification_widget.success:active,
.notification_widget.success.active,
.open > .dropdown-toggle.notification_widget.success {
  background-image: none;
}
.notification_widget.success.disabled:hover,
.notification_widget.success[disabled]:hover,
fieldset[disabled] .notification_widget.success:hover,
.notification_widget.success.disabled:focus,
.notification_widget.success[disabled]:focus,
fieldset[disabled] .notification_widget.success:focus,
.notification_widget.success.disabled.focus,
.notification_widget.success[disabled].focus,
fieldset[disabled] .notification_widget.success.focus {
  background-color: #5cb85c;
  border-color: #4cae4c;
}
.notification_widget.success .badge {
  color: #5cb85c;
  background-color: #fff;
}
.notification_widget.info {
  color: #fff;
  background-color: #5bc0de;
  border-color: #46b8da;
}
.notification_widget.info:focus,
.notification_widget.info.focus {
  color: #fff;
  background-color: #31b0d5;
  border-color: #1b6d85;
}
.notification_widget.info:hover {
  color: #fff;
  background-color: #31b0d5;
  border-color: #269abc;
}
.notification_widget.info:active,
.notification_widget.info.active,
.open > .dropdown-toggle.notification_widget.info {
  color: #fff;
  background-color: #31b0d5;
  border-color: #269abc;
}
.notification_widget.info:active:hover,
.notification_widget.info.active:hover,
.open > .dropdown-toggle.notification_widget.info:hover,
.notification_widget.info:active:focus,
.notification_widget.info.active:focus,
.open > .dropdown-toggle.notification_widget.info:focus,
.notification_widget.info:active.focus,
.notification_widget.info.active.focus,
.open > .dropdown-toggle.notification_widget.info.focus {
  color: #fff;
  background-color: #269abc;
  border-color: #1b6d85;
}
.notification_widget.info:active,
.notification_widget.info.active,
.open > .dropdown-toggle.notification_widget.info {
  background-image: none;
}
.notification_widget.info.disabled:hover,
.notification_widget.info[disabled]:hover,
fieldset[disabled] .notification_widget.info:hover,
.notification_widget.info.disabled:focus,
.notification_widget.info[disabled]:focus,
fieldset[disabled] .notification_widget.info:focus,
.notification_widget.info.disabled.focus,
.notification_widget.info[disabled].focus,
fieldset[disabled] .notification_widget.info.focus {
  background-color: #5bc0de;
  border-color: #46b8da;
}
.notification_widget.info .badge {
  color: #5bc0de;
  background-color: #fff;
}
.notification_widget.danger {
  color: #fff;
  background-color: #d9534f;
  border-color: #d43f3a;
}
.notification_widget.danger:focus,
.notification_widget.danger.focus {
  color: #fff;
  background-color: #c9302c;
  border-color: #761c19;
}
.notification_widget.danger:hover {
  color: #fff;
  background-color: #c9302c;
  border-color: #ac2925;
}
.notification_widget.danger:active,
.notification_widget.danger.active,
.open > .dropdown-toggle.notification_widget.danger {
  color: #fff;
  background-color: #c9302c;
  border-color: #ac2925;
}
.notification_widget.danger:active:hover,
.notification_widget.danger.active:hover,
.open > .dropdown-toggle.notification_widget.danger:hover,
.notification_widget.danger:active:focus,
.notification_widget.danger.active:focus,
.open > .dropdown-toggle.notification_widget.danger:focus,
.notification_widget.danger:active.focus,
.notification_widget.danger.active.focus,
.open > .dropdown-toggle.notification_widget.danger.focus {
  color: #fff;
  background-color: #ac2925;
  border-color: #761c19;
}
.notification_widget.danger:active,
.notification_widget.danger.active,
.open > .dropdown-toggle.notification_widget.danger {
  background-image: none;
}
.notification_widget.danger.disabled:hover,
.notification_widget.danger[disabled]:hover,
fieldset[disabled] .notification_widget.danger:hover,
.notification_widget.danger.disabled:focus,
.notification_widget.danger[disabled]:focus,
fieldset[disabled] .notification_widget.danger:focus,
.notification_widget.danger.disabled.focus,
.notification_widget.danger[disabled].focus,
fieldset[disabled] .notification_widget.danger.focus {
  background-color: #d9534f;
  border-color: #d43f3a;
}
.notification_widget.danger .badge {
  color: #d9534f;
  background-color: #fff;
}
div#pager {
  background-color: #fff;
  font-size: 14px;
  line-height: 20px;
  overflow: hidden;
  display: none;
  position: fixed;
  bottom: 0px;
  width: 100%;
  max-height: 50%;
  padding-top: 8px;
  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
  /* Display over codemirror */
  z-index: 100;
  /* Hack which prevents jquery ui resizable from changing top. */
  top: auto !important;
}
div#pager pre {
  line-height: 1.21429em;
  color: #000;
  background-color: #f7f7f7;
  padding: 0.4em;
}
div#pager #pager-button-area {
  position: absolute;
  top: 8px;
  right: 20px;
}
div#pager #pager-contents {
  position: relative;
  overflow: auto;
  width: 100%;
  height: 100%;
}
div#pager #pager-contents #pager-container {
  position: relative;
  padding: 15px 0px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
div#pager .ui-resizable-handle {
  top: 0px;
  height: 8px;
  background: #f7f7f7;
  border-top: 1px solid #cfcfcf;
  border-bottom: 1px solid #cfcfcf;
  /* This injects handle bars (a short, wide = symbol) for 
        the resize handle. */
}
div#pager .ui-resizable-handle::after {
  content: '';
  top: 2px;
  left: 50%;
  height: 3px;
  width: 30px;
  margin-left: -15px;
  position: absolute;
  border-top: 1px solid #cfcfcf;
}
.quickhelp {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
  line-height: 1.8em;
}
.shortcut_key {
  display: inline-block;
  width: 21ex;
  text-align: right;
  font-family: monospace;
}
.shortcut_descr {
  display: inline-block;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
span.save_widget {
  height: 30px;
  margin-top: 4px;
  display: flex;
  justify-content: flex-start;
  align-items: baseline;
  width: 50%;
  flex: 1;
}
span.save_widget span.filename {
  height: 100%;
  line-height: 1em;
  margin-left: 16px;
  border: none;
  font-size: 146.5%;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  border-radius: 2px;
}
span.save_widget span.filename:hover {
  background-color: #e6e6e6;
}
[dir="rtl"] span.save_widget.pull-left {
  float: right !important;
  float: right;
}
[dir="rtl"] span.save_widget span.filename {
  margin-left: 0;
  margin-right: 16px;
}
span.checkpoint_status,
span.autosave_status {
  font-size: small;
  white-space: nowrap;
  padding: 0 5px;
}
@media (max-width: 767px) {
  span.save_widget {
    font-size: small;
    padding: 0 0 0 5px;
  }
  span.checkpoint_status,
  span.autosave_status {
    display: none;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  span.checkpoint_status {
    display: none;
  }
  span.autosave_status {
    font-size: x-small;
  }
}
.toolbar {
  padding: 0px;
  margin-left: -5px;
  margin-top: 2px;
  margin-bottom: 5px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
.toolbar select,
.toolbar label {
  width: auto;
  vertical-align: middle;
  margin-right: 2px;
  margin-bottom: 0px;
  display: inline;
  font-size: 92%;
  margin-left: 0.3em;
  margin-right: 0.3em;
  padding: 0px;
  padding-top: 3px;
}
.toolbar .btn {
  padding: 2px 8px;
}
.toolbar .btn-group {
  margin-top: 0px;
  margin-left: 5px;
}
.toolbar-btn-label {
  margin-left: 6px;
}
#maintoolbar {
  margin-bottom: -3px;
  margin-top: -8px;
  border: 0px;
  min-height: 27px;
  margin-left: 0px;
  padding-top: 11px;
  padding-bottom: 3px;
}
#maintoolbar .navbar-text {
  float: none;
  vertical-align: middle;
  text-align: right;
  margin-left: 5px;
  margin-right: 0px;
  margin-top: 0px;
}
.select-xs {
  height: 24px;
}
[dir="rtl"] .btn-group > .btn,
.btn-group-vertical > .btn {
  float: right;
}
.pulse,
.dropdown-menu > li > a.pulse,
li.pulse > a.dropdown-toggle,
li.pulse.open > a.dropdown-toggle {
  background-color: #F37626;
  color: white;
}
/**
 * Primary styles
 *
 * Author: Jupyter Development Team
 */
/** WARNING IF YOU ARE EDITTING THIS FILE, if this is a .css file, It has a lot
 * of chance of beeing generated from the ../less/[samename].less file, you can
 * try to get back the less file by reverting somme commit in history
 **/
/*
 * We'll try to get something pretty, so we
 * have some strange css to have the scroll bar on
 * the left with fix button on the top right of the tooltip
 */
@-moz-keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}
@-webkit-keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}
@-moz-keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
@-webkit-keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/*properties of tooltip after "expand"*/
.bigtooltip {
  overflow: auto;
  height: 200px;
  -webkit-transition-property: height;
  -webkit-transition-duration: 500ms;
  -moz-transition-property: height;
  -moz-transition-duration: 500ms;
  transition-property: height;
  transition-duration: 500ms;
}
/*properties of tooltip before "expand"*/
.smalltooltip {
  -webkit-transition-property: height;
  -webkit-transition-duration: 500ms;
  -moz-transition-property: height;
  -moz-transition-duration: 500ms;
  transition-property: height;
  transition-duration: 500ms;
  text-overflow: ellipsis;
  overflow: hidden;
  height: 80px;
}
.tooltipbuttons {
  position: absolute;
  padding-right: 15px;
  top: 0px;
  right: 0px;
}
.tooltiptext {
  /*avoid the button to overlap on some docstring*/
  padding-right: 30px;
}
.ipython_tooltip {
  max-width: 700px;
  /*fade-in animation when inserted*/
  -webkit-animation: fadeOut 400ms;
  -moz-animation: fadeOut 400ms;
  animation: fadeOut 400ms;
  -webkit-animation: fadeIn 400ms;
  -moz-animation: fadeIn 400ms;
  animation: fadeIn 400ms;
  vertical-align: middle;
  background-color: #f7f7f7;
  overflow: visible;
  border: #ababab 1px solid;
  outline: none;
  padding: 3px;
  margin: 0px;
  padding-left: 7px;
  font-family: monospace;
  min-height: 50px;
  -moz-box-shadow: 0px 6px 10px -1px #adadad;
  -webkit-box-shadow: 0px 6px 10px -1px #adadad;
  box-shadow: 0px 6px 10px -1px #adadad;
  border-radius: 2px;
  position: absolute;
  z-index: 1000;
}
.ipython_tooltip a {
  float: right;
}
.ipython_tooltip .tooltiptext pre {
  border: 0;
  border-radius: 0;
  font-size: 100%;
  background-color: #f7f7f7;
}
.pretooltiparrow {
  left: 0px;
  margin: 0px;
  top: -16px;
  width: 40px;
  height: 16px;
  overflow: hidden;
  position: absolute;
}
.pretooltiparrow:before {
  background-color: #f7f7f7;
  border: 1px #ababab solid;
  z-index: 11;
  content: "";
  position: absolute;
  left: 15px;
  top: 10px;
  width: 25px;
  height: 25px;
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  -o-transform: rotate(45deg);
}
ul.typeahead-list i {
  margin-left: -10px;
  width: 18px;
}
[dir="rtl"] ul.typeahead-list i {
  margin-left: 0;
  margin-right: -10px;
}
ul.typeahead-list {
  max-height: 80vh;
  overflow: auto;
}
ul.typeahead-list > li > a {
  /** Firefox bug **/
  /* see https://github.com/jupyter/notebook/issues/559 */
  white-space: normal;
}
ul.typeahead-list  > li > a.pull-right {
  float: left !important;
  float: left;
}
[dir="rtl"] .typeahead-list {
  text-align: right;
}
.cmd-palette .modal-body {
  padding: 7px;
}
.cmd-palette form {
  background: white;
}
.cmd-palette input {
  outline: none;
}
.no-shortcut {
  min-width: 20px;
  color: transparent;
}
[dir="rtl"] .no-shortcut.pull-right {
  float: left !important;
  float: left;
}
[dir="rtl"] .command-shortcut.pull-right {
  float: left !important;
  float: left;
}
.command-shortcut:before {
  content: "(command mode)";
  padding-right: 3px;
  color: #777777;
}
.edit-shortcut:before {
  content: "(edit)";
  padding-right: 3px;
  color: #777777;
}
[dir="rtl"] .edit-shortcut.pull-right {
  float: left !important;
  float: left;
}
#find-and-replace #replace-preview .match,
#find-and-replace #replace-preview .insert {
  background-color: #BBDEFB;
  border-color: #90CAF9;
  border-style: solid;
  border-width: 1px;
  border-radius: 0px;
}
[dir="ltr"] #find-and-replace .input-group-btn + .form-control {
  border-left: none;
}
[dir="rtl"] #find-and-replace .input-group-btn + .form-control {
  border-right: none;
}
#find-and-replace #replace-preview .replace .match {
  background-color: #FFCDD2;
  border-color: #EF9A9A;
  border-radius: 0px;
}
#find-and-replace #replace-preview .replace .insert {
  background-color: #C8E6C9;
  border-color: #A5D6A7;
  border-radius: 0px;
}
#find-and-replace #replace-preview {
  max-height: 60vh;
  overflow: auto;
}
#find-and-replace #replace-preview pre {
  padding: 5px 10px;
}
.terminal-app {
  background: #EEE;
}
.terminal-app #header {
  background: #fff;
  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.2);
}
.terminal-app .terminal {
  width: 100%;
  float: left;
  font-family: monospace;
  color: white;
  background: black;
  padding: 0.4em;
  border-radius: 2px;
  -webkit-box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.4);
  box-shadow: 0px 0px 12px 1px rgba(87, 87, 87, 0.4);
}
.terminal-app .terminal,
.terminal-app .terminal dummy-screen {
  line-height: 1em;
  font-size: 14px;
}
.terminal-app .terminal .xterm-rows {
  padding: 10px;
}
.terminal-app .terminal-cursor {
  color: black;
  background: white;
}
.terminal-app #terminado-container {
  margin-top: 20px;
}
/*# sourceMappingURL=style.min.css.map */
    </style>
<style type="text/css">
    .highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
    </style>


<style type="text/css">
/* Overrides of notebook CSS for static HTML export */
body {
  overflow: visible;
  padding: 8px;
}

div#notebook {
  overflow: visible;
  border-top: none;
}@media print {
  div.cell {
    display: block;
    page-break-inside: avoid;
  } 
  div.output_wrapper { 
    display: block;
    page-break-inside: avoid; 
  }
  div.output { 
    display: block;
    page-break-inside: avoid; 
  }
}
</style>

<!-- Custom stylesheet, it must be in the same directory as the html file -->
<link rel="stylesheet" href="custom.css">

<!-- Loading mathjax macro -->
<!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --></head>
<body>
  <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src='images/netflix-q.jpg'></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1>1. Business Problem </h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 1.1 Problem Description </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>
Netflix is all about connecting people to the movies they love. To help customers find those movies, they developed world-class movie recommendation system: CinematchSM. Its job is to predict whether someone will enjoy a movie based on how much they liked or disliked other movies. Netflix use those predictions to make personal movie recommendations based on each customer’s unique tastes. And while <b>Cinematch</b> is doing pretty well, it can always be made better.
</p>
<p>Now there are a lot of interesting alternative approaches to how Cinematch works that netflix haven’t tried. Some are described in the literature, some aren’t. We’re curious whether any of these can beat Cinematch by making better predictions. Because, frankly, if there is a much better approach it could make a big difference to our customers and our business.</p>
<p> Credits: https://www.netflixprize.com/rules.html </p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 1.2 Problem Statement </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>
Netflix provided a lot of anonymous rating data, and a prediction accuracy bar that is 10% better than what Cinematch can do on the same training data set. (Accuracy is a measurement of how closely predicted ratings of movies match subsequent actual ratings.) 
</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 1.3 Sources </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li> https://www.netflixprize.com/rules.html</li>
<li> https://www.kaggle.com/netflix-inc/netflix-prize-data</li>
<li> Netflix blog: https://medium.com/netflix-techblog/netflix-recommendations-beyond-the-5-stars-part-1-55838468f429 (very nice blog)</li>
<li>surprise library: http://surpriselib.com/ (we use many models from this library)</li>
<li>surprise library doc: http://surprise.readthedocs.io/en/stable/getting_started.html (we use many models from this library)</li>
<li>installing surprise: https://github.com/NicolasHug/Surprise#installation </li>
<li> Research paper: http://courses.ischool.berkeley.edu/i290-dm/s11/SECURE/a1-koren.pdf (most of our work was inspired by this paper)</li>
<li> SVD Decomposition : https://www.youtube.com/watch?v=P5mlg91as1c </li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>1.4 Real world/Business Objectives and constraints  </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Objectives:</p>
<ol>
<li>Predict the rating that a user would give to a movie that he ahs not yet rated.</li>
<li>Minimize the difference between predicted and actual rating (RMSE and MAPE)
<br></li>
</ol>
<p>Constraints:</p>
<ol>
<li>Some form of interpretability.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1> 2. Machine Learning Problem </h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>2.1 Data </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 2.1.1 Data Overview </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><p> Get the data from : https://www.kaggle.com/netflix-inc/netflix-prize-data/data </p></p>
<p><p> Data files :</p>
<p><ul></p>
<p><li> combined_data_1.txt </li></p>
<p><li> combined_data_2.txt </li></p>
<p><li> combined_data_3.txt </li></p>
<p><li> combined_data_4.txt </li></p>
<p><li> movie_titles.csv </li>
&lt;/ul&gt;</p>
<pre>  
The first line of each file [combined_data_1.txt, combined_data_2.txt, combined_data_3.txt, combined_data_4.txt] contains the movie id followed by a colon. Each subsequent line in the file corresponds to a rating from a customer and its date in the following format:

CustomerID,Rating,Date

MovieIDs range from 1 to 17770 sequentially.
CustomerIDs range from 1 to 2649429, with gaps. There are 480189 users.
Ratings are on a five star (integral) scale from 1 to 5.
Dates have the format YYYY-MM-DD.
</pre>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 2.1.2 Example Data point </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<pre>
1:
1488844,3,2005-09-06
822109,5,2005-05-13
885013,4,2005-10-19
30878,4,2005-12-26
823519,3,2004-05-03
893988,3,2005-11-17
124105,4,2004-08-05
1248029,3,2004-04-22
1842128,4,2004-05-09
2238063,3,2005-05-11
1503895,4,2005-05-19
2207774,5,2005-06-06
2590061,3,2004-08-12
2442,3,2004-04-14
543865,4,2004-05-28
1209119,4,2004-03-23
804919,4,2004-06-10
1086807,3,2004-12-28
1711859,4,2005-05-08
372233,5,2005-11-23
1080361,3,2005-03-28
1245640,3,2005-12-19
558634,4,2004-12-14
2165002,4,2004-04-06
1181550,3,2004-02-01
1227322,4,2004-02-06
427928,4,2004-02-26
814701,5,2005-09-29
808731,4,2005-10-31
662870,5,2005-08-24
337541,5,2005-03-23
786312,3,2004-11-16
1133214,4,2004-03-07
1537427,4,2004-03-29
1209954,5,2005-05-09
2381599,3,2005-09-12
525356,2,2004-07-11
1910569,4,2004-04-12
2263586,4,2004-08-20
2421815,2,2004-02-26
1009622,1,2005-01-19
1481961,2,2005-05-24
401047,4,2005-06-03
2179073,3,2004-08-29
1434636,3,2004-05-01
93986,5,2005-10-06
1308744,5,2005-10-29
2647871,4,2005-12-30
1905581,5,2005-08-16
2508819,3,2004-05-18
1578279,1,2005-05-19
1159695,4,2005-02-15
2588432,3,2005-03-31
2423091,3,2005-09-12
470232,4,2004-04-08
2148699,2,2004-06-05
1342007,3,2004-07-16
466135,4,2004-07-13
2472440,3,2005-08-13
1283744,3,2004-04-17
1927580,4,2004-11-08
716874,5,2005-05-06
4326,4,2005-10-29
</pre>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>2.2 Mapping the real world problem to a Machine Learning Problem </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 2.2.1 Type of Machine Learning Problem </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<pre>
For a given movie and user we need to predict the rating would be given by him/her to the movie. 
The given problem is a Recommendation problem 
It can also seen as a Regression problem 
</pre>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 2.2.2 Performance metric </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li> Mean Absolute Percentage Error: https://en.wikipedia.org/wiki/Mean_absolute_percentage_error </li>
<li> Root Mean Square Error: https://en.wikipedia.org/wiki/Root-mean-square_deviation </li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 2.2.3 Machine Learning Objective and Constraints </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Minimize RMSE.</li>
<li>Try to provide some interpretability.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># this is just to know how much time will it take to run this entire ipython notebook </span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span>
<span class="c1"># globalstart = datetime.now()</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;nbagg&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;figure.max_open_warning&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>

<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;whitegrid&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="k">import</span> <span class="n">sparse</span>
<span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="k">import</span> <span class="n">csr_matrix</span>

<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="k">import</span> <span class="n">TruncatedSVD</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics.pairwise</span> <span class="k">import</span> <span class="n">cosine_similarity</span>
<span class="kn">import</span> <span class="nn">random</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1> 3. Exploratory Data Analysis </h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 3.1 Preprocessing</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>3.1.1 Converting / Merging whole data to required format: u_i, m_j, r_ij</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\data.csv&#39;</span><span class="p">):</span>
    <span class="c1"># Create a file &#39;data.csv&#39; before reading it</span>
    <span class="c1"># Read all the files in netflix and store them in one big file(&#39;data.csv&#39;)</span>
    <span class="c1"># We re reading from each of the four files and appendig each rating to a global file &#39;train.csv&#39;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data.csv&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
    
    <span class="n">row</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">files</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\combined_data_1.txt&#39;</span><span class="p">,</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\combined_data_2.txt&#39;</span><span class="p">,</span> 
           <span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\combined_data_3.txt&#39;</span><span class="p">,</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\combined_data_4.txt&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Reading ratings from </span><span class="si">{}</span><span class="s2">...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span> 
                <span class="k">del</span> <span class="n">row</span><span class="p">[:]</span> <span class="c1"># you don&#39;t have to do this.</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">):</span>
                    <span class="c1"># All below are ratings for this movie, until another movie appears.</span>
                    <span class="n">movie_id</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
                    <span class="n">row</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">movie_id</span><span class="p">)</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">row</span><span class="p">))</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Time taken :&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Reading ratings from D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\combined_data_1.txt...
Done.

Reading ratings from D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\combined_data_2.txt...
Done.

Reading ratings from D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\combined_data_3.txt...
Done.

Reading ratings from D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\combined_data_4.txt...
Done.

Time taken : 0:05:01.001198
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;creating the dataframe from data.csv file..&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> 
                       <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;rating&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">date</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># we are arranging the ratings according to time.</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sorting the dataframe by date..&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done..&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>creating the dataframe from data.csv file..
Done.

Sorting the dataframe by date..
Done..
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>movie</th>
      <th>user</th>
      <th>rating</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>56431994</th>
      <td>10341</td>
      <td>510180</td>
      <td>4</td>
      <td>1999-11-11</td>
    </tr>
    <tr>
      <th>9056171</th>
      <td>1798</td>
      <td>510180</td>
      <td>5</td>
      <td>1999-11-11</td>
    </tr>
    <tr>
      <th>58698779</th>
      <td>10774</td>
      <td>510180</td>
      <td>3</td>
      <td>1999-11-11</td>
    </tr>
    <tr>
      <th>48101611</th>
      <td>8651</td>
      <td>510180</td>
      <td>2</td>
      <td>1999-11-11</td>
    </tr>
    <tr>
      <th>81893208</th>
      <td>14660</td>
      <td>510180</td>
      <td>2</td>
      <td>1999-11-11</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>count    1.004805e+08
mean     3.604290e+00
std      1.085219e+00
min      1.000000e+00
25%      3.000000e+00
50%      4.000000e+00
75%      4.000000e+00
max      5.000000e+00
Name: rating, dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>3.1.2 Checking for NaN values </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># just to make sure that all Nan containing rows are deleted..</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No of Nan values in our dataframe : &quot;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>No of Nan values in our dataframe :  0
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>3.1.3 Removing Duplicates </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dup_bool</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">duplicated</span><span class="p">([</span><span class="s1">&#39;movie&#39;</span><span class="p">,</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;rating&#39;</span><span class="p">])</span>
<span class="n">dups</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">dup_bool</span><span class="p">)</span> <span class="c1"># by considering all columns..( including timestamp)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are </span><span class="si">{}</span><span class="s2"> duplicate rating entries in the data..&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dups</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>There are 0 duplicate rating entries in the data..
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>3.1.4 Basic Statistics (#Ratings, #Users, and #Movies)</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total data &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">50</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Total no of ratings :&quot;</span><span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total No of Users   :&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">user</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total No of movies  :&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">movie</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Total data 
--------------------------------------------------

Total no of ratings : 100480507
Total No of Users   : 480189
Total No of movies  : 17770
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>3.2 Spliting data into Train and Test(80:20) </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;train.csv&#39;</span><span class="p">):</span>
    <span class="c1"># create the dataframe and store it in the disk for offline purposes..</span>
    <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mf">0.80</span><span class="p">)]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;train.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">):</span>
    <span class="c1"># create the dataframe and store it in the disk for offline purposes..</span>
    <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mf">0.80</span><span class="p">):]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">train_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;train.csv&quot;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
<span class="n">test_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>3.2.1 Basic Statistics in Train data (#Ratings, #Users, and #Movies)</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># movies = train_df.movie.value_counts()</span>
<span class="c1"># users = train_df.user.value_counts()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Training data &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">50</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Total no of ratings :&quot;</span><span class="p">,</span><span class="n">train_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total No of Users   :&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">train_df</span><span class="o">.</span><span class="n">user</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total No of movies  :&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">train_df</span><span class="o">.</span><span class="n">movie</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training data 
--------------------------------------------------

Total no of ratings : 80384405
Total No of Users   : 405041
Total No of movies  : 17424
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>3.2.2 Basic Statistics in Test data (#Ratings, #Users, and #Movies)</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Test data &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">50</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Total no of ratings :&quot;</span><span class="p">,</span><span class="n">test_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total No of Users   :&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">test_df</span><span class="o">.</span><span class="n">user</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total No of movies  :&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">test_df</span><span class="o">.</span><span class="n">movie</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Test data 
--------------------------------------------------

Total no of ratings : 20096102
Total No of Users   : 349312
Total No of movies  : 17757
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 3.3 Exploratory Data Analysis on Train data </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># method to make y-axis more readable</span>
<span class="k">def</span> <span class="nf">human</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;M&#39;</span><span class="p">):</span>
    <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;k&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="o">/</span><span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; K&quot;</span>
    <span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;m&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="o">/</span><span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; M&quot;</span>
    <span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="o">/</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">)</span> <span class="o">+</span>  <span class="s2">&quot; B&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.3.1 Distribution of ratings </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of ratings over Training dataset&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">train_df</span><span class="o">.</span><span class="n">rating</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="n">human</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">()])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;No. of Ratings(Millions)&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





<div id="47755eec-3261-4a59-9623-24c3f2121ccd"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#47755eec-3261-4a59-9623-24c3f2121ccd');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div id='5b557d60-6811-4b40-a500-116fd0b8a372'></div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p style="font-size:13px"> <b>Add new column (week day) to the data set  for analysis.</b></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># It is used to skip the warning &#39;&#39;SettingWithCopyWarning&#39;&#39;.. </span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">chained_assignment</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># default=&#39;warn&#39;</span>

<span class="n">train_df</span><span class="p">[</span><span class="s1">&#39;day_of_week&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_df</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">weekday_name</span>

<span class="n">train_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>movie</th>
      <th>user</th>
      <th>rating</th>
      <th>date</th>
      <th>day_of_week</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>80384400</th>
      <td>12074</td>
      <td>2033618</td>
      <td>4</td>
      <td>2005-08-08</td>
      <td>Monday</td>
    </tr>
    <tr>
      <th>80384401</th>
      <td>862</td>
      <td>1797061</td>
      <td>3</td>
      <td>2005-08-08</td>
      <td>Monday</td>
    </tr>
    <tr>
      <th>80384402</th>
      <td>10986</td>
      <td>1498715</td>
      <td>5</td>
      <td>2005-08-08</td>
      <td>Monday</td>
    </tr>
    <tr>
      <th>80384403</th>
      <td>14861</td>
      <td>500016</td>
      <td>4</td>
      <td>2005-08-08</td>
      <td>Monday</td>
    </tr>
    <tr>
      <th>80384404</th>
      <td>5926</td>
      <td>1044015</td>
      <td>5</td>
      <td>2005-08-08</td>
      <td>Monday</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span> <span class="p">((</span><span class="n">train_df</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(80384405, 5)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.3.2 Number of Ratings per a month </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">train_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">)[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;No of ratings per month (Training data)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Month&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;No of ratings(per month)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="n">human</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">()])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





<div id="0b84795e-65c1-45b2-9a8a-70fd05f0b4e4"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#0b84795e-65c1-45b2-9a8a-70fd05f0b4e4');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div id='2da7dadc-8ffd-482b-8628-ec41c6a96d2e'></div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.3.3 Analysis on the Ratings given by user </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">no_of_rated_movies_per_user</span> <span class="o">=</span> <span class="n">train_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">)[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">no_of_rated_movies_per_user</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>user
305344     17112
2439493    15896
387418     15402
1639792     9767
1461435     9447
Name: rating, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figaspect</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>

<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">no_of_rated_movies_per_user</span><span class="p">,</span> <span class="n">shade</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;No of ratings by user&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;PDF&quot;</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">no_of_rated_movies_per_user</span><span class="p">,</span> <span class="n">shade</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cumulative</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;No of ratings by user&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;CDF&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





<div id="7407d4c2-57ae-4ffe-a306-19e0a38a554a"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#7407d4c2-57ae-4ffe-a306-19e0a38a554a');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div id='660123bd-f252-4393-a5ff-465701f0bdaf'></div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">no_of_rated_movies_per_user</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[19]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>count    405041.000000
mean        198.459921
std         290.793238
min           1.000000
25%          34.000000
50%          89.000000
75%         245.000000
max       17112.000000
Name: rating, dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><em>There,  is something interesting going on with the quantiles..</em></p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">quantiles</span> <span class="o">=</span> <span class="n">no_of_rated_movies_per_user</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.01</span><span class="p">,</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;higher&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Quantiles and their Values&quot;</span><span class="p">)</span>
<span class="n">quantiles</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="c1"># quantiles with 0.05 difference</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">quantiles</span><span class="o">.</span><span class="n">index</span><span class="p">[::</span><span class="mi">5</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">quantiles</span><span class="o">.</span><span class="n">values</span><span class="p">[::</span><span class="mi">5</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;quantiles with 0.05 intervals&quot;</span><span class="p">)</span>
<span class="c1"># quantiles with 0.25 difference</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">quantiles</span><span class="o">.</span><span class="n">index</span><span class="p">[::</span><span class="mi">25</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">quantiles</span><span class="o">.</span><span class="n">values</span><span class="p">[::</span><span class="mi">25</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;quantiles with 0.25 intervals&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;No of ratings by user&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Value at the quantile&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>

<span class="c1"># annotate the 25th, 50th, 75th and 100th percentile values....</span>
<span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">quantiles</span><span class="o">.</span><span class="n">index</span><span class="p">[::</span><span class="mi">25</span><span class="p">],</span> <span class="n">quantiles</span><span class="p">[::</span><span class="mi">25</span><span class="p">]):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="s2">&quot;(</span><span class="si">{}</span><span class="s2"> , </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">y</span><span class="o">+</span><span class="mi">500</span><span class="p">)</span>
                <span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





<div id="2f3c5d95-c283-4387-af49-ae9814064cc7"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#2f3c5d95-c283-4387-af49-ae9814064cc7');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div id='1fcb944a-38fc-4f05-92b5-a4c9fd63221f'></div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">quantiles</span><span class="p">[::</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0.00        1
0.05        7
0.10       15
0.15       21
0.20       27
0.25       34
0.30       41
0.35       50
0.40       60
0.45       73
0.50       89
0.55      109
0.60      133
0.65      163
0.70      199
0.75      245
0.80      307
0.85      392
0.90      520
0.95      749
1.00    17112
Name: rating, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>how many ratings at the last 5% of all ratings</strong>??</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> No of ratings at last 5 percentile : </span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">no_of_rated_movies_per_user</span><span class="o">&gt;=</span> <span class="mi">749</span><span class="p">))</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
 No of ratings at last 5 percentile : 20305

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.3.4 Analysis of ratings of a movie given by a user </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">no_of_ratings_per_movie</span> <span class="o">=</span> <span class="n">train_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;movie&#39;</span><span class="p">)[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figaspect</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">no_of_ratings_per_movie</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;# RATINGS per Movie&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Movie&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;No of Users who rated a movie&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





<div id="c113e43b-ee58-41ea-a8ef-b667e184aafa"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#c113e43b-ee58-41ea-a8ef-b667e184aafa');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div id='07d1a031-f47b-4171-9b58-2c080ccd7ef7'></div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><strong>It is very skewed.. just like nunmber of ratings given per user.</strong></li>
</ul>

<pre><code>- There are some movies (which are very popular) which are rated by huge number of users.

- But most of the movies(like 90%) got some hundereds of ratings.</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.3.5 Number of ratings on each day of the week</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;day_of_week&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">train_df</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;No of ratings on each day...&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Total no of ratings&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="n">human</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">()])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





<div id="190720ea-011d-4944-aa5f-c276fac6af5a"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#190720ea-011d-4944-aa5f-c276fac6af5a');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div id='620c6821-6eb9-4a18-8664-55465a38d46c'></div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figaspect</span><span class="p">(</span><span class="o">.</span><span class="mi">45</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;rating&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;day_of_week&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">train_df</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





<div id="e08eb235-b7b4-47c5-9c42-f0b920616f9d"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#e08eb235-b7b4-47c5-9c42-f0b920616f9d');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div id='29d22ce8-32ed-4ef6-9c53-f3cfad3f592d'></div>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0:00:12.865945
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">avg_week_df</span> <span class="o">=</span> <span class="n">train_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;day_of_week&#39;</span><span class="p">])[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; AVerage ratings&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">30</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">avg_week_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre> AVerage ratings
------------------------------
day_of_week
Friday       3.585274
Monday       3.577250
Saturday     3.591791
Sunday       3.594144
Thursday     3.582463
Tuesday      3.574438
Wednesday    3.583751
Name: rating, dtype: float64


</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.3.6 Creating sparse matrix from data frame </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<table>
<tr>
<td>
<img src='images/data_c.jpg' width='250px' align=left/>
</td>
<td>
<img src='images/arrow.jpg' width='60px' align=left/>
</td>
<td>
<img src='images/data_sparse_c.jpg' width='400px' align=left/>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.3.6.1 Creating sparse matrix from train data frame </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;train_sparse_matrix.npz&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It is present in your pwd, getting it from disk....&quot;</span><span class="p">)</span>
    <span class="c1"># just get it from the disk instead of computing it</span>
    <span class="n">train_sparse_matrix</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">load_npz</span><span class="p">(</span><span class="s1">&#39;train_sparse_matrix.npz&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DONE..&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;We are creating sparse_matrix from the dataframe..&quot;</span><span class="p">)</span>
    <span class="c1"># create sparse_matrix and store it for after usage.</span>
    <span class="c1"># csr_matrix(data_values, (row_index, col_index), shape_of_matrix)</span>
    <span class="c1"># It should be in such a way that, MATRIX[row, col] = data</span>
    <span class="n">train_sparse_matrix</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">csr_matrix</span><span class="p">((</span><span class="n">train_df</span><span class="o">.</span><span class="n">rating</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="p">(</span><span class="n">train_df</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
                                               <span class="n">train_df</span><span class="o">.</span><span class="n">movie</span><span class="o">.</span><span class="n">values</span><span class="p">)),)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done. It</span><span class="se">\&#39;</span><span class="s1">s shape is : (user, movie) : &#39;</span><span class="p">,</span><span class="n">train_sparse_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Saving it into disk for furthur usage..&#39;</span><span class="p">)</span>
    <span class="c1"># save it into disk</span>
    <span class="n">sparse</span><span class="o">.</span><span class="n">save_npz</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\train_sparse_matrix.npz&quot;</span><span class="p">,</span> <span class="n">train_sparse_matrix</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done..</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>We are creating sparse_matrix from the dataframe..
Done. It&#39;s shape is : (user, movie) :  (2649430, 17771)
Saving it into disk for furthur usage..
Done..

0:00:55.752680
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><b>The Sparsity of Train Sparse Matrix</b></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">us</span><span class="p">,</span><span class="n">mv</span> <span class="o">=</span> <span class="n">train_sparse_matrix</span><span class="o">.</span><span class="n">shape</span>
<span class="n">elem</span> <span class="o">=</span> <span class="n">train_sparse_matrix</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sparsity Of Train matrix : </span><span class="si">{}</span><span class="s2"> % &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>  <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="n">elem</span><span class="o">/</span><span class="p">(</span><span class="n">us</span><span class="o">*</span><span class="n">mv</span><span class="p">)))</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Sparsity Of Train matrix : 99.8292709259195 % 
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.3.6.2 Creating sparse matrix from test data frame </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;test_sparse_matrix.npz&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It is present in your pwd, getting it from disk....&quot;</span><span class="p">)</span>
    <span class="c1"># just get it from the disk instead of computing it</span>
    <span class="n">test_sparse_matrix</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">load_npz</span><span class="p">(</span><span class="s1">&#39;test_sparse_matrix.npz&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DONE..&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;We are creating sparse_matrix from the dataframe..&quot;</span><span class="p">)</span>
    <span class="c1"># create sparse_matrix and store it for after usage.</span>
    <span class="c1"># csr_matrix(data_values, (row_index, col_index), shape_of_matrix)</span>
    <span class="c1"># It should be in such a way that, MATRIX[row, col] = data</span>
    <span class="n">test_sparse_matrix</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">csr_matrix</span><span class="p">((</span><span class="n">test_df</span><span class="o">.</span><span class="n">rating</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="p">(</span><span class="n">test_df</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
                                               <span class="n">test_df</span><span class="o">.</span><span class="n">movie</span><span class="o">.</span><span class="n">values</span><span class="p">)))</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done. It</span><span class="se">\&#39;</span><span class="s1">s shape is : (user, movie) : &#39;</span><span class="p">,</span><span class="n">test_sparse_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Saving it into disk for furthur usage..&#39;</span><span class="p">)</span>
    <span class="c1"># save it into disk</span>
    <span class="n">sparse</span><span class="o">.</span><span class="n">save_npz</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\test_sparse_matrix.npz&quot;</span><span class="p">,</span> <span class="n">test_sparse_matrix</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done..</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>We are creating sparse_matrix from the dataframe..
Done. It&#39;s shape is : (user, movie) :  (2649430, 17771)
Saving it into disk for furthur usage..
Done..

0:00:17.025454
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><b>The Sparsity of Test data Matrix</b></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">us</span><span class="p">,</span><span class="n">mv</span> <span class="o">=</span> <span class="n">test_sparse_matrix</span><span class="o">.</span><span class="n">shape</span>
<span class="n">elem</span> <span class="o">=</span> <span class="n">test_sparse_matrix</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sparsity Of Test matrix : </span><span class="si">{}</span><span class="s2"> % &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>  <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="n">elem</span><span class="o">/</span><span class="p">(</span><span class="n">us</span><span class="o">*</span><span class="n">mv</span><span class="p">)))</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Sparsity Of Test matrix : 99.95731772988694 % 
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>3.3.7 Finding Global average of all movie ratings, Average rating per user, and Average rating per movie</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># get the user averages in dictionary (key: user_id/movie_id, value: avg rating)</span>

<span class="k">def</span> <span class="nf">get_average_ratings</span><span class="p">(</span><span class="n">sparse_matrix</span><span class="p">,</span> <span class="n">of_users</span><span class="p">):</span>
    
    <span class="c1"># average ratings of user/axes</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">of_users</span> <span class="k">else</span> <span class="mi">0</span> <span class="c1"># 1 - User axes,0 - Movie axes</span>

    <span class="c1"># &quot;.A1&quot; is for converting Column_Matrix to 1-D numpy array </span>
    <span class="n">sum_of_ratings</span> <span class="o">=</span> <span class="n">sparse_matrix</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span><span class="o">.</span><span class="n">A1</span>
    <span class="c1"># Boolean matrix of ratings ( whether a user rated that movie or not)</span>
    <span class="n">is_rated</span> <span class="o">=</span> <span class="n">sparse_matrix</span><span class="o">!=</span><span class="mi">0</span>
    <span class="c1"># no of ratings that each user OR movie..</span>
    <span class="n">no_of_ratings</span> <span class="o">=</span> <span class="n">is_rated</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span><span class="o">.</span><span class="n">A1</span>
    
    <span class="c1"># max_user  and max_movie ids in sparse matrix </span>
    <span class="n">u</span><span class="p">,</span><span class="n">m</span> <span class="o">=</span> <span class="n">sparse_matrix</span><span class="o">.</span><span class="n">shape</span>
    <span class="c1"># creae a dictonary of users and their average ratigns..</span>
    <span class="n">average_ratings</span> <span class="o">=</span> <span class="p">{</span> <span class="n">i</span> <span class="p">:</span> <span class="n">sum_of_ratings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">no_of_ratings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                                 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">u</span> <span class="k">if</span> <span class="n">of_users</span> <span class="k">else</span> <span class="n">m</span><span class="p">)</span> 
                                    <span class="k">if</span> <span class="n">no_of_ratings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span><span class="mi">0</span><span class="p">}</span>

    <span class="c1"># return that dictionary of average ratings</span>
    <span class="k">return</span> <span class="n">average_ratings</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.3.7.1 finding global average of all movie ratings </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_averages</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="c1"># get the global average of ratings in our train set.</span>
<span class="n">train_global_average</span> <span class="o">=</span> <span class="n">train_sparse_matrix</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">train_sparse_matrix</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">()</span>
<span class="n">train_averages</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_global_average</span>
<span class="n">train_averages</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[33]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>{&#39;global&#39;: 3.582890686321557}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.3.7.2 finding average rating per user</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_average_ratings</span><span class="p">(</span><span class="n">train_sparse_matrix</span><span class="p">,</span> <span class="n">of_users</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Average rating of user 10 :&#39;</span><span class="p">,</span><span class="n">train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="mi">10</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
Average rating of user 10 : 3.3781094527363185
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.3.7.3 finding average rating per movie</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">get_average_ratings</span><span class="p">(</span><span class="n">train_sparse_matrix</span><span class="p">,</span> <span class="n">of_users</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> AVerage rating of movie 15 :&#39;</span><span class="p">,</span><span class="n">train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">][</span><span class="mi">15</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
 AVerage rating of movie 15 : 3.3038461538461537
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.3.7.4 PDF's & CDF's of Avg.Ratings of Users & Movies (In Train Data)</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="c1"># draw pdfs for average rating per user and average</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figaspect</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Avg Ratings per User and per Movie&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Users-Avg-Ratings&#39;</span><span class="p">)</span>
<span class="c1"># get the list of average user ratings from the averages dictionary..</span>
<span class="n">user_averages</span> <span class="o">=</span> <span class="p">[</span><span class="n">rat</span> <span class="k">for</span> <span class="n">rat</span> <span class="ow">in</span> <span class="n">train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">user_averages</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">hist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
             <span class="n">kde_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">cumulative</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Cdf&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">user_averages</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">hist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pdf&#39;</span><span class="p">)</span>

<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Movies-Avg-Rating&#39;</span><span class="p">)</span>
<span class="c1"># get the list of movie_average_ratings from the dictionary..</span>
<span class="n">movie_averages</span> <span class="o">=</span> <span class="p">[</span><span class="n">rat</span> <span class="k">for</span> <span class="n">rat</span> <span class="ow">in</span> <span class="n">train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">movie_averages</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">hist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
             <span class="n">kde_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">cumulative</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Cdf&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">movie_averages</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">hist</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pdf&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





<div id="7a97bd23-f7f6-44fe-abae-e1be7ba92e08"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#7a97bd23-f7f6-44fe-abae-e1be7ba92e08');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div id='90fad13b-5dd4-46ec-981a-75a463895b30'></div>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0:00:55.473211
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.3.8 Cold Start problem </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.3.8.1 Cold Start problem with Users</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">total_users</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">user</span><span class="p">))</span>
<span class="n">users_train</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">])</span>
<span class="n">new_users</span> <span class="o">=</span> <span class="n">total_users</span> <span class="o">-</span> <span class="n">users_train</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Total number of Users  :&#39;</span><span class="p">,</span> <span class="n">total_users</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Number of Users in Train data :&#39;</span><span class="p">,</span> <span class="n">users_train</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">No of Users that didn&#39;t appear in train data: </span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2"> %) </span><span class="se">\n</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_users</span><span class="p">,</span>
                                                                        <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="n">new_users</span><span class="o">/</span><span class="n">total_users</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
Total number of Users  : 480189

Number of Users in Train data : 405041

No of Users that didn&#39;t appear in train data: 75148(15.65 %) 
 
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>We might have to handle <strong>new users</strong> ( <strong><em>75148</em></strong> ) who didn't appear in train data.</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.3.8.2 Cold Start problem with Movies</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">total_movies</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">movie</span><span class="p">))</span>
<span class="n">movies_train</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">])</span>
<span class="n">new_movies</span> <span class="o">=</span> <span class="n">total_movies</span> <span class="o">-</span> <span class="n">movies_train</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Total number of Movies  :&#39;</span><span class="p">,</span> <span class="n">total_movies</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Number of Users in Train data :&#39;</span><span class="p">,</span> <span class="n">movies_train</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">No of Movies that didn&#39;t appear in train data: </span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2"> %) </span><span class="se">\n</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_movies</span><span class="p">,</span>
                                                                        <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="n">new_movies</span><span class="o">/</span><span class="n">total_movies</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
Total number of Movies  : 17770

Number of Users in Train data : 17424

No of Movies that didn&#39;t appear in train data: 346(1.95 %) 
 
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>We might have to handle <strong>346 movies</strong> (small comparatively) in test data</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 3.4 Computing Similarity matrices </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.4.1 Computing User-User Similarity matrix </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><p>Calculating User User Similarity_Matrix is <strong>not very easy</strong>(<em>unless you have huge Computing Power and lots of time</em>) because of number of. usersbeing lare.</p>
<ul>
<li>You can try if you want to. Your system could crash or the program stops with <strong>Memory Error</strong></li>
</ul>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.4.1.1 Trying with all dimensions (17k dimensions per user) </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics.pairwise</span> <span class="k">import</span> <span class="n">cosine_similarity</span>


<span class="k">def</span> <span class="nf">compute_user_similarity</span><span class="p">(</span><span class="n">sparse_matrix</span><span class="p">,</span> <span class="n">compute_for_few</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verb_for_n_rows</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
                            <span class="n">draw_time_taken</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">no_of_users</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sparse_matrix</span><span class="o">.</span><span class="n">shape</span>
    <span class="c1"># get the indices of  non zero rows(users) from our sparse matrix</span>
    <span class="n">row_ind</span><span class="p">,</span> <span class="n">col_ind</span> <span class="o">=</span> <span class="n">sparse_matrix</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()</span>
    <span class="n">row_ind</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">row_ind</span><span class="p">))</span> <span class="c1"># we don&#39;t have to</span>
    <span class="n">time_taken</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span> <span class="c1">#  time taken for finding similar users for an user..</span>
    
    <span class="c1"># we create rows, cols, and data lists.., which can be used to create sparse matrices</span>
    <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span> <span class="nb">list</span><span class="p">(),</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Computing top&quot;</span><span class="p">,</span><span class="n">top</span><span class="p">,</span><span class="s2">&quot;similarities for each user..&quot;</span><span class="p">)</span>
    
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">row_ind</span><span class="p">[:</span><span class="n">top</span><span class="p">]</span> <span class="k">if</span> <span class="n">compute_for_few</span> <span class="k">else</span> <span class="n">row_ind</span><span class="p">:</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">temp</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        
        <span class="c1"># get the similarity row for this user with all other users</span>
        <span class="n">sim</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">sparse_matrix</span><span class="o">.</span><span class="n">getrow</span><span class="p">(</span><span class="n">row</span><span class="p">),</span> <span class="n">sparse_matrix</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="c1"># We will get only the top &#39;&#39;top&#39;&#39; most similar users and ignore rest of them..</span>
        <span class="n">top_sim_ind</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[</span><span class="o">-</span><span class="n">top</span><span class="p">:]</span>
        <span class="n">top_sim_val</span> <span class="o">=</span> <span class="n">sim</span><span class="p">[</span><span class="n">top_sim_ind</span><span class="p">]</span>
        
        <span class="c1"># add them to our rows, cols and data</span>
        <span class="n">rows</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">row</span><span class="p">]</span><span class="o">*</span><span class="n">top</span><span class="p">)</span>
        <span class="n">cols</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">top_sim_ind</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">top_sim_val</span><span class="p">)</span>
        <span class="n">time_taken</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">-</span> <span class="n">prev</span><span class="o">.</span><span class="n">timestamp</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">temp</span><span class="o">%</span><span class="k">verb_for_n_rows</span> == 0:
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;computing done for </span><span class="si">{}</span><span class="s2"> users [  time elapsed : </span><span class="si">{}</span><span class="s2">  ]&quot;</span>
                      <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="p">))</span>
            
        
    <span class="c1"># lets create sparse matrix out of these and return it</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Creating Sparse matrix from the computed similarities&#39;</span><span class="p">)</span>
    <span class="c1">#return rows, cols, data</span>
    
    <span class="k">if</span> <span class="n">draw_time_taken</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_taken</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;time taken for each user&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">time_taken</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Total time&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Time (seconds)&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        
    <span class="k">return</span> <span class="n">sparse</span><span class="o">.</span><span class="n">csr_matrix</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">no_of_users</span><span class="p">,</span> <span class="n">no_of_users</span><span class="p">)),</span> <span class="n">time_taken</span>      
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">u_u_sim_sparse</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">compute_user_similarity</span><span class="p">(</span><span class="n">train_sparse_matrix</span><span class="p">,</span> <span class="n">compute_for_few</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
                                                     <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time taken :&quot;</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Computing top 100 similarities for each user..
computing done for 20 users [  time elapsed : 0:01:18.700546  ]
computing done for 40 users [  time elapsed : 0:02:35.761445  ]
computing done for 60 users [  time elapsed : 0:03:50.163763  ]
computing done for 80 users [  time elapsed : 0:05:04.885875  ]
computing done for 100 users [  time elapsed : 0:06:20.860734  ]
Creating Sparse matrix from the computed similarities
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>





<div id="e29651e3-6cb1-4514-a43b-56e094f1e0c4"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#e29651e3-6cb1-4514-a43b-56e094f1e0c4');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<div id='2ba466db-fcf8-485a-b7ff-0a13d7a25390'></div>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>----------------------------------------------------------------------------------------------------
Time taken : 0:06:32.699158
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span> <span class="p">((</span><span class="n">u_u_sim_sparse</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span> <span class="n">_</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(2649430, 2649430)
100
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 3.4.1.2 Trying with reduced dimensions (Using TruncatedSVD for dimensionality reduction of user vector)</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>We have  <strong>405,041 users</strong> in out training set and computing similarities between them..( <strong>17K dimensional vector..</strong>) is time consuming..</li>
</ul>
<ul>
<li>From above plot, It took roughly <strong>8.88 sec</strong> for computing simlilar users for <strong>one user</strong></li>
</ul>
<ul>
<li>We have <strong>405,041 users</strong> with us in training set.</li>
</ul>
<ul>
<li><p>${ 405041 \times 8.88 = 3596764.08  \sec } =  59946.068 \min = 999.101133333 \text{ hours}
= 41.629213889 \text{ days}...$</p>
<ul>
<li>Even if we run on 4 cores parallelly (a typical system now a days), It will still take almost <strong>10 and 1/2</strong> days.</li>
</ul>
<p>IDEA:  Instead, we will try to reduce the dimentsions using SVD, so that <strong>it might</strong> speed up the process...</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;from datetime import datetime</span>
<span class="sd">from sklearn.decomposition import TruncatedSVD</span>

<span class="sd">start = datetime.now()</span>

<span class="sd"># initilaize the algorithm with some parameters..</span>
<span class="sd"># All of them are default except n_components. n_itr is for Randomized SVD solver.</span>
<span class="sd">netflix_svd = TruncatedSVD(n_components=500, algorithm=&#39;randomized&#39;, random_state=15)</span>
<span class="sd">trunc_svd = netflix_svd.fit_transform(train_sparse_matrix)</span>

<span class="sd">print(datetime.now()-start)&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[42]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#34;from datetime import datetime\nfrom sklearn.decomposition import TruncatedSVD\n\nstart = datetime.now()\n\n# initilaize the algorithm with some parameters..\n# All of them are default except n_components. n_itr is for Randomized SVD solver.\nnetflix_svd = TruncatedSVD(n_components=500, algorithm=&#39;randomized&#39;, random_state=15)\ntrunc_svd = netflix_svd.fit_transform(train_sparse_matrix)\n\nprint(datetime.now()-start)&#34;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here,</p>
<ul>
<li>$\sum \longleftarrow$ (netflix_svd.<strong>singular_values_</strong> )</li>
</ul>
<ul>
<li>$\bigvee^T \longleftarrow$ (netflix_svd.<strong>components_</strong>)</li>
</ul>
<ul>
<li>$\bigcup$ is not returned. instead <strong>Projection_of_X</strong> onto the new vectorspace is returned. </li>
</ul>
<ul>
<li>It uses <strong>randomized svd</strong> internally, which returns <strong>All 3 of them saperately</strong>. Use that instead.. </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#expl_var = np.cumsum(netflix_svd.explained_variance_ratio_)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">&quot;&quot;&quot;fig, (ax1, ax2) = plt.subplots(nrows=1, ncols=2, figsize=plt.figaspect(.5))</span>

<span class="sd">ax1.set_ylabel(&quot;Variance Explained&quot;, fontsize=15)</span>
<span class="sd">ax1.set_xlabel(&quot;# Latent Facors&quot;, fontsize=15)</span>
<span class="sd">ax1.plot(expl_var)</span>
<span class="sd"># annote some (latentfactors, expl_var) to make it clear</span>
<span class="sd">ind = [1, 2,4,8,20, 60, 100, 200, 300, 400, 500]</span>
<span class="sd">ax1.scatter(x = [i-1 for i in ind], y = expl_var[[i-1 for i in ind]], c=&#39;#ff3300&#39;)</span>
<span class="sd">for i in ind:</span>
<span class="sd">    ax1.annotate(s =&quot;({}, {})&quot;.format(i,  np.round(expl_var[i-1], 2)), xy=(i-1, expl_var[i-1]),</span>
<span class="sd">                xytext = ( i+20, expl_var[i-1] - 0.01), fontweight=&#39;bold&#39;)</span>

<span class="sd">change_in_expl_var = [expl_var[i+1] - expl_var[i] for i in range(len(expl_var)-1)]</span>
<span class="sd">ax2.plot(change_in_expl_var)</span>



<span class="sd">ax2.set_ylabel(&quot;Gain in Var_Expl with One Additional LF&quot;, fontsize=10)</span>
<span class="sd">ax2.yaxis.set_label_position(&quot;right&quot;)</span>
<span class="sd">ax2.set_xlabel(&quot;# Latent Facors&quot;, fontsize=20)</span>

<span class="sd">plt.show()</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[44]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&#39;fig, (ax1, ax2) = plt.subplots(nrows=1, ncols=2, figsize=plt.figaspect(.5))\n\nax1.set_ylabel(&#34;Variance Explained&#34;, fontsize=15)\nax1.set_xlabel(&#34;# Latent Facors&#34;, fontsize=15)\nax1.plot(expl_var)\n# annote some (latentfactors, expl_var) to make it clear\nind = [1, 2,4,8,20, 60, 100, 200, 300, 400, 500]\nax1.scatter(x = [i-1 for i in ind], y = expl_var[[i-1 for i in ind]], c=\&#39;#ff3300\&#39;)\nfor i in ind:\n    ax1.annotate(s =&#34;({}, {})&#34;.format(i,  np.round(expl_var[i-1], 2)), xy=(i-1, expl_var[i-1]),\n                xytext = ( i+20, expl_var[i-1] - 0.01), fontweight=\&#39;bold\&#39;)\n\nchange_in_expl_var = [expl_var[i+1] - expl_var[i] for i in range(len(expl_var)-1)]\nax2.plot(change_in_expl_var)\n\n\n\nax2.set_ylabel(&#34;Gain in Var_Expl with One Additional LF&#34;, fontsize=10)\nax2.yaxis.set_label_position(&#34;right&#34;)\nax2.set_xlabel(&#34;# Latent Facors&#34;, fontsize=20)\n\nplt.show()\n&#39;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[45]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#for i in ind:</span>
<span class="c1">#    print(&quot;({}, {})&quot;.format(i, np.round(expl_var[i-1], 2)))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>I think 500 dimensions is good enough</p>
</blockquote>
<hr>
<ul>
<li><p>By just taking <strong>(20 to 30)</strong> latent factors, explained variance that we could get is <strong>20 %</strong>.</p>
</li>
<li><p>To take it to <strong>60%</strong>, we have to take  <strong>almost 400 latent factors</strong>. It is not fare.</p>
</li>
</ul>
<ul>
<li>It basically is the <strong>gain of variance explained</strong>, if we <strong><em>add one additional latent factor to it.</em></strong></li>
</ul>
<ul>
<li>By adding one by one latent factore too it, the <strong>_gain in expained variance</strong> with that addition is decreasing. (Obviously, because they are sorted that way).</li>
<li><strong><em>LHS Graph</em></strong>:<ul>
<li><strong>x</strong> --- ( No of latent factos ),</li>
<li><strong>y</strong> --- ( The variance explained by taking x latent factors)</li>
</ul>
</li>
</ul>
<ul>
<li><strong>More decrease in the line (RHS graph) </strong>:<ul>
<li>We  are getting more expained variance than before.</li>
</ul>
</li>
<li><strong>Less decrease in that line (RHS graph)</strong>  :<ul>
<li>We are not getting benifitted from adding latent factor furthur. This is what is shown in the plots.</li>
</ul>
</li>
</ul>
<ul>
<li><strong><em>RHS Graph</em></strong>:<ul>
<li><strong>x</strong> --- ( No of latent factors ),</li>
<li><strong>y</strong> --- ( Gain n Expl_Var by taking one additional latent factor) </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Let&#39;s project our Original U_M matrix into into 500 Dimensional space...</span>
<span class="c1">#start = datetime.now()</span>
<span class="c1">#trunc_matrix = train_sparse_matrix.dot(netflix_svd.components_.T)</span>
<span class="c1">#print(datetime.now()- start)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[47]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#type(trunc_matrix), trunc_matrix.shape</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Let's convert this to actual sparse matrix and store it for future purposes</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[48]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\trunc_sparse_matrix.npz&#39;</span><span class="p">):</span>
    <span class="c1"># create that sparse sparse matrix</span>
    <span class="n">trunc_sparse_matrix</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">csr_matrix</span><span class="p">(</span><span class="n">trunc_matrix</span><span class="p">)</span>
    <span class="c1"># Save this truncated sparse matrix for later usage..</span>
    <span class="n">sparse</span><span class="o">.</span><span class="n">save_npz</span><span class="p">(</span><span class="s1">&#39;trunc_sparse_matrix&#39;</span><span class="p">,</span> <span class="n">trunc_sparse_matrix</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">trunc_sparse_matrix</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">load_npz</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\trunc_sparse_matrix.npz&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">trunc_sparse_matrix</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[49]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(2649430, 500)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[50]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#start = datetime.now()</span>
<span class="c1">#trunc_u_u_sim_matrix, _ = compute_user_similarity(trunc_sparse_matrix, compute_for_few=True, top=50, verbose=True, </span>
<span class="c1">#                                                 verb_for_n_rows=10)</span>
<span class="c1">#print(&quot;-&quot;*50)</span>
<span class="c1">#print(&quot;time:&quot;,datetime.now()-start)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>: This is taking more time for each user than Original one.</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>from above plot, It took almost <strong>12.18</strong> for computing simlilar users for <strong>one user</strong></li>
</ul>
<ul>
<li>We have <strong>405041 users</strong> with us in training set.</li>
</ul>
<ul>
<li><p>${ 405041 \times 12.18 ==== 4933399.38 \sec } ====  82223.323 \min ==== 1370.388716667 \text{ hours}
==== 57.099529861 \text{ days}...$</p>
<ul>
<li>Even we run on 4 cores parallelly (a typical system now a days), It will still take almost <strong>(14 - 15) </strong> days.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><strong>Why did this happen...??</strong></li>
</ul>

<pre><code>- Just think about it. It's not that difficult.

</code></pre>
<p>---------------------------------<em>( sparse &amp; dense..................get it ?? )</em>-----------------------------------</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Is there any other way to compute user user similarity..??</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>-An alternative is to compute similar users for a particular user,  whenenver required (<strong>ie., Run time</strong>)</p>

<pre><code>- We maintain a binary Vector for users, which tells us whether we already computed or not..
- ***If not*** : 
    - Compute top (let's just say, 1000) most similar users for this given user, and add this to our datastructure, so that we can just access it(similar users) without recomputing it again.
    - 
- ***If It is already Computed***:
    - Just get it directly from our datastructure, which has that information.
    - In production time, We might have to recompute similarities, if it is computed a long time ago. Because user preferences changes over time. If we could maintain some kind of Timer, which when expires, we have to update it ( recompute it ). 
    - 
- ***Which datastructure to use:***
    - It is purely implementation dependant. 
    - One simple method is to maintain a **Dictionary Of Dictionaries**.
        - 
        - **key    :** _userid_ 
        - __value__: _Again a dictionary_
            - __key__  : _Similar User_
            - __value__: _Similarity Value_</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.4.2 Computing Movie-Movie Similarity matrix </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\m_m_sim_sparse.npz&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It seems you don&#39;t have that file. Computing movie_movie similarity...&quot;</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">m_m_sim_sparse</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">train_sparse_matrix</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">dense_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done..&quot;</span><span class="p">)</span>
    <span class="c1"># store this sparse matrix in disk before using it. For future purposes.</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Saving it to disk without the need of re-computing it again.. &quot;</span><span class="p">)</span>
    <span class="n">sparse</span><span class="o">.</span><span class="n">save_npz</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\m_m_sim_sparse.npz&quot;</span><span class="p">,</span> <span class="n">m_m_sim_sparse</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done..&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It is there, We will get it.&quot;</span><span class="p">)</span>
    <span class="n">m_m_sim_sparse</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">load_npz</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\m_m_sim_sparse.npz&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done ...&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It&#39;s a &quot;</span><span class="p">,</span><span class="n">m_m_sim_sparse</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span><span class="s2">&quot; dimensional matrix&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>It is there, We will get it.
Done ...
It&#39;s a  (17771, 17771)  dimensional matrix
0:00:38.615931
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">m_m_sim_sparse</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[52]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(17771, 17771)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Even though we have similarity measure of each movie, with all other movies, We generally don't care much about least similar movies.</li>
</ul>
<ul>
<li>Most of the times, only top_xxx similar items matters. It may be 10 or 100.</li>
</ul>
<ul>
<li>We take only those top similar movie ratings and store them  in a saperate dictionary.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[53]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">movie_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">m_m_sim_sparse</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[54]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">similar_movies</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">movie</span> <span class="ow">in</span> <span class="n">movie_ids</span><span class="p">:</span>
    <span class="c1"># get the top similar movies and store them in the dictionary</span>
    <span class="n">sim_movies</span> <span class="o">=</span> <span class="n">m_m_sim_sparse</span><span class="p">[</span><span class="n">movie</span><span class="p">]</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">similar_movies</span><span class="p">[</span><span class="n">movie</span><span class="p">]</span> <span class="o">=</span> <span class="n">sim_movies</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>

<span class="c1"># just testing similar movies for movie_15</span>
<span class="n">similar_movies</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0:00:29.019619
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[54]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 8279,  8013, 16528,  5927, 13105, 12049,  4424, 10193, 17590,
        4549,  3755,   590, 14059, 15144, 15054,  9584,  9071,  6349,
       16402,  3973,  1720,  5370, 16309,  9376,  6116,  4706,  2818,
         778, 15331,  1416, 12979, 17139, 17710,  5452,  2534,   164,
       15188,  8323,  2450, 16331,  9566, 15301, 13213, 14308, 15984,
       10597,  6426,  5500,  7068,  7328,  5720,  9802,   376, 13013,
        8003, 10199,  3338, 15390,  9688, 16455, 11730,  4513,   598,
       12762,  2187,   509,  5865,  9166, 17115, 16334,  1942,  7282,
       17584,  4376,  8988,  8873,  5921,  2716, 14679, 11947, 11981,
        4649,   565, 12954, 10788, 10220, 10963,  9427,  1690,  5107,
        7859,  5969,  1510,  2429,   847,  7845,  6410, 13931,  9840,
        3706], dtype=int64)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 3.4.3 Finding most similar movies using similarity matrix </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong> Does Similarity really works as the way we expected...? </strong> <br>
<em>Let's pick some random movie and check for its similar movies....</em></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[55]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># First Let&#39;s load the movie details into soe dataframe..</span>
<span class="c1"># movie details are in &#39;netflix/movie_titles.csv&#39;</span>

<span class="n">movie_titles</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\movie_titles.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;movie_id&#39;</span><span class="p">,</span> <span class="s1">&#39;year_of_release&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">],</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">index_col</span> <span class="o">=</span> <span class="s1">&#39;movie_id&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">)</span>

<span class="n">movie_titles</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">movie_titles</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Tokenization took: 10.98 ms
Type conversion took: 160.33 ms
Parser memory cleanup took: 0.00 ms
(17770, 2)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p style='font-size:15px'><b>Similar Movies for 'Vampire Journals'</b></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[56]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mv_id</span> <span class="o">=</span> <span class="mi">67</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Movie -----&gt;&quot;</span><span class="p">,</span><span class="n">movie_titles</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mv_id</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">It has </span><span class="si">{}</span><span class="s2"> Ratings from users.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">train_sparse_matrix</span><span class="p">[:,</span><span class="n">mv_id</span><span class="p">]</span><span class="o">.</span><span class="n">getnnz</span><span class="p">()))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">We have </span><span class="si">{}</span><span class="s2"> movies which are similarto this  and we will get only top most..&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m_m_sim_sparse</span><span class="p">[:,</span><span class="n">mv_id</span><span class="p">]</span><span class="o">.</span><span class="n">getnnz</span><span class="p">()))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
Movie -----&gt; Vampire Journals

It has 270 Ratings from users.

We have 17284 movies which are similarto this  and we will get only top most..
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">similarities</span> <span class="o">=</span> <span class="n">m_m_sim_sparse</span><span class="p">[</span><span class="n">mv_id</span><span class="p">]</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

<span class="n">similar_indices</span> <span class="o">=</span> <span class="n">similarities</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>

<span class="n">similarities</span><span class="p">[</span><span class="n">similar_indices</span><span class="p">]</span>

<span class="n">sim_indices</span> <span class="o">=</span> <span class="n">similarities</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span> <span class="c1"># It will sort and reverse the array and ignore its similarity (ie.,1)</span>
                                               <span class="c1"># and return its indices(movie_ids)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">similarities</span><span class="p">[</span><span class="n">sim_indices</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;All the ratings&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">similarities</span><span class="p">[</span><span class="n">sim_indices</span><span class="p">[:</span><span class="mi">100</span><span class="p">]],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;top 100 similar movies&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Similar Movies of </span><span class="si">{}</span><span class="s2">(movie_id)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mv_id</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Movies (Not Movie_Ids)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Cosine Similarity&quot;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





<div id="8b07941f-72d5-41cb-858a-9e9c71318ac2"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#8b07941f-72d5-41cb-858a-9e9c71318ac2');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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" width="639.8608748714686">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Top 10 similar movies</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[59]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">movie_titles</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sim_indices</span><span class="p">[:</span><span class="mi">10</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[59]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year_of_release</th>
      <th>title</th>
    </tr>
    <tr>
      <th>movie_id</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>323</th>
      <td>1999.0</td>
      <td>Modern Vampires</td>
    </tr>
    <tr>
      <th>4044</th>
      <td>1998.0</td>
      <td>Subspecies 4: Bloodstorm</td>
    </tr>
    <tr>
      <th>1688</th>
      <td>1993.0</td>
      <td>To Sleep With a Vampire</td>
    </tr>
    <tr>
      <th>13962</th>
      <td>2001.0</td>
      <td>Dracula: The Dark Prince</td>
    </tr>
    <tr>
      <th>12053</th>
      <td>1993.0</td>
      <td>Dracula Rising</td>
    </tr>
    <tr>
      <th>16279</th>
      <td>2002.0</td>
      <td>Vampires: Los Muertos</td>
    </tr>
    <tr>
      <th>4667</th>
      <td>1996.0</td>
      <td>Vampirella</td>
    </tr>
    <tr>
      <th>1900</th>
      <td>1997.0</td>
      <td>Club Vampire</td>
    </tr>
    <tr>
      <th>13873</th>
      <td>2001.0</td>
      <td>The Breed</td>
    </tr>
    <tr>
      <th>15867</th>
      <td>2003.0</td>
      <td>Dracula II: Ascension</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>Similarly, we can <strong><em>find similar users</em></strong> and compare how similar they are.</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1> 4.  Machine Learning Models </h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src='images/models.jpg' width=500px></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[60]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_sample_sparse_matrix</span><span class="p">(</span><span class="n">sparse_matrix</span><span class="p">,</span> <span class="n">no_users</span><span class="p">,</span> <span class="n">no_movies</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        It will get it from the &#39;&#39;path&#39;&#39; if it is present  or It will create </span>
<span class="sd">        and store the sampled sparse matrix in the path specified.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># get (row, col) and (rating) tuple from sparse_matrix...</span>
    <span class="n">row_ind</span><span class="p">,</span> <span class="n">col_ind</span><span class="p">,</span> <span class="n">ratings</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">sparse_matrix</span><span class="p">)</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">row_ind</span><span class="p">)</span>
    <span class="n">movies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">col_ind</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original Matrix : (users, movies) -- (</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">users</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">movies</span><span class="p">)))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original Matrix : Ratings -- </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ratings</span><span class="p">)))</span>

    <span class="c1"># It just to make sure to get same sample everytime we run this program..</span>
    <span class="c1"># and pick without replacement....</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
    <span class="n">sample_users</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="n">no_users</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">sample_movies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">movies</span><span class="p">,</span> <span class="n">no_movies</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># get the boolean mask or these sampled_items in originl row/col_inds..</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span> <span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">row_ind</span><span class="p">,</span> <span class="n">sample_users</span><span class="p">),</span>
                      <span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">col_ind</span><span class="p">,</span> <span class="n">sample_movies</span><span class="p">)</span> <span class="p">)</span>
    
    <span class="n">sample_sparse_matrix</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">csr_matrix</span><span class="p">((</span><span class="n">ratings</span><span class="p">[</span><span class="n">mask</span><span class="p">],</span> <span class="p">(</span><span class="n">row_ind</span><span class="p">[</span><span class="n">mask</span><span class="p">],</span> <span class="n">col_ind</span><span class="p">[</span><span class="n">mask</span><span class="p">])),</span>
                                             <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">sample_users</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">sample_movies</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sampled Matrix : (users, movies) -- (</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sample_users</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_movies</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sampled Matrix : Ratings --&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Saving it into disk for furthur usage..&#39;</span><span class="p">)</span>
    <span class="c1"># save it into disk</span>
    <span class="n">sparse</span><span class="o">.</span><span class="n">save_npz</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sample_sparse_matrix</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done..</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">sample_sparse_matrix</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 4.1 Sampling Data </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>4.1.1 Build sample train data from the train data</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[61]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\sample_train_sparse_matrix.npz&quot;</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It is present in your pwd, getting it from disk....&quot;</span><span class="p">)</span>
    <span class="c1"># just get it from the disk instead of computing it</span>
    <span class="n">sample_train_sparse_matrix</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">load_npz</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DONE..&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span> 
    <span class="c1"># get 10k users and 1k movies from available data </span>
    <span class="n">sample_train_sparse_matrix</span> <span class="o">=</span> <span class="n">get_sample_sparse_matrix</span><span class="p">(</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize</span><span class="se">\t</span><span class="s1">rain_sparse_matrix.npz&#39;</span><span class="p">,</span> <span class="mi">25000</span><span class="p">,</span> <span class="mi">3000</span><span class="p">,</span>
                                             <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>It is present in your pwd, getting it from disk....
DONE..
0:00:00.177795
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[62]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span> <span class="p">((</span><span class="n">sample_train_sparse_matrix</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(2649405, 17724)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>4.1.2 Build sample test data from the test data</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[63]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\sample_test_sparse_matrix.npz&quot;</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It is present in your pwd, getting it from disk....&quot;</span><span class="p">)</span>
    <span class="c1"># just get it from the disk instead of computing it</span>
    <span class="n">sample_test_sparse_matrix</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">load_npz</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DONE..&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># get 5k users and 500 movies from available data </span>
    <span class="n">sample_test_sparse_matrix</span> <span class="o">=</span> <span class="n">get_sample_sparse_matrix</span><span class="p">(</span><span class="n">test_sparse_matrix</span><span class="p">,</span> <span class="n">no_users</span><span class="o">=</span><span class="mi">13000</span><span class="p">,</span> <span class="n">no_movies</span><span class="o">=</span><span class="mi">1500</span><span class="p">,</span>
                                                 <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\sample_test_sparse_matrix.npz&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>It is present in your pwd, getting it from disk....
DONE..
0:00:00.155943
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[64]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span> <span class="p">((</span><span class="n">sample_test_sparse_matrix</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(2648399, 17760)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>4.2 Finding Global Average of all movie ratings, Average rating per User, and Average rating per Movie (from sampled train)</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[65]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample_train_averages</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>4.2.1 Finding Global Average of all movie ratings</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[66]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># get the global average of ratings in our train set.</span>
<span class="n">global_average</span> <span class="o">=</span> <span class="n">sample_train_sparse_matrix</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">sample_train_sparse_matrix</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">()</span>
<span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">global_average</span>
<span class="n">sample_train_averages</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[66]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>{&#39;global&#39;: 3.581679377504138}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>4.2.2 Finding Average rating per User</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[67]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_average_ratings</span><span class="p">(</span><span class="n">sample_train_sparse_matrix</span><span class="p">,</span> <span class="n">of_users</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Average rating of user 1515220 :&#39;</span><span class="p">,</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="mi">1515220</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
Average rating of user 1515220 : 3.9655172413793105
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>4.2.3 Finding Average rating per Movie</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[68]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">get_average_ratings</span><span class="p">(</span><span class="n">sample_train_sparse_matrix</span><span class="p">,</span> <span class="n">of_users</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> AVerage rating of movie 15153 :&#39;</span><span class="p">,</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">][</span><span class="mi">15153</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
 AVerage rating of movie 15153 : 2.6458333333333335
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 4.3 Featurizing data </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[69]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> No of ratings in Our Sampled train matrix is : </span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sample_train_sparse_matrix</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> No of ratings in Our Sampled test  matrix is : </span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sample_test_sparse_matrix</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">()))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
 No of ratings in Our Sampled train matrix is : 129286


 No of ratings in Our Sampled test  matrix is : 7333

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.3.1 Featurizing data for regression problem </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 4.3.1.1 Featurizing train data </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[70]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># get users, movies and ratings from our samples train sparse matrix</span>
<span class="n">sample_train_users</span><span class="p">,</span> <span class="n">sample_train_movies</span><span class="p">,</span> <span class="n">sample_train_ratings</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">sample_train_sparse_matrix</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[71]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">############################################################</span>
<span class="c1"># It took me almost 10 hours to prepare this train dataset.#</span>
<span class="c1">############################################################</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\reg_train.csv&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File already exists you don&#39;t have to prepare again...&quot;</span> <span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;preparing </span><span class="si">{}</span><span class="s1"> tuples for the dataset..</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sample_train_ratings</span><span class="p">)))</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\reg_train.csv&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reg_data_file</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">movie</span><span class="p">,</span> <span class="n">rating</span><span class="p">)</span>  <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sample_train_users</span><span class="p">,</span> <span class="n">sample_train_movies</span><span class="p">,</span> <span class="n">sample_train_ratings</span><span class="p">):</span>
            <span class="n">st</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="c1">#     print(user, movie)    </span>
            <span class="c1">#--------------------- Ratings of &quot;movie&quot; by similar users of &quot;user&quot; ---------------------</span>
            <span class="c1"># compute the similar Users of the &quot;user&quot;        </span>
            <span class="n">user_sim</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">sample_train_sparse_matrix</span><span class="p">[</span><span class="n">user</span><span class="p">],</span> <span class="n">sample_train_sparse_matrix</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">top_sim_users</span> <span class="o">=</span> <span class="n">user_sim</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span> <span class="c1"># we are ignoring &#39;The User&#39; from its similar users.</span>
            <span class="c1"># get the ratings of most similar users for this movie</span>
            <span class="n">top_ratings</span> <span class="o">=</span> <span class="n">sample_train_sparse_matrix</span><span class="p">[</span><span class="n">top_sim_users</span><span class="p">,</span> <span class="n">movie</span><span class="p">]</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="c1"># we will make it&#39;s length &quot;5&quot; by adding movie averages to .</span>
            <span class="n">top_sim_users_ratings</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">top_ratings</span><span class="p">[</span><span class="n">top_ratings</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">][:</span><span class="mi">5</span><span class="p">])</span>
            <span class="n">top_sim_users_ratings</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">][</span><span class="n">movie</span><span class="p">]]</span><span class="o">*</span><span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">top_sim_users_ratings</span><span class="p">)))</span>
        <span class="c1">#     print(top_sim_users_ratings, end=&quot; &quot;)    </span>


            <span class="c1">#--------------------- Ratings by &quot;user&quot;  to similar movies of &quot;movie&quot; ---------------------</span>
            <span class="c1"># compute the similar movies of the &quot;movie&quot;        </span>
            <span class="n">movie_sim</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">sample_train_sparse_matrix</span><span class="p">[:,</span><span class="n">movie</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">sample_train_sparse_matrix</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">top_sim_movies</span> <span class="o">=</span> <span class="n">movie_sim</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span> <span class="c1"># we are ignoring &#39;The User&#39; from its similar users.</span>
            <span class="c1"># get the ratings of most similar movie rated by this user..</span>
            <span class="n">top_ratings</span> <span class="o">=</span> <span class="n">sample_train_sparse_matrix</span><span class="p">[</span><span class="n">user</span><span class="p">,</span> <span class="n">top_sim_movies</span><span class="p">]</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="c1"># we will make it&#39;s length &quot;5&quot; by adding user averages to.</span>
            <span class="n">top_sim_movies_ratings</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">top_ratings</span><span class="p">[</span><span class="n">top_ratings</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">][:</span><span class="mi">5</span><span class="p">])</span>
            <span class="n">top_sim_movies_ratings</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="n">user</span><span class="p">]]</span><span class="o">*</span><span class="p">(</span><span class="mi">5</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">top_sim_movies_ratings</span><span class="p">)))</span> 
        <span class="c1">#     print(top_sim_movies_ratings, end=&quot; : -- &quot;)</span>

            <span class="c1">#-----------------prepare the row to be stores in a file-----------------#</span>
            <span class="n">row</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">movie</span><span class="p">)</span>
            <span class="c1"># Now add the other features to this data...</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">])</span> <span class="c1"># first feature</span>
            <span class="c1"># next 5 features are similar_users &quot;movie&quot; ratings</span>
            <span class="n">row</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">top_sim_users_ratings</span><span class="p">)</span>
            <span class="c1"># next 5 features are &quot;user&quot; ratings for similar_movies</span>
            <span class="n">row</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">top_sim_movies_ratings</span><span class="p">)</span>
            <span class="c1"># Avg_user rating</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="n">user</span><span class="p">])</span>
            <span class="c1"># Avg_movie rating</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">][</span><span class="n">movie</span><span class="p">])</span>

            <span class="c1"># finalley, The actual Rating of this user-movie pair...</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rating</span><span class="p">)</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="c1"># add rows to the file opened..</span>
            <span class="n">reg_data_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">row</span><span class="p">)))</span>
            <span class="n">reg_data_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
            <span class="k">if</span> <span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">%</span><span class="k">10000</span> == 0:
                <span class="c1"># print(&#39;,&#39;.join(map(str, row)))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done for </span><span class="si">{}</span><span class="s2"> rows----- </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>


<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>File already exists you don&#39;t have to prepare again...
0:00:00.010006
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Reading from the file to make a Train_dataframe</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[72]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">reg_train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\reg_train.csv&#39;</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;movie&#39;</span><span class="p">,</span> <span class="s1">&#39;GAvg&#39;</span><span class="p">,</span> <span class="s1">&#39;sur1&#39;</span><span class="p">,</span> <span class="s1">&#39;sur2&#39;</span><span class="p">,</span> <span class="s1">&#39;sur3&#39;</span><span class="p">,</span> <span class="s1">&#39;sur4&#39;</span><span class="p">,</span> <span class="s1">&#39;sur5&#39;</span><span class="p">,</span><span class="s1">&#39;smr1&#39;</span><span class="p">,</span> <span class="s1">&#39;smr2&#39;</span><span class="p">,</span> <span class="s1">&#39;smr3&#39;</span><span class="p">,</span> <span class="s1">&#39;smr4&#39;</span><span class="p">,</span> <span class="s1">&#39;smr5&#39;</span><span class="p">,</span> <span class="s1">&#39;UAvg&#39;</span><span class="p">,</span> <span class="s1">&#39;MAvg&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">reg_train</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[72]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>movie</th>
      <th>GAvg</th>
      <th>sur1</th>
      <th>sur2</th>
      <th>sur3</th>
      <th>sur4</th>
      <th>sur5</th>
      <th>smr1</th>
      <th>smr2</th>
      <th>smr3</th>
      <th>smr4</th>
      <th>smr5</th>
      <th>UAvg</th>
      <th>MAvg</th>
      <th>rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>53406</td>
      <td>33</td>
      <td>3.581679</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>3.370370</td>
      <td>4.092437</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>99540</td>
      <td>33</td>
      <td>3.581679</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>3.555556</td>
      <td>4.092437</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>99865</td>
      <td>33</td>
      <td>3.581679</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>3.714286</td>
      <td>4.092437</td>
      <td>5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>101620</td>
      <td>33</td>
      <td>3.581679</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>3.584416</td>
      <td>4.092437</td>
      <td>5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>112974</td>
      <td>33</td>
      <td>3.581679</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>3.750000</td>
      <td>4.092437</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<ul>
<li><strong>GAvg</strong> : Average rating of all the ratings </li>
</ul>
<ul>
<li><strong>Similar users rating of this movie</strong>:<ul>
<li>sur1, sur2, sur3, sur4, sur5 ( top 5 similar users who rated that movie.. )</li>
</ul>
</li>
</ul>
<ul>
<li><strong>Similar movies rated by this user</strong>:<ul>
<li>smr1, smr2, smr3, smr4, smr5 ( top 5 similar movies rated by this movie.. )</li>
</ul>
</li>
</ul>
<ul>
<li><strong>UAvg</strong> : User's Average rating</li>
</ul>
<ul>
<li><strong>MAvg</strong> : Average rating of this movie</li>
</ul>
<ul>
<li><strong>rating</strong> : Rating of this movie by this user.</li>
</ul>
<hr>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 4.3.1.2 Featurizing test data </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[73]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># get users, movies and ratings from the Sampled Test </span>
<span class="n">sample_test_users</span><span class="p">,</span> <span class="n">sample_test_movies</span><span class="p">,</span> <span class="n">sample_test_ratings</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">sample_test_sparse_matrix</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[74]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[74]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>3.581679377504138</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[75]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\reg_test.csv&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It is already created...&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;preparing </span><span class="si">{}</span><span class="s1"> tuples for the dataset..</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sample_test_ratings</span><span class="p">)))</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\reg_test.csv&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reg_data_file</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span> 
        <span class="k">for</span> <span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">movie</span><span class="p">,</span> <span class="n">rating</span><span class="p">)</span>  <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sample_test_users</span><span class="p">,</span> <span class="n">sample_test_movies</span><span class="p">,</span> <span class="n">sample_test_ratings</span><span class="p">):</span>
            <span class="n">st</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

        <span class="c1">#--------------------- Ratings of &quot;movie&quot; by similar users of &quot;user&quot; ---------------------</span>
            <span class="c1">#print(user, movie)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># compute the similar Users of the &quot;user&quot;        </span>
                <span class="n">user_sim</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">sample_train_sparse_matrix</span><span class="p">[</span><span class="n">user</span><span class="p">],</span> <span class="n">sample_train_sparse_matrix</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                <span class="n">top_sim_users</span> <span class="o">=</span> <span class="n">user_sim</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span> <span class="c1"># we are ignoring &#39;The User&#39; from its similar users.</span>
                <span class="c1"># get the ratings of most similar users for this movie</span>
                <span class="n">top_ratings</span> <span class="o">=</span> <span class="n">sample_train_sparse_matrix</span><span class="p">[</span><span class="n">top_sim_users</span><span class="p">,</span> <span class="n">movie</span><span class="p">]</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                <span class="c1"># we will make it&#39;s length &quot;5&quot; by adding movie averages to .</span>
                <span class="n">top_sim_users_ratings</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">top_ratings</span><span class="p">[</span><span class="n">top_ratings</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">][:</span><span class="mi">5</span><span class="p">])</span>
                <span class="n">top_sim_users_ratings</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">][</span><span class="n">movie</span><span class="p">]]</span><span class="o">*</span><span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">top_sim_users_ratings</span><span class="p">)))</span>
                <span class="c1"># print(top_sim_users_ratings, end=&quot;--&quot;)</span>

            <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
                <span class="c1"># It is a new User or new Movie or there are no ratings for given user for top similar movies...</span>
                <span class="c1">########## Cold STart Problem ##########</span>
                <span class="n">top_sim_users_ratings</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">]]</span><span class="o">*</span><span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">top_sim_users_ratings</span><span class="p">)))</span>
                <span class="c1">#print(top_sim_users_ratings)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">movie</span><span class="p">)</span>
                <span class="c1"># we just want KeyErrors to be resolved. Not every Exception...</span>
                <span class="k">raise</span>



            <span class="c1">#--------------------- Ratings by &quot;user&quot;  to similar movies of &quot;movie&quot; ---------------------</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># compute the similar movies of the &quot;movie&quot;        </span>
                <span class="n">movie_sim</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">sample_train_sparse_matrix</span><span class="p">[:,</span><span class="n">movie</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">sample_train_sparse_matrix</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                <span class="n">top_sim_movies</span> <span class="o">=</span> <span class="n">movie_sim</span><span class="o">.</span><span class="n">argsort</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span> <span class="c1"># we are ignoring &#39;The User&#39; from its similar users.</span>
                <span class="c1"># get the ratings of most similar movie rated by this user..</span>
                <span class="n">top_ratings</span> <span class="o">=</span> <span class="n">sample_train_sparse_matrix</span><span class="p">[</span><span class="n">user</span><span class="p">,</span> <span class="n">top_sim_movies</span><span class="p">]</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                <span class="c1"># we will make it&#39;s length &quot;5&quot; by adding user averages to.</span>
                <span class="n">top_sim_movies_ratings</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">top_ratings</span><span class="p">[</span><span class="n">top_ratings</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">][:</span><span class="mi">5</span><span class="p">])</span>
                <span class="n">top_sim_movies_ratings</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="n">user</span><span class="p">]]</span><span class="o">*</span><span class="p">(</span><span class="mi">5</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">top_sim_movies_ratings</span><span class="p">)))</span> 
                <span class="c1">#print(top_sim_movies_ratings)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
                <span class="c1">#print(top_sim_movies_ratings, end=&quot; : -- &quot;)</span>
                <span class="n">top_sim_movies_ratings</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">]]</span><span class="o">*</span><span class="p">(</span><span class="mi">5</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">top_sim_movies_ratings</span><span class="p">)))</span>
                <span class="c1">#print(top_sim_movies_ratings)</span>
            <span class="k">except</span> <span class="p">:</span>
                <span class="k">raise</span>

            <span class="c1">#-----------------prepare the row to be stores in a file-----------------#</span>
            <span class="n">row</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="c1"># add usser and movie name first</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">movie</span><span class="p">)</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">])</span> <span class="c1"># first feature</span>
            <span class="c1">#print(row)</span>
            <span class="c1"># next 5 features are similar_users &quot;movie&quot; ratings</span>
            <span class="n">row</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">top_sim_users_ratings</span><span class="p">)</span>
            <span class="c1">#print(row)</span>
            <span class="c1"># next 5 features are &quot;user&quot; ratings for similar_movies</span>
            <span class="n">row</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">top_sim_movies_ratings</span><span class="p">)</span>
            <span class="c1">#print(row)</span>
            <span class="c1"># Avg_user rating</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="n">user</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1">#print(row)</span>
            <span class="c1"># Avg_movie rating</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;movie&#39;</span><span class="p">][</span><span class="n">movie</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_train_averages</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1">#print(row)</span>
            <span class="c1"># finalley, The actual Rating of this user-movie pair...</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rating</span><span class="p">)</span>
            <span class="c1">#print(row)</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="c1"># add rows to the file opened..</span>
            <span class="n">reg_data_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">row</span><span class="p">)))</span>
            <span class="c1">#print(&#39;,&#39;.join(map(str, row)))</span>
            <span class="n">reg_data_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
            <span class="k">if</span> <span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">%</span><span class="k">1000</span> == 0:
                <span class="c1">#print(&#39;,&#39;.join(map(str, row)))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done for </span><span class="si">{}</span><span class="s2"> rows----- </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>  
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>It is already created...
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Reading from the file to make a test dataframe </strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[76]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">reg_test_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\reg_test.csv&#39;</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;movie&#39;</span><span class="p">,</span> <span class="s1">&#39;GAvg&#39;</span><span class="p">,</span> <span class="s1">&#39;sur1&#39;</span><span class="p">,</span> <span class="s1">&#39;sur2&#39;</span><span class="p">,</span> <span class="s1">&#39;sur3&#39;</span><span class="p">,</span> <span class="s1">&#39;sur4&#39;</span><span class="p">,</span> <span class="s1">&#39;sur5&#39;</span><span class="p">,</span>
                                                          <span class="s1">&#39;smr1&#39;</span><span class="p">,</span> <span class="s1">&#39;smr2&#39;</span><span class="p">,</span> <span class="s1">&#39;smr3&#39;</span><span class="p">,</span> <span class="s1">&#39;smr4&#39;</span><span class="p">,</span> <span class="s1">&#39;smr5&#39;</span><span class="p">,</span>
                                                          <span class="s1">&#39;UAvg&#39;</span><span class="p">,</span> <span class="s1">&#39;MAvg&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">reg_test_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[76]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>movie</th>
      <th>GAvg</th>
      <th>sur1</th>
      <th>sur2</th>
      <th>sur3</th>
      <th>sur4</th>
      <th>sur5</th>
      <th>smr1</th>
      <th>smr2</th>
      <th>smr3</th>
      <th>smr4</th>
      <th>smr5</th>
      <th>UAvg</th>
      <th>MAvg</th>
      <th>rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>808635</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>941866</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1737912</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1849204</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<ul>
<li><strong>GAvg</strong> : Average rating of all the ratings </li>
</ul>
<ul>
<li><strong>Similar users rating of this movie</strong>:<ul>
<li>sur1, sur2, sur3, sur4, sur5 ( top 5 simiular users who rated that movie.. )</li>
</ul>
</li>
</ul>
<ul>
<li><strong>Similar movies rated by this user</strong>:<ul>
<li>smr1, smr2, smr3, smr4, smr5 ( top 5 simiular movies rated by this movie.. )</li>
</ul>
</li>
</ul>
<ul>
<li><strong>UAvg</strong> : User AVerage rating</li>
</ul>
<ul>
<li><strong>MAvg</strong> : Average rating of this movie</li>
</ul>
<ul>
<li><strong>rating</strong> : Rating of this movie by this user.</li>
</ul>
<hr>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.3.2 Transforming data for Surprise models</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[77]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">surprise</span> <span class="k">import</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Dataset</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 4.3.2.1 Transforming train data </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>We can't give raw data (movie, user, rating) to train the model in Surprise library.</li>
</ul>
<ul>
<li>They have a saperate format for TRAIN and TEST data, which will be useful for training the models like SVD, KNNBaseLineOnly....etc..,in Surprise.</li>
</ul>
<ul>
<li>We can form the trainset from a file, or from a Pandas  DataFrame. 
<a href="http://surprise.readthedocs.io/en/stable/getting_started.html#load-dom-dataframe-py">http://surprise.readthedocs.io/en/stable/getting_started.html#load-dom-dataframe-py</a> </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[78]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># It is to specify how to read the dataframe.</span>
<span class="c1"># for our dataframe, we don&#39;t have to specify anything extra..</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">Reader</span><span class="p">(</span><span class="n">rating_scale</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="c1"># create the traindata from the dataframe...</span>
<span class="n">train_data</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">load_from_df</span><span class="p">(</span><span class="n">reg_train</span><span class="p">[[</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;movie&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">]],</span> <span class="n">reader</span><span class="p">)</span>

<span class="c1"># build the trainset from traindata.., It is of dataset format from surprise library..</span>
<span class="n">trainset</span> <span class="o">=</span> <span class="n">train_data</span><span class="o">.</span><span class="n">build_full_trainset</span><span class="p">()</span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 4.3.2.2 Transforming test data </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Testset is just a list of (user, movie, rating) tuples. (Order in the tuple is impotant) </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[79]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">testset</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">reg_test_df</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">reg_test_df</span><span class="o">.</span><span class="n">movie</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">reg_test_df</span><span class="o">.</span><span class="n">rating</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
<span class="n">testset</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[79]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[(808635, 71, 5), (941866, 71, 4), (1737912, 71, 3)]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 4.4 Applying Machine Learning models </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><p>Global dictionary that stores rmse and mape for all the models....</p>
<ul>
<li><p>It stores the metrics in a dictionary of dictionaries</p>
<blockquote><p><strong>keys</strong> : model names(string)</p>
<p><strong>value</strong>: dict(<strong>key</strong> : metric, <strong>value</strong> : value )</p>
</blockquote>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[80]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">models_evaluation_train</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">models_evaluation_test</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="n">models_evaluation_train</span><span class="p">,</span> <span class="n">models_evaluation_test</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[80]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>({}, {})</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><strong>Utility functions for running regression models</strong></p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[81]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># to get rmse and mape given actual and predicted ratings..</span>
<span class="k">def</span> <span class="nf">get_error_metrics</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">):</span>
    <span class="n">rmse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span> <span class="p">(</span><span class="n">y_true</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">y_pred</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_pred</span><span class="p">))</span> <span class="p">]))</span>
    <span class="n">mape</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span> <span class="p">(</span><span class="n">y_true</span> <span class="o">-</span> <span class="n">y_pred</span><span class="p">)</span><span class="o">/</span><span class="n">y_true</span> <span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="k">return</span> <span class="n">rmse</span><span class="p">,</span> <span class="n">mape</span>

<span class="c1">###################################################################</span>
<span class="c1">###################################################################</span>
<span class="k">def</span> <span class="nf">run_xgboost</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span>  <span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    It will return train_results and test_results</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="c1"># dictionaries for storing train and test results</span>
    <span class="n">train_results</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">test_results</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    
    
    <span class="c1"># fit the model</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Training the model..&#39;</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">algo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">eval_metric</span> <span class="o">=</span> <span class="s1">&#39;rmse&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done. Time taken : </span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="c1"># from the trained model, get the predictions....</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Evaluating the model with TRAIN data...&#39;</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">y_train_pred</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">x_train</span><span class="p">)</span>
    <span class="c1"># get the rmse and mape of train data...</span>
    <span class="n">rmse_train</span><span class="p">,</span> <span class="n">mape_train</span> <span class="o">=</span> <span class="n">get_error_metrics</span><span class="p">(</span><span class="n">y_train</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">y_train_pred</span><span class="p">)</span>
    
    <span class="c1"># store the results in train_results dictionary..</span>
    <span class="n">train_results</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rmse&#39;</span><span class="p">:</span> <span class="n">rmse_train</span><span class="p">,</span>
                    <span class="s1">&#39;mape&#39;</span> <span class="p">:</span> <span class="n">mape_train</span><span class="p">,</span>
                    <span class="s1">&#39;predictions&#39;</span> <span class="p">:</span> <span class="n">y_train_pred</span><span class="p">}</span>
    
    <span class="c1">#######################################</span>
    <span class="c1"># get the test data predictions and compute rmse and mape</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Evaluating Test data&#39;</span><span class="p">)</span>
    <span class="n">y_test_pred</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">x_test</span><span class="p">)</span> 
    <span class="n">rmse_test</span><span class="p">,</span> <span class="n">mape_test</span> <span class="o">=</span> <span class="n">get_error_metrics</span><span class="p">(</span><span class="n">y_true</span><span class="o">=</span><span class="n">y_test</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">y_pred</span><span class="o">=</span><span class="n">y_test_pred</span><span class="p">)</span>
    <span class="c1"># store them in our test results dictionary.</span>
    <span class="n">test_results</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rmse&#39;</span><span class="p">:</span> <span class="n">rmse_test</span><span class="p">,</span>
                    <span class="s1">&#39;mape&#39;</span> <span class="p">:</span> <span class="n">mape_test</span><span class="p">,</span>
                    <span class="s1">&#39;predictions&#39;</span><span class="p">:</span><span class="n">y_test_pred</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">TEST DATA&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">30</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;RMSE : &#39;</span><span class="p">,</span> <span class="n">rmse_test</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;MAPE : &#39;</span><span class="p">,</span> <span class="n">mape_test</span><span class="p">)</span>
        
    <span class="c1"># return these train and test results...</span>
    <span class="k">return</span> <span class="n">train_results</span><span class="p">,</span> <span class="n">test_results</span>
    
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><strong>Utility functions for Surprise modes</strong></p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[82]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># it is just to makesure that all of our algorithms should produce same results</span>
<span class="c1"># everytime they run...</span>

<span class="n">my_seed</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">my_seed</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">my_seed</span><span class="p">)</span>

<span class="c1">##########################################################</span>
<span class="c1"># get  (actual_list , predicted_list) ratings given list </span>
<span class="c1"># of predictions (prediction is a class in Surprise).    </span>
<span class="c1">##########################################################</span>
<span class="k">def</span> <span class="nf">get_ratings</span><span class="p">(</span><span class="n">predictions</span><span class="p">):</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">pred</span><span class="o">.</span><span class="n">r_ui</span> <span class="k">for</span> <span class="n">pred</span> <span class="ow">in</span> <span class="n">predictions</span><span class="p">])</span>
    <span class="n">pred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">pred</span><span class="o">.</span><span class="n">est</span> <span class="k">for</span> <span class="n">pred</span> <span class="ow">in</span> <span class="n">predictions</span><span class="p">])</span>
    
    <span class="k">return</span> <span class="n">actual</span><span class="p">,</span> <span class="n">pred</span>

<span class="c1">################################################################</span>
<span class="c1"># get &#39;&#39;rmse&#39;&#39; and &#39;&#39;mape&#39;&#39; , given list of prediction objecs </span>
<span class="c1">################################################################</span>
<span class="k">def</span> <span class="nf">get_errors</span><span class="p">(</span><span class="n">predictions</span><span class="p">,</span> <span class="n">print_them</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

    <span class="n">actual</span><span class="p">,</span> <span class="n">pred</span> <span class="o">=</span> <span class="n">get_ratings</span><span class="p">(</span><span class="n">predictions</span><span class="p">)</span>
    <span class="n">rmse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">((</span><span class="n">pred</span> <span class="o">-</span> <span class="n">actual</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">mape</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">pred</span> <span class="o">-</span> <span class="n">actual</span><span class="p">)</span><span class="o">/</span><span class="n">actual</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">rmse</span><span class="p">,</span> <span class="n">mape</span><span class="o">*</span><span class="mi">100</span>

<span class="c1">##################################################################################</span>
<span class="c1"># It will return predicted ratings, rmse and mape of both train and test data   #</span>
<span class="c1">##################################################################################</span>
<span class="k">def</span> <span class="nf">run_surprise</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span> 
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        return train_dict, test_dict</span>
<span class="sd">    </span>
<span class="sd">        It returns two dictionaries, one for train and the other is for test</span>
<span class="sd">        Each of them have 3 key-value pairs, which specify &#39;&#39;rmse&#39;&#39;, &#39;&#39;mape&#39;&#39;, and &#39;&#39;predicted ratings&#39;&#39;.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="c1"># dictionaries that stores metrics for train and test..</span>
    <span class="n">train</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">test</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    
    <span class="c1"># train the algorithm with the trainset</span>
    <span class="n">st</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Training the model...&#39;</span><span class="p">)</span>
    <span class="n">algo</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">trainset</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done. time taken : </span><span class="si">{}</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">st</span><span class="p">))</span>
    
    <span class="c1"># ---------------- Evaluating train data--------------------#</span>
    <span class="n">st</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Evaluating the model with train data..&#39;</span><span class="p">)</span>
    <span class="c1"># get the train predictions (list of prediction class inside Surprise)</span>
    <span class="n">train_preds</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">trainset</span><span class="o">.</span><span class="n">build_testset</span><span class="p">())</span>
    <span class="c1"># get predicted ratings from the train predictions..</span>
    <span class="n">train_actual_ratings</span><span class="p">,</span> <span class="n">train_pred_ratings</span> <span class="o">=</span> <span class="n">get_ratings</span><span class="p">(</span><span class="n">train_preds</span><span class="p">)</span>
    <span class="c1"># get &#39;&#39;rmse&#39;&#39; and &#39;&#39;mape&#39;&#39; from the train predictions.</span>
    <span class="n">train_rmse</span><span class="p">,</span> <span class="n">train_mape</span> <span class="o">=</span> <span class="n">get_errors</span><span class="p">(</span><span class="n">train_preds</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;time taken : </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">st</span><span class="p">))</span>
    
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">15</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Train Data&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">15</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE : </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">MAPE : </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">train_rmse</span><span class="p">,</span> <span class="n">train_mape</span><span class="p">))</span>
    
    <span class="c1">#store them in the train dictionary</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;adding train results in the dictionary..&#39;</span><span class="p">)</span>
    <span class="n">train</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_rmse</span>
    <span class="n">train</span><span class="p">[</span><span class="s1">&#39;mape&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_mape</span>
    <span class="n">train</span><span class="p">[</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_pred_ratings</span>
    
    <span class="c1">#------------ Evaluating Test data---------------#</span>
    <span class="n">st</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Evaluating for test data...&#39;</span><span class="p">)</span>
    <span class="c1"># get the predictions( list of prediction classes) of test data</span>
    <span class="n">test_preds</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">testset</span><span class="p">)</span>
    <span class="c1"># get the predicted ratings from the list of predictions</span>
    <span class="n">test_actual_ratings</span><span class="p">,</span> <span class="n">test_pred_ratings</span> <span class="o">=</span> <span class="n">get_ratings</span><span class="p">(</span><span class="n">test_preds</span><span class="p">)</span>
    <span class="c1"># get error metrics from the predicted and actual ratings</span>
    <span class="n">test_rmse</span><span class="p">,</span> <span class="n">test_mape</span> <span class="o">=</span> <span class="n">get_errors</span><span class="p">(</span><span class="n">test_preds</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;time taken : </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">st</span><span class="p">))</span>
    
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">15</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Test Data&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">15</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RMSE : </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">MAPE : </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">test_rmse</span><span class="p">,</span> <span class="n">test_mape</span><span class="p">))</span>
    <span class="c1"># store them in test dictionary</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;storing the test results in test dictionary...&#39;</span><span class="p">)</span>
    <span class="n">test</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_rmse</span>
    <span class="n">test</span><span class="p">[</span><span class="s1">&#39;mape&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_mape</span>
    <span class="n">test</span><span class="p">[</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_pred_ratings</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">45</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total time taken to run this algorithm :&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
    
    <span class="c1"># return two dictionaries train and test</span>
    <span class="k">return</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.4.1 XGBoost with initial 13 features </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[93]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[97]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># prepare Train data</span>
<span class="n">x_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;movie&#39;</span><span class="p">,</span><span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>

<span class="c1"># Prepare Test data</span>
<span class="n">x_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;movie&#39;</span><span class="p">,</span><span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[100]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_train</span><span class="p">))</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_train</span><span class="p">))</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_test</span><span class="p">))</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y_test</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>129286
129286
7333
7333
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[104]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">xgboost</span> <span class="k">as</span> <span class="nn">xgb</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="k">import</span> <span class="n">randint</span> <span class="k">as</span> <span class="n">randint</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="k">import</span> <span class="n">stats</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">RandomizedSearchCV</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[106]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">params_xgboost_first13</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;learning_rate&#39;</span> <span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span>
             <span class="s1">&#39;n_estimators&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">900</span><span class="p">),</span>
             <span class="s1">&#39;max_depth&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">),</span>
             <span class="s1">&#39;min_child_weight&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
             <span class="s1">&#39;reg_alpha&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span>
             <span class="s1">&#39;reg_lambda&#39;</span><span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span>
             <span class="s1">&#39;colsample_bytree&#39;</span><span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span><span class="mf">0.3</span><span class="p">)}</span>


<span class="c1"># initialize Our first XGBoost model...</span>
<span class="n">first_xgb_reg</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">XGBRegressor</span><span class="p">(</span><span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">xgb_best_first13</span> <span class="o">=</span> <span class="n">RandomizedSearchCV</span><span class="p">(</span><span class="n">first_xgb_reg</span><span class="p">,</span> <span class="n">param_distributions</span><span class="o">=</span> <span class="n">params_xgboost_first13</span><span class="p">,</span><span class="n">refit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scoring</span> <span class="o">=</span> <span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">)</span> 

<span class="n">xgb_best_first13</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">best_para_xgb_first13</span> <span class="o">=</span> <span class="n">xgb_best_first13</span><span class="o">.</span><span class="n">best_params_</span>
<span class="n">first_xgb</span> <span class="o">=</span> <span class="n">first_xgb_reg</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">best_para_xgb_first13</span><span class="p">)</span>

<span class="n">train_results</span><span class="p">,</span> <span class="n">test_results</span> <span class="o">=</span> <span class="n">run_xgboost</span><span class="p">(</span><span class="n">first_xgb</span><span class="p">,</span> <span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>

<span class="c1"># store the results in models_evaluations dictionaries</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;first_algo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_results</span>
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;first_algo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_results</span>

<span class="n">xgb</span><span class="o">.</span><span class="n">plot_importance</span><span class="p">(</span><span class="n">first_xgb</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>C:\Users\DELL\Anaconda3\lib\site-packages\sklearn\model_selection\_split.py:1978: FutureWarning: The default value of cv will change from 3 to 5 in version 0.22. Specify it explicitly to silence this warning.
  warnings.warn(CV_WARNING, FutureWarning)
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model..
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:587: FutureWarning: Series.base is deprecated and will be removed in a future version
  if getattr(data, &#39;base&#39;, None) is not None and \
C:\Users\DELL\Anaconda3\lib\site-packages\xgboost\core.py:588: FutureWarning: Series.base is deprecated and will be removed in a future version
  data.base is not None and isinstance(data, np.ndarray) \
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Done. Time taken : 0:00:09.610555

Done 

Evaluating the model with TRAIN data...
Evaluating Test data

TEST DATA
------------------------------
RMSE :  1.1448873228716383
MAPE :  32.33877740332666
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>





<div id="f6f41d62-4b0b-4c0f-9fc0-0d83bc22cddb"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#f6f41d62-4b0b-4c0f-9fc0-0d83bc22cddb');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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" width="639.8608748714686">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.4.2 Suprise BaselineModel </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[107]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">surprise</span> <span class="k">import</span> <span class="n">BaselineOnly</span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Predicted_rating : ( baseline prediction ) </strong></p>

<pre><code>-  http://surprise.readthedocs.io/en/stable/basic_algorithms.html#surprise.prediction_algorithms.baseline_only.BaselineOnly 
</code></pre>
<blockquote><p>$   \large {\hat{r}_{ui} = b_{ui} =\mu + b_u + b_i} $</p>
</blockquote>
<ul>
<li>$\pmb \mu $ : Average of all trainings in training data.</li>
<li>$\pmb b_u$ : User bias</li>
<li>$\pmb b_i$ : Item bias (movie biases) </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Optimization function ( Least Squares Problem ) </strong></p>

<pre><code>- http://surprise.readthedocs.io/en/stable/prediction_algorithms.html#baselines-estimates-configuration 

</code></pre>
<blockquote><p>$ \large \sum_{r_{ui} \in R_{train}} \left(r_{ui} - (\mu + b_u + b_i)\right)^2 +
\lambda \left(b_u^2 + b_i^2 \right).\text {        [mimimize } {b_u, b_i]}$</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[108]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># options are to specify.., how to compute those user and item biases</span>
<span class="n">bsl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;sgd&#39;</span><span class="p">,</span>
               <span class="s1">&#39;learning_rate&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">001</span>
               <span class="p">}</span>
<span class="n">bsl_algo</span> <span class="o">=</span> <span class="n">BaselineOnly</span><span class="p">(</span><span class="n">bsl_options</span><span class="o">=</span><span class="n">bsl_options</span><span class="p">)</span>
<span class="c1"># run this algorithm.., It will return the train and test results..</span>
<span class="n">bsl_train_results</span><span class="p">,</span> <span class="n">bsl_test_results</span> <span class="o">=</span> <span class="n">run_surprise</span><span class="p">(</span><span class="n">bsl_algo</span><span class="p">,</span> <span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="c1"># Just store these error metrics in our models_evaluation datastructure</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;bsl_algo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bsl_train_results</span> 
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;bsl_algo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bsl_test_results</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model...
Estimating biases using sgd...
Done. time taken : 0:00:01.169433 

Evaluating the model with train data..
time taken : 0:00:02.096755
---------------
Train Data
---------------
RMSE : 0.9347153928678286

MAPE : 29.389572652358183

adding train results in the dictionary..

Evaluating for test data...
time taken : 0:00:00.167726
---------------
Test Data
---------------
RMSE : 1.0730330260516174

MAPE : 35.04995544572911

storing the test results in test dictionary...

---------------------------------------------
Total time taken to run this algorithm : 0:00:03.438360
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.4.3 XGBoost with initial 13 features + Surprise Baseline predictor </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Updating Train Data</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[109]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># add our baseline_predicted value as our feature..</span>
<span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;bslpr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;bsl_algo&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>
<span class="n">reg_train</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[109]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>movie</th>
      <th>GAvg</th>
      <th>sur1</th>
      <th>sur2</th>
      <th>sur3</th>
      <th>sur4</th>
      <th>sur5</th>
      <th>smr1</th>
      <th>smr2</th>
      <th>smr3</th>
      <th>smr4</th>
      <th>smr5</th>
      <th>UAvg</th>
      <th>MAvg</th>
      <th>rating</th>
      <th>bslpr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>53406</td>
      <td>33</td>
      <td>3.581679</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>3.370370</td>
      <td>4.092437</td>
      <td>4</td>
      <td>3.898982</td>
    </tr>
    <tr>
      <th>1</th>
      <td>99540</td>
      <td>33</td>
      <td>3.581679</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>3.555556</td>
      <td>4.092437</td>
      <td>3</td>
      <td>3.371403</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Updating Test Data</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[110]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># add that baseline predicted ratings with Surprise to the test data as well</span>
<span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;bslpr&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;bsl_algo&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>

<span class="n">reg_test_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[110]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>movie</th>
      <th>GAvg</th>
      <th>sur1</th>
      <th>sur2</th>
      <th>sur3</th>
      <th>sur4</th>
      <th>sur5</th>
      <th>smr1</th>
      <th>smr2</th>
      <th>smr3</th>
      <th>smr4</th>
      <th>smr5</th>
      <th>UAvg</th>
      <th>MAvg</th>
      <th>rating</th>
      <th>bslpr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>808635</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>5</td>
      <td>3.581679</td>
    </tr>
    <tr>
      <th>1</th>
      <td>941866</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>4</td>
      <td>3.581679</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[112]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># prepare train data</span>
<span class="n">x_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;movie&#39;</span><span class="p">,</span><span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>

<span class="c1"># Prepare Test data</span>
<span class="n">x_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;movie&#39;</span><span class="p">,</span><span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>


<span class="n">params_xgboost_first13_sbl</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;learning_rate&#39;</span> <span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span>
             <span class="s1">&#39;n_estimators&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">900</span><span class="p">),</span>
             <span class="s1">&#39;max_depth&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">),</span>
             <span class="s1">&#39;min_child_weight&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
             <span class="s1">&#39;reg_alpha&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span>
             <span class="s1">&#39;reg_lambda&#39;</span><span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span>
             <span class="s1">&#39;colsample_bytree&#39;</span><span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span><span class="mf">0.3</span><span class="p">)}</span>

<span class="n">first_xgb_reg_sbl</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">XGBRegressor</span><span class="p">(</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">xgb_best_first13_sbl</span> <span class="o">=</span> <span class="n">RandomizedSearchCV</span><span class="p">(</span><span class="n">first_xgb_reg_sbl</span><span class="p">,</span> <span class="n">param_distributions</span><span class="o">=</span> <span class="n">params_xgboost_first13_sbl</span><span class="p">,</span><span class="n">refit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scoring</span> <span class="o">=</span> <span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">,</span><span class="n">n_jobs</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> 

<span class="n">xgb_best_first13_sbl</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">best_para_xgb_first13_sbl</span> <span class="o">=</span> <span class="n">xgb_best_first13_sbl</span><span class="o">.</span><span class="n">best_params_</span>
<span class="n">xgb_best_first13_sbl</span> <span class="o">=</span> <span class="n">first_xgb_reg_sbl</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">best_para_xgb_first13_sbl</span><span class="p">)</span>

<span class="c1"># initialize Our first XGBoost model...</span>
<span class="c1">#xgb_bsl = xgb.XGBRegressor(silent=False, n_jobs=13, random_state=15)</span>

<span class="n">train_results</span><span class="p">,</span> <span class="n">test_results</span> <span class="o">=</span> <span class="n">run_xgboost</span><span class="p">(</span><span class="n">xgb_best_first13_sbl</span><span class="p">,</span> <span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>

<span class="c1"># store the results in models_evaluations dictionaries</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;xgb_bsl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_results</span>
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;xgb_bsl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_results</span>

<span class="n">xgb</span><span class="o">.</span><span class="n">plot_importance</span><span class="p">(</span><span class="n">xgb_best_first13_sbl</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model..
[19:42:46] WARNING: src/objective/regression_obj.cu:152: reg:linear is now deprecated in favor of reg:squarederror.
Done. Time taken : 0:00:28.766846

Done 

Evaluating the model with TRAIN data...
Evaluating Test data

TEST DATA
------------------------------
RMSE :  1.147985867967635
MAPE :  32.281429549337346
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>





<div id="64703650-f961-488e-b60e-6815704603a3"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#64703650-f961-488e-b60e-6815704603a3');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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" width="639.8608748714686">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.4.4 Surprise KNNBaseline predictor </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[113]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">surprise</span> <span class="k">import</span> <span class="n">KNNBaseline</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>KNN BASELINE<ul>
<li><a href="http://surprise.readthedocs.io/en/stable/knn_inspired.html#surprise.prediction_algorithms.knns.KNNBaseline">http://surprise.readthedocs.io/en/stable/knn_inspired.html#surprise.prediction_algorithms.knns.KNNBaseline</a> </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>PEARSON_BASELINE SIMILARITY<ul>
<li><a href="http://surprise.readthedocs.io/en/stable/similarities.html#surprise.similarities.pearson_baseline">http://surprise.readthedocs.io/en/stable/similarities.html#surprise.similarities.pearson_baseline</a> </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>SHRINKAGE<ul>
<li><em>2.2 Neighborhood Models</em> in <a href="http://courses.ischool.berkeley.edu/i290-dm/s11/SECURE/a1-koren.pdf">http://courses.ischool.berkeley.edu/i290-dm/s11/SECURE/a1-koren.pdf</a> </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><strong>predicted Rating</strong> : ( <strong><em> based on User-User similarity </em></strong> )</li>
</ul>
\begin{align} \hat{r}_{ui} = b_{ui} + \frac{ \sum\limits_{v \in N^k_i(u)}
\text{sim}(u, v) \cdot (r_{vi} - b_{vi})} {\sum\limits_{v \in
N^k_i(u)} \text{sim}(u, v)} \end{align}<ul>
<li><p>$\pmb{b_{ui}}$ -  <em>Baseline prediction</em> of (user,movie) rating</p>
</li>
<li><p>$ \pmb {N_i^k (u)}$ - Set of <strong>K similar</strong> users (neighbours) of <strong>user (u)</strong> who rated <strong>movie(i)</strong></p>
</li>
<li><p><em>sim (u, v)</em> - <strong>Similarity</strong> between users <strong>u and v</strong></p>
<ul>
<li>Generally, it will be cosine similarity or Pearson correlation coefficient. </li>
<li>But we use <strong>shrunk Pearson-baseline correlation coefficient</strong>, which is based on the pearsonBaseline similarity ( we take base line predictions instead of mean rating of user/item)</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><p><strong> Predicted rating </strong> ( based on Item Item similarity ):
\begin{align} \hat{r}_{ui} = b_{ui} + \frac{ \sum\limits_{j \in N^k_u(i)}\text{sim}(i, j) \cdot (r_{uj} - b_{uj})} {\sum\limits_{j \in N^k_u(j)} \text{sim}(i, j)} \end{align}</p>
<ul>
<li><strong><em>Notations follows same as above (user user based predicted rating ) </em></strong></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 4.4.4.1 Surprise KNNBaseline with user user similarities</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[114]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># we specify , how to compute similarities and what to consider with sim_options to our algorithm</span>
<span class="kn">from</span> <span class="nn">surprise.model_selection</span> <span class="k">import</span> <span class="n">GridSearchCV</span>


<span class="n">param_grid</span>  <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sim_options&#39;</span><span class="p">:{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pearson_baseline&quot;</span><span class="p">],</span> <span class="s2">&quot;user_based&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">],</span> <span class="s2">&quot;min_support&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;shrinkage&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span><span class="mi">140</span><span class="p">,</span><span class="mi">160</span><span class="p">]},</span> <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">]}</span>

<span class="c1">#sim_options = {&#39;user_based&#39; : True,</span>
<span class="c1">#               &#39;name&#39;: &#39;pearson_baseline&#39;,</span>
<span class="c1">#               &#39;shrinkage&#39;: 100,</span>
<span class="c1">#               &#39;min_support&#39;: 2</span>
<span class="c1">#              } </span>
<span class="c1"># we keep other parameters like regularization parameter and learning_rate as default values.</span>
<span class="n">bsl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;sgd&#39;</span><span class="p">}</span> 

<span class="n">gsearch</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">KNNBaseline</span><span class="p">,</span> <span class="n">param_grid</span><span class="p">,</span> <span class="n">measures</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>
<span class="n">gsearch</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train_data</span><span class="p">)</span>


<span class="c1">#knn_bsl_u = KNNBaseline(k=40, sim_options = sim_options, bsl_options = bsl_options)</span>
<span class="c1">#knn_bsl_u_train_results, knn_bsl_u_test_results = run_surprise(knn_bsl_u, trainset, testset, verbose=True)</span>

<span class="c1"># Just store these error metrics in our models_evaluation datastructure</span>
<span class="c1">#models_evaluation_train[&#39;knn_bsl_u&#39;] = knn_bsl_u_train_results </span>
<span class="c1">#models_evaluation_test[&#39;knn_bsl_u&#39;] = knn_bsl_u_test_results</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[115]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># best RMSE score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gsearch</span><span class="o">.</span><span class="n">best_score</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>

<span class="c1"># combination of parameters that gave the best RMSE score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gsearch</span><span class="o">.</span><span class="n">best_params</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0.9277220892274485
{&#39;sim_options&#39;: {&#39;name&#39;: &#39;pearson_baseline&#39;, &#39;user_based&#39;: True, &#39;min_support&#39;: 2, &#39;shrinkage&#39;: 160}, &#39;k&#39;: 80}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[116]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sim_options</span><span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;pearson_baseline&#39;</span><span class="p">,</span> <span class="s1">&#39;user_based&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;min_support&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;shrinkage&#39;</span><span class="p">:</span> <span class="mi">160</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="mi">80</span><span class="p">}</span>

<span class="n">bsl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;sgd&#39;</span><span class="p">}</span> 

<span class="n">best_algo_knn</span> <span class="o">=</span> <span class="n">KNNBaseline</span><span class="p">(</span><span class="n">k</span> <span class="o">=</span> <span class="n">gsearch</span><span class="o">.</span><span class="n">best_params</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">],</span> <span class="n">sim_options</span> <span class="o">=</span> <span class="n">sim_options</span><span class="p">,</span> <span class="n">bsl_options</span><span class="o">=</span><span class="n">bsl_options</span><span class="p">)</span>

<span class="n">train_result</span><span class="p">,</span> <span class="n">test_result</span> <span class="o">=</span> <span class="n">run_surprise</span><span class="p">(</span><span class="n">best_algo_knn</span><span class="p">,</span> <span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span><span class="p">,</span> <span class="s2">&quot;KNNBaseline_User&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model...
Estimating biases using sgd...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Done. time taken : 0:00:38.566852 

Evaluating the model with train data..
time taken : 0:01:49.225911
---------------
Train Data
---------------
RMSE : 0.35090782785978547

MAPE : 9.512630588619707

adding train results in the dictionary..

Evaluating for test data...
time taken : 0:00:00.071050
---------------
Test Data
---------------
RMSE : 1.0726441119270775

MAPE : 35.020524688578966

storing the test results in test dictionary...

---------------------------------------------
Total time taken to run this algorithm : 0:02:27.865749
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[117]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sim_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_based&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
               <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;pearson_baseline&#39;</span><span class="p">,</span>
               <span class="s1">&#39;shrinkage&#39;</span><span class="p">:</span> <span class="mi">160</span><span class="p">,</span>
               <span class="s1">&#39;min_support&#39;</span><span class="p">:</span> <span class="mi">2</span>
              <span class="p">}</span> 
<span class="c1"># we keep other parameters like regularization parameter and learning_rate as default values.</span>
<span class="n">bsl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;sgd&#39;</span><span class="p">}</span> 

<span class="n">knn_bsl_u</span> <span class="o">=</span> <span class="n">KNNBaseline</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">sim_options</span> <span class="o">=</span> <span class="n">sim_options</span><span class="p">,</span> <span class="n">bsl_options</span> <span class="o">=</span> <span class="n">bsl_options</span><span class="p">)</span>
<span class="n">knn_bsl_u_train_results</span><span class="p">,</span> <span class="n">knn_bsl_u_test_results</span> <span class="o">=</span> <span class="n">run_surprise</span><span class="p">(</span><span class="n">knn_bsl_u</span><span class="p">,</span> <span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Just store these error metrics in our models_evaluation datastructure</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;knn_bsl_u&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">knn_bsl_u_train_results</span> 
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;knn_bsl_u&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">knn_bsl_u_test_results</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model...
Estimating biases using sgd...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Done. time taken : 0:00:38.563956 

Evaluating the model with train data..
time taken : 0:01:49.264807
---------------
Train Data
---------------
RMSE : 0.35090782785978547

MAPE : 9.512630588619707

adding train results in the dictionary..

Evaluating for test data...
time taken : 0:00:00.071806
---------------
Test Data
---------------
RMSE : 1.0726441119270775

MAPE : 35.020524688578966

storing the test results in test dictionary...

---------------------------------------------
Total time taken to run this algorithm : 0:02:27.900569
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[118]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="n">knn_bsl_u_train_results</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">knn_bsl_u_test_results</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;rmse&#39;: 0.35090782785978547, &#39;mape&#39;: 9.512630588619707, &#39;predictions&#39;: array([3.92664239, 3.13553169, 3.53436113, ..., 3.        , 4.        ,
       4.        ])}
{&#39;rmse&#39;: 1.0726441119270775, &#39;mape&#39;: 35.020524688578966, &#39;predictions&#39;: array([3.58167938, 3.58167938, 3.58167938, ..., 3.58167938, 3.58167938,
       3.58167938])}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 4.4.4.2 Surprise KNNBaseline with movie movie similarities</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[119]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">surprise.model_selection</span> <span class="k">import</span> <span class="n">GridSearchCV</span>
<span class="n">param_grid_item_item</span>  <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sim_options&#39;</span><span class="p">:{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pearson_baseline&quot;</span><span class="p">],</span> <span class="s2">&quot;user_based&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">False</span><span class="p">],</span> <span class="s2">&quot;min_support&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;shrinkage&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span><span class="mi">140</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">200</span><span class="p">]},</span> <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">]}</span>

<span class="c1"># we keep other parameters like regularization parameter and learning_rate as default values.</span>
<span class="n">bsl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;sgd&#39;</span><span class="p">}</span> 
<span class="n">gsearch_item_item</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">KNNBaseline</span><span class="p">,</span> <span class="n">param_grid_item_item</span><span class="p">,</span> <span class="n">measures</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>
<span class="n">gsearch_item_item</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Estimating biases using als...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[120]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># best RMSE score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gsearch_item_item</span><span class="o">.</span><span class="n">best_score</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>

<span class="c1"># combination of parameters that gave the best RMSE score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gsearch_item_item</span><span class="o">.</span><span class="n">best_params</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0.9637336564859131
{&#39;sim_options&#39;: {&#39;name&#39;: &#39;pearson_baseline&#39;, &#39;user_based&#39;: False, &#39;min_support&#39;: 2, &#39;shrinkage&#39;: 80}, &#39;k&#39;: 40}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[121]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sim_options_item_item</span><span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;pearson_baseline&#39;</span><span class="p">,</span> <span class="s1">&#39;user_based&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;min_support&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;shrinkage&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">}</span>

<span class="n">bsl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;sgd&#39;</span><span class="p">}</span> 

<span class="n">algo_item_item</span> <span class="o">=</span> <span class="n">KNNBaseline</span><span class="p">(</span><span class="n">k</span> <span class="o">=</span> <span class="n">gsearch_item_item</span><span class="o">.</span><span class="n">best_params</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">],</span> <span class="n">sim_options</span> <span class="o">=</span> <span class="n">sim_options_item_item</span><span class="p">,</span> <span class="n">bsl_options</span><span class="o">=</span><span class="n">bsl_options</span><span class="p">)</span>

<span class="n">train_result_item_item</span><span class="p">,</span> <span class="n">test_result_item_item</span> <span class="o">=</span> <span class="n">run_surprise</span><span class="p">(</span><span class="n">algo_item_item</span><span class="p">,</span> <span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span><span class="p">,</span> <span class="s2">&quot;KNNBaseline_Item&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model...
Estimating biases using sgd...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Done. time taken : 0:00:01.287097 

Evaluating the model with train data..
time taken : 0:00:09.435202
---------------
Train Data
---------------
RMSE : 0.32584796251610554

MAPE : 8.447062581998374

adding train results in the dictionary..

Evaluating for test data...
time taken : 0:00:00.073831
---------------
Test Data
---------------
RMSE : 1.072758832653683

MAPE : 35.02269653015042

storing the test results in test dictionary...

---------------------------------------------
Total time taken to run this algorithm : 0:00:10.798093
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[122]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="n">train_result_item_item</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">test_result_item_item</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;rmse&#39;: 0.32584796251610554, &#39;mape&#39;: 8.447062581998374, &#39;predictions&#39;: array([3.86795834, 3.07630234, 3.40117708, ..., 3.        , 4.        ,
       4.        ])}
{&#39;rmse&#39;: 1.072758832653683, &#39;mape&#39;: 35.02269653015042, &#39;predictions&#39;: array([3.58167938, 3.58167938, 3.58167938, ..., 3.58167938, 3.58167938,
       3.58167938])}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[123]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># we specify , how to compute similarities and what to consider with sim_options to our algorithm</span>

<span class="c1"># &#39;user_based&#39; : Fals =&gt; this considers the similarities of movies instead of users</span>

<span class="n">sim_options_item_item</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user_based&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
               <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;pearson_baseline&#39;</span><span class="p">,</span>
               <span class="s1">&#39;shrinkage&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
               <span class="s1">&#39;min_support&#39;</span><span class="p">:</span> <span class="mi">2</span>
              <span class="p">}</span> 
<span class="c1"># we keep other parameters like regularization parameter and learning_rate as default values.</span>
<span class="n">bsl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;sgd&#39;</span><span class="p">}</span>


<span class="n">knn_bsl_m</span> <span class="o">=</span> <span class="n">KNNBaseline</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">sim_options</span> <span class="o">=</span> <span class="n">sim_options_item_item</span><span class="p">,</span> <span class="n">bsl_options</span> <span class="o">=</span> <span class="n">bsl_options</span><span class="p">)</span>

<span class="n">knn_bsl_m_train_results</span><span class="p">,</span> <span class="n">knn_bsl_m_test_results</span> <span class="o">=</span> <span class="n">run_surprise</span><span class="p">(</span><span class="n">knn_bsl_m</span><span class="p">,</span> <span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model...
Estimating biases using sgd...
Computing the pearson_baseline similarity matrix...
Done computing similarity matrix.
Done. time taken : 0:00:01.288702 

Evaluating the model with train data..
time taken : 0:00:09.469063
---------------
Train Data
---------------
RMSE : 0.32584796251610554

MAPE : 8.447062581998374

adding train results in the dictionary..

Evaluating for test data...
time taken : 0:00:00.139195
---------------
Test Data
---------------
RMSE : 1.072758832653683

MAPE : 35.02269653015042

storing the test results in test dictionary...

---------------------------------------------
Total time taken to run this algorithm : 0:00:10.898924
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[124]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Just store these error metrics in our models_evaluation datastructure</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;knn_bsl_m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">knn_bsl_m_train_results</span> 
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;knn_bsl_m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">knn_bsl_m_test_results</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[125]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="n">knn_bsl_m_train_results</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">knn_bsl_m_test_results</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;rmse&#39;: 0.32584796251610554, &#39;mape&#39;: 8.447062581998374, &#39;predictions&#39;: array([3.86795834, 3.07630234, 3.40117708, ..., 3.        , 4.        ,
       4.        ])}
{&#39;rmse&#39;: 1.072758832653683, &#39;mape&#39;: 35.02269653015042, &#39;predictions&#39;: array([3.58167938, 3.58167938, 3.58167938, ..., 3.58167938, 3.58167938,
       3.58167938])}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.4.5 XGBoost with initial 13 features + Surprise Baseline predictor + KNNBaseline predictor </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><ul>
<li><ul>
<li>First we will run XGBoost with predictions from both KNN's ( that uses User_User and Item_Item similarities along with our previous features.</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><ul>
<li><ul>
<li>Then we will run XGBoost with just predictions form both knn models and preditions from our baseline model. </li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Preparing Train data </strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[126]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># add the predicted values from both knns to this dataframe</span>
<span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;knn_bsl_u&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;knn_bsl_u&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>
<span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;knn_bsl_m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;knn_bsl_m&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>

<span class="n">reg_train</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[126]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>movie</th>
      <th>GAvg</th>
      <th>sur1</th>
      <th>sur2</th>
      <th>sur3</th>
      <th>sur4</th>
      <th>sur5</th>
      <th>smr1</th>
      <th>smr2</th>
      <th>smr3</th>
      <th>smr4</th>
      <th>smr5</th>
      <th>UAvg</th>
      <th>MAvg</th>
      <th>rating</th>
      <th>bslpr</th>
      <th>knn_bsl_u</th>
      <th>knn_bsl_m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>53406</td>
      <td>33</td>
      <td>3.581679</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>3.370370</td>
      <td>4.092437</td>
      <td>4</td>
      <td>3.898982</td>
      <td>3.926642</td>
      <td>3.867958</td>
    </tr>
    <tr>
      <th>1</th>
      <td>99540</td>
      <td>33</td>
      <td>3.581679</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>3.555556</td>
      <td>4.092437</td>
      <td>3</td>
      <td>3.371403</td>
      <td>3.135532</td>
      <td>3.076302</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Preparing Test data  </strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[127]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;knn_bsl_u&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;knn_bsl_u&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>
<span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;knn_bsl_m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;knn_bsl_m&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>

<span class="n">reg_test_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[127]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>movie</th>
      <th>GAvg</th>
      <th>sur1</th>
      <th>sur2</th>
      <th>sur3</th>
      <th>sur4</th>
      <th>sur5</th>
      <th>smr1</th>
      <th>smr2</th>
      <th>smr3</th>
      <th>smr4</th>
      <th>smr5</th>
      <th>UAvg</th>
      <th>MAvg</th>
      <th>rating</th>
      <th>bslpr</th>
      <th>knn_bsl_u</th>
      <th>knn_bsl_m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>808635</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>5</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
    </tr>
    <tr>
      <th>1</th>
      <td>941866</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>4</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[128]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># prepare the train data....</span>
<span class="n">x_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;movie&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>

<span class="c1"># prepare the train data....</span>
<span class="n">x_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="s1">&#39;movie&#39;</span><span class="p">,</span><span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>

<span class="n">params_xgboost</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;learning_rate&#39;</span> <span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span>
             <span class="s1">&#39;n_estimators&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">900</span><span class="p">),</span>
             <span class="s1">&#39;max_depth&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">),</span>
             <span class="s1">&#39;min_child_weight&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
             <span class="s1">&#39;reg_alpha&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span>
             <span class="s1">&#39;reg_lambda&#39;</span><span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span>
             <span class="s1">&#39;colsample_bytree&#39;</span><span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span><span class="mf">0.3</span><span class="p">)}</span>

<span class="c1"># declare the model</span>
<span class="n">xgb_knn_bsl</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">XGBRegressor</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">xgb_best_knn_sbl</span> <span class="o">=</span> <span class="n">RandomizedSearchCV</span><span class="p">(</span><span class="n">xgb_knn_bsl</span><span class="p">,</span> <span class="n">param_distributions</span><span class="o">=</span> <span class="n">params_xgboost</span><span class="p">,</span><span class="n">refit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scoring</span> <span class="o">=</span> <span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">,</span><span class="n">n_jobs</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> 

<span class="n">xgb_best_knn_sbl</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">best_para_xgb_best_knn_sbl</span> <span class="o">=</span> <span class="n">xgb_best_knn_sbl</span><span class="o">.</span><span class="n">best_params_</span>
<span class="n">xgb_best_knn_sbl</span> <span class="o">=</span> <span class="n">xgb_knn_bsl</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">best_para_xgb_best_knn_sbl</span><span class="p">)</span>

<span class="c1"># initialize Our first XGBoost model...</span>
<span class="c1">#xgb_bsl = xgb.XGBRegressor(silent=False, n_jobs=13, random_state=15)</span>
<span class="n">train_results</span><span class="p">,</span> <span class="n">test_results</span> <span class="o">=</span> <span class="n">run_xgboost</span><span class="p">(</span><span class="n">xgb_best_knn_sbl</span><span class="p">,</span> <span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>

<span class="c1"># store the results in models_evaluations dictionaries</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;xgb_knn_bsl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_results</span>
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;xgb_knn_bsl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_results</span>


<span class="n">xgb</span><span class="o">.</span><span class="n">plot_importance</span><span class="p">(</span><span class="n">xgb_best_knn_sbl</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model..
[22:46:08] WARNING: src/objective/regression_obj.cu:152: reg:linear is now deprecated in favor of reg:squarederror.
Done. Time taken : 0:00:23.378038

Done 

Evaluating the model with TRAIN data...
Evaluating Test data

TEST DATA
------------------------------
RMSE :  1.1007591883189165
MAPE :  33.372730607959134
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>





<div id="08a0031b-3696-469e-a67f-90654b733e69"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#08a0031b-3696-469e-a67f-90654b733e69');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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" width="639.8608748714686">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.4.6 Matrix Factorization Techniques </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 4.4.6.1 SVD Matrix Factorization User Movie intractions </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[129]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">surprise</span> <span class="k">import</span> <span class="n">SVD</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="http://surprise.readthedocs.io/en/stable/matrix_factorization.html#surprise.prediction_algorithms.matrix_factorization.SVD">http://surprise.readthedocs.io/en/stable/matrix_factorization.html#surprise.prediction_algorithms.matrix_factorization.SVD</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="---Predicted-Rating-:-">- <strong> Predicted Rating : </strong><a class="anchor-link" href="#---Predicted-Rating-:-">&#182;</a></h2>
<pre><code>- $ \large  \hat r_{ui} = \mu + b_u + b_i + q_i^Tp_u $

    - $\pmb q_i$ - Representation of item(movie) in latent factor space

    - $\pmb p_u$ - Representation of user in new latent factor space</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>A BASIC MATRIX FACTORIZATION MODEL in  <a href="https://datajobs.com/data-science-repo/Recommender-Systems-[Netflix].pdf">https://datajobs.com/data-science-repo/Recommender-Systems-[Netflix].pdf</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="--Optimization-problem-with-user-item-interactions-and-regularization-(to-avoid-overfitting)">- <strong>Optimization problem with user item interactions and regularization (to avoid overfitting)</strong><a class="anchor-link" href="#--Optimization-problem-with-user-item-interactions-and-regularization-(to-avoid-overfitting)">&#182;</a></h2>
<pre><code>- $\large \sum_{r_{ui} \in R_{train}} \left(r_{ui} - \hat{r}_{ui} \right)^2 +
</code></pre>
<p>\lambda\left(b_i^2 + b_u^2 + ||q_i||^2 + ||p_u||^2\right) $</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[130]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># initiallize the model</span>

<span class="n">param_grid_svd</span>  <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;n_factors&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">100</span><span class="p">]}</span> 
<span class="n">gridsearch_svd</span> <span class="o">=</span> <span class="n">GridSearchCV</span> <span class="p">(</span><span class="n">SVD</span><span class="p">,</span><span class="n">param_grid_svd</span><span class="p">,</span><span class="n">measures</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>
<span class="n">gridsearch_svd</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train_data</span><span class="p">)</span>

<span class="c1"># best RMSE score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gridsearch_svd</span><span class="o">.</span><span class="n">best_score</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>

<span class="c1"># combination of parameters that gave the best RMSE score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gridsearch_svd</span><span class="o">.</span><span class="n">best_params</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0.9338151722798453
{&#39;n_factors&#39;: 10}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[131]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#svd = SVD(n_factors=5, biased=True, random_state=15, verbose=True)</span>
<span class="n">svd</span> <span class="o">=</span> <span class="n">SVD</span><span class="p">(</span><span class="n">n_factors</span> <span class="o">=</span> <span class="n">gridsearch_svd</span><span class="o">.</span><span class="n">best_params</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">][</span><span class="s1">&#39;n_factors&#39;</span><span class="p">],</span> <span class="n">biased</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">svd_train_results</span><span class="p">,</span> <span class="n">svd_test_results</span> <span class="o">=</span> <span class="n">run_surprise</span><span class="p">(</span><span class="n">svd</span><span class="p">,</span> <span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model...
Processing epoch 0
Processing epoch 1
Processing epoch 2
Processing epoch 3
Processing epoch 4
Processing epoch 5
Processing epoch 6
Processing epoch 7
Processing epoch 8
Processing epoch 9
Processing epoch 10
Processing epoch 11
Processing epoch 12
Processing epoch 13
Processing epoch 14
Processing epoch 15
Processing epoch 16
Processing epoch 17
Processing epoch 18
Processing epoch 19
Done. time taken : 0:00:02.748282 

Evaluating the model with train data..
time taken : 0:00:01.290780
---------------
Train Data
---------------
RMSE : 0.8307338665721961

MAPE : 25.31359012144106

adding train results in the dictionary..

Evaluating for test data...
time taken : 0:00:00.071807
---------------
Test Data
---------------
RMSE : 1.0726127314093175

MAPE : 35.01946500481579

storing the test results in test dictionary...

---------------------------------------------
Total time taken to run this algorithm : 0:00:04.112863
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[132]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Just store these error metrics in our models_evaluation datastructure</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;svd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">svd_train_results</span> 
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;svd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">svd_test_results</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[133]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="n">svd_train_results</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">svd_test_results</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;rmse&#39;: 0.8307338665721961, &#39;mape&#39;: 25.31359012144106, &#39;predictions&#39;: array([3.90245455, 3.36500947, 2.96824241, ..., 2.96005437, 3.44915832,
       3.80817953])}
{&#39;rmse&#39;: 1.0726127314093175, &#39;mape&#39;: 35.01946500481579, &#39;predictions&#39;: array([3.58167938, 3.58167938, 3.58167938, ..., 3.58167938, 3.58167938,
       3.58167938])}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4> 4.4.6.2 SVD Matrix Factorization with implicit feedback from user ( user rated movies ) </h4>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[134]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">surprise</span> <span class="k">import</span> <span class="n">SVDpp</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>-----&gt;  2.5 Implicit Feedback in <a href="http://courses.ischool.berkeley.edu/i290-dm/s11/SECURE/a1-koren.pdf">http://courses.ischool.berkeley.edu/i290-dm/s11/SECURE/a1-koren.pdf</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="---Predicted-Rating-:-">- <strong> Predicted Rating : </strong><a class="anchor-link" href="#---Predicted-Rating-:-">&#182;</a></h2>
<pre><code>- $ \large \hat{r}_{ui} = \mu + b_u + b_i + q_i^T\left(p_u +
|I_u|^{-\frac{1}{2}} \sum_{j \in I_u}y_j\right) $ </code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>$ \pmb{I_u}$ --- the set of all items rated by user u</li>
</ul>
<ul>
<li>$\pmb{y_j}$ --- Our new set of item factors that capture implicit ratings.  </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="--Optimization-problem-with-user-item-interactions-and-regularization-(to-avoid-overfitting)">- <strong>Optimization problem with user item interactions and regularization (to avoid overfitting)</strong><a class="anchor-link" href="#--Optimization-problem-with-user-item-interactions-and-regularization-(to-avoid-overfitting)">&#182;</a></h2>
<pre><code>- $ \large \sum_{r_{ui} \in R_{train}} \left(r_{ui} - \hat{r}_{ui} \right)^2 +
</code></pre>
<p>\lambda\left(b_i^2 + b_u^2 + ||q_i||^2 + ||p_u||^2 + ||y_j||^2\right) $</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[135]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#param_grid_svdpp = {&#39;n_factors&#39;: [40,50,60,70,100,140], &#39;lr_all&#39;: [ 0.01,0.02, 0.05,0.08, 0.1,0.3]}</span>
<span class="n">param_grid_svdpp</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;n_factors&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">140</span><span class="p">]}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[136]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">gsearch_svdpp</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">SVDpp</span><span class="p">,</span> <span class="n">param_grid_svdpp</span><span class="p">,</span> <span class="n">measures</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>

<span class="n">gsearch_svdpp</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[137]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># best RMSE score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gsearch_svdpp</span><span class="o">.</span><span class="n">best_score</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>

<span class="c1"># combination of parameters that gave the best RMSE score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gsearch_svdpp</span><span class="o">.</span><span class="n">best_params</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>0.9271131385346235
{&#39;n_factors&#39;: 40}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[138]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># initiallize the model</span>
<span class="n">svdpp_best_algo</span> <span class="o">=</span> <span class="n">SVDpp</span><span class="p">(</span><span class="n">n_factors</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">svdpp_train_results</span><span class="p">,</span> <span class="n">svdpp_test_results</span> <span class="o">=</span> <span class="n">run_surprise</span><span class="p">(</span><span class="n">svdpp_best_algo</span><span class="p">,</span> <span class="n">trainset</span><span class="p">,</span> <span class="n">testset</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Just store these error metrics in our models_evaluation datastructure</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;svdpp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">svdpp_train_results</span> 
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;svdpp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">svdpp_test_results</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model...
 processing epoch 0
 processing epoch 1
 processing epoch 2
 processing epoch 3
 processing epoch 4
 processing epoch 5
 processing epoch 6
 processing epoch 7
 processing epoch 8
 processing epoch 9
 processing epoch 10
 processing epoch 11
 processing epoch 12
 processing epoch 13
 processing epoch 14
 processing epoch 15
 processing epoch 16
 processing epoch 17
 processing epoch 18
 processing epoch 19
Done. time taken : 0:01:43.157537 

Evaluating the model with train data..
time taken : 0:00:06.249841
---------------
Train Data
---------------
RMSE : 0.6347151312964496

MAPE : 18.429439395749334

adding train results in the dictionary..

Evaluating for test data...
time taken : 0:00:00.063861
---------------
Test Data
---------------
RMSE : 1.0727362462274097

MAPE : 35.033714636883076

storing the test results in test dictionary...

---------------------------------------------
Total time taken to run this algorithm : 0:01:49.473170
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.4.7 XgBoost with 13 features + Surprise Baseline + Surprise KNNbaseline + MF Techniques </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Preparing Train data</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[139]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># add the predicted values from both knns to this dataframe</span>
<span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;svd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;svd&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>
<span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;svdpp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;svdpp&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>

<span class="n">reg_train</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[139]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>movie</th>
      <th>GAvg</th>
      <th>sur1</th>
      <th>sur2</th>
      <th>sur3</th>
      <th>sur4</th>
      <th>sur5</th>
      <th>smr1</th>
      <th>smr2</th>
      <th>...</th>
      <th>smr4</th>
      <th>smr5</th>
      <th>UAvg</th>
      <th>MAvg</th>
      <th>rating</th>
      <th>bslpr</th>
      <th>knn_bsl_u</th>
      <th>knn_bsl_m</th>
      <th>svd</th>
      <th>svdpp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>53406</td>
      <td>33</td>
      <td>3.581679</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>...</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>3.370370</td>
      <td>4.092437</td>
      <td>4</td>
      <td>3.898982</td>
      <td>3.926642</td>
      <td>3.867958</td>
      <td>3.902455</td>
      <td>4.100918</td>
    </tr>
    <tr>
      <th>1</th>
      <td>99540</td>
      <td>33</td>
      <td>3.581679</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>4.0</td>
      <td>...</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>3.555556</td>
      <td>4.092437</td>
      <td>3</td>
      <td>3.371403</td>
      <td>3.135532</td>
      <td>3.076302</td>
      <td>3.365009</td>
      <td>3.500914</td>
    </tr>
  </tbody>
</table>
<p>2 rows × 21 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Preparing Test data  </strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[140]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;svd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;svd&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>
<span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;svdpp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;svdpp&#39;</span><span class="p">][</span><span class="s1">&#39;predictions&#39;</span><span class="p">]</span>

<span class="n">reg_test_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[140]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>user</th>
      <th>movie</th>
      <th>GAvg</th>
      <th>sur1</th>
      <th>sur2</th>
      <th>sur3</th>
      <th>sur4</th>
      <th>sur5</th>
      <th>smr1</th>
      <th>smr2</th>
      <th>...</th>
      <th>smr4</th>
      <th>smr5</th>
      <th>UAvg</th>
      <th>MAvg</th>
      <th>rating</th>
      <th>bslpr</th>
      <th>knn_bsl_u</th>
      <th>knn_bsl_m</th>
      <th>svd</th>
      <th>svdpp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>808635</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>...</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>5</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
    </tr>
    <tr>
      <th>1</th>
      <td>941866</td>
      <td>71</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>...</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>4</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
      <td>3.581679</td>
    </tr>
  </tbody>
</table>
<p>2 rows × 21 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[141]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># prepare x_train and y_train</span>
<span class="n">x_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;movie&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">,],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>

<span class="c1"># prepare test data</span>
<span class="n">x_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;movie&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>

<span class="n">params_xgboost</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;learning_rate&#39;</span> <span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span>
             <span class="s1">&#39;n_estimators&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">900</span><span class="p">),</span>
             <span class="s1">&#39;max_depth&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">),</span>
             <span class="s1">&#39;min_child_weight&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span>
             <span class="s1">&#39;reg_alpha&#39;</span><span class="p">:</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span>
             <span class="s1">&#39;reg_lambda&#39;</span><span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span>
             <span class="s1">&#39;colsample_bytree&#39;</span><span class="p">:</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span><span class="mf">0.3</span><span class="p">)}</span>

<span class="n">final_xgb_reg</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">XGBRegressor</span><span class="p">(</span><span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">xgb_final</span> <span class="o">=</span> <span class="n">RandomizedSearchCV</span><span class="p">(</span><span class="n">final_xgb_reg</span><span class="p">,</span> <span class="n">param_distributions</span><span class="o">=</span> <span class="n">params_xgboost</span><span class="p">,</span><span class="n">refit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scoring</span> <span class="o">=</span> <span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">,</span><span class="n">n_jobs</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> 
<span class="n">xgb_final</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="n">best_para_xgb_final</span> <span class="o">=</span> <span class="n">xgb_final</span><span class="o">.</span><span class="n">best_params_</span>
<span class="n">xgb_best_final_para</span> <span class="o">=</span> <span class="n">final_xgb_reg</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">best_para_xgb_final</span><span class="p">)</span>

<span class="c1"># initialize Our first XGBoost model...</span>
<span class="c1">#xgb_bsl = xgb.XGBRegressor(silent=False, n_jobs=13, random_state=15)</span>


<span class="n">train_results</span><span class="p">,</span> <span class="n">test_results</span> <span class="o">=</span> <span class="n">run_xgboost</span><span class="p">(</span><span class="n">xgb_best_final_para</span><span class="p">,</span> <span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>

<span class="c1"># store the results in models_evaluations dictionaries</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;xgb_final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_results</span>
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;xgb_final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_results</span>


<span class="n">xgb</span><span class="o">.</span><span class="n">plot_importance</span><span class="p">(</span><span class="n">xgb_best_final_para</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model..
[00:13:16] WARNING: src/objective/regression_obj.cu:152: reg:linear is now deprecated in favor of reg:squarederror.
Done. Time taken : 0:00:12.684384

Done 

Evaluating the model with TRAIN data...
Evaluating Test data

TEST DATA
------------------------------
RMSE :  1.1056351627900394
MAPE :  33.23746282066279
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>





<div id="5df7708c-a582-43d5-bdb8-6b25c4cf4a3f"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#5df7708c-a582-43d5-bdb8-6b25c4cf4a3f');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,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" width="639.8608748714686">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3> 4.4.8 XgBoost with Surprise Baseline + Surprise KNNbaseline + MF Techniques </h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[142]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># prepare train data</span>
<span class="n">x_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="p">[[</span><span class="s1">&#39;knn_bsl_u&#39;</span><span class="p">,</span> <span class="s1">&#39;knn_bsl_m&#39;</span><span class="p">,</span> <span class="s1">&#39;svd&#39;</span><span class="p">,</span> <span class="s1">&#39;svdpp&#39;</span><span class="p">]]</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">reg_train</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>

<span class="c1"># test data</span>
<span class="n">x_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="p">[[</span><span class="s1">&#39;knn_bsl_u&#39;</span><span class="p">,</span> <span class="s1">&#39;knn_bsl_m&#39;</span><span class="p">,</span> <span class="s1">&#39;svd&#39;</span><span class="p">,</span> <span class="s1">&#39;svdpp&#39;</span><span class="p">]]</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">reg_test_df</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span>


<span class="c1">#xgb_all_models = xgb.XGBRegressor(n_jobs=10, random_state=15)</span>
<span class="c1">#train_results, test_results = run_xgboost(xgb_all_models, x_train, y_train, x_test, y_test)</span>

<span class="c1"># store the results in models_evaluations dictionaries</span>
<span class="c1">#models_evaluation_train[&#39;xgb_all_models&#39;] = train_results</span>
<span class="c1">#models_evaluation_test[&#39;xgb_all_models&#39;] = test_results</span>

<span class="c1">#xgb.plot_importance(xgb_all_models)</span>
<span class="c1">#plt.show()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[143]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">xgb_all_models</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">XGBRegressor</span><span class="p">(</span><span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">xgb_final_all_models</span> <span class="o">=</span> <span class="n">RandomizedSearchCV</span><span class="p">(</span><span class="n">xgb_all_models</span><span class="p">,</span> <span class="n">param_distributions</span><span class="o">=</span> <span class="n">params_xgboost</span><span class="p">,</span><span class="n">refit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scoring</span> <span class="o">=</span> <span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">,</span><span class="n">n_jobs</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> 
<span class="n">xgb_final_all_models</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="n">best_para_xgb_final_all_models</span> <span class="o">=</span> <span class="n">xgb_final_all_models</span><span class="o">.</span><span class="n">best_params_</span>
<span class="n">xgb_best_final_para_all_model</span> <span class="o">=</span> <span class="n">xgb_all_models</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">best_para_xgb_final_all_models</span><span class="p">)</span>

<span class="c1"># initialize Our first XGBoost model...</span>
<span class="c1">#xgb_bsl = xgb.XGBRegressor(silent=False, n_jobs=13, random_state=15)</span>


<span class="n">train_results</span><span class="p">,</span> <span class="n">test_results</span> <span class="o">=</span> <span class="n">run_xgboost</span><span class="p">(</span><span class="n">xgb_best_final_para_all_model</span><span class="p">,</span> <span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>

<span class="c1"># store the results in models_evaluations dictionaries</span>
<span class="n">models_evaluation_train</span><span class="p">[</span><span class="s1">&#39;xgb_final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_results</span>
<span class="n">models_evaluation_test</span><span class="p">[</span><span class="s1">&#39;xgb_final&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_results</span>


<span class="n">xgb</span><span class="o">.</span><span class="n">plot_importance</span><span class="p">(</span><span class="n">xgb_best_final_para_all_model</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Training the model..
[08:13:08] WARNING: src/objective/regression_obj.cu:152: reg:linear is now deprecated in favor of reg:squarederror.
Done. Time taken : 0:00:01.434179

Done 

Evaluating the model with TRAIN data...
Evaluating Test data

TEST DATA
------------------------------
RMSE :  1.075200131416626
MAPE :  35.110332805561235
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>





<div id="e05c7bfb-e1b8-4d0d-b200-70869d2838ae"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#e05c7bfb-e1b8-4d0d-b200-70869d2838ae');
/* Put everything inside the global mpl namespace */
window.mpl = {};


mpl.get_websocket_type = function() {
    if (typeof(WebSocket) !== 'undefined') {
        return WebSocket;
    } else if (typeof(MozWebSocket) !== 'undefined') {
        return MozWebSocket;
    } else {
        alert('Your browser does not have WebSocket support. ' +
              'Please try Chrome, Safari or Firefox ≥ 6. ' +
              'Firefox 4 and 5 are also supported but you ' +
              'have to enable WebSockets in about:config.');
    };
}

mpl.figure = function(figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = (this.ws.binaryType != undefined);

    if (!this.supports_binary) {
        var warnings = document.getElementById("mpl-warnings");
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent = (
                "This browser does not support binary websocket messages. " +
                    "Performance may be slow.");
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = $('<div/>');
    this._root_extra_style(this.root)
    this.root.attr('style', 'display: inline-block');

    $(parent_element).append(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen =  function () {
            fig.send_message("supports_binary", {value: fig.supports_binary});
            fig.send_message("send_image_mode", {});
            if (mpl.ratio != 1) {
                fig.send_message("set_dpi_ratio", {'dpi_ratio': mpl.ratio});
            }
            fig.send_message("refresh", {});
        }

    this.imageObj.onload = function() {
            if (fig.image_mode == 'full') {
                // Full images could contain transparency (where diff images
                // almost always do), so we need to clear the canvas so that
                // there is no ghosting.
                fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
            }
            fig.context.drawImage(fig.imageObj, 0, 0);
        };

    this.imageObj.onunload = function() {
        fig.ws.close();
    }

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
}

mpl.figure.prototype._init_header = function() {
    var titlebar = $(
        '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ' +
        'ui-helper-clearfix"/>');
    var titletext = $(
        '<div class="ui-dialog-title" style="width: 100%; ' +
        'text-align: center; padding: 3px;"/>');
    titlebar.append(titletext)
    this.root.append(titlebar);
    this.header = titletext[0];
}



mpl.figure.prototype._canvas_extra_style = function(canvas_div) {

}


mpl.figure.prototype._root_extra_style = function(canvas_div) {

}

mpl.figure.prototype._init_canvas = function() {
    var fig = this;

    var canvas_div = $('<div/>');

    canvas_div.attr('style', 'position: relative; clear: both; outline: 0');

    function canvas_keyboard_event(event) {
        return fig.key_event(event, event['data']);
    }

    canvas_div.keydown('key_press', canvas_keyboard_event);
    canvas_div.keyup('key_release', canvas_keyboard_event);
    this.canvas_div = canvas_div
    this._canvas_extra_style(canvas_div)
    this.root.append(canvas_div);

    var canvas = $('<canvas/>');
    canvas.addClass('mpl-canvas');
    canvas.attr('style', "left: 0; top: 0; z-index: 0; outline: 0")

    this.canvas = canvas[0];
    this.context = canvas[0].getContext("2d");

    var backingStore = this.context.backingStorePixelRatio ||
	this.context.webkitBackingStorePixelRatio ||
	this.context.mozBackingStorePixelRatio ||
	this.context.msBackingStorePixelRatio ||
	this.context.oBackingStorePixelRatio ||
	this.context.backingStorePixelRatio || 1;

    mpl.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband = $('<canvas/>');
    rubberband.attr('style', "position: absolute; left: 0; top: 0; z-index: 1;")

    var pass_mouse_events = true;

    canvas_div.resizable({
        start: function(event, ui) {
            pass_mouse_events = false;
        },
        resize: function(event, ui) {
            fig.request_resize(ui.size.width, ui.size.height);
        },
        stop: function(event, ui) {
            pass_mouse_events = true;
            fig.request_resize(ui.size.width, ui.size.height);
        },
    });

    function mouse_event_fn(event) {
        if (pass_mouse_events)
            return fig.mouse_event(event, event['data']);
    }

    rubberband.mousedown('button_press', mouse_event_fn);
    rubberband.mouseup('button_release', mouse_event_fn);
    // Throttle sequential mouse events to 1 every 20ms.
    rubberband.mousemove('motion_notify', mouse_event_fn);

    rubberband.mouseenter('figure_enter', mouse_event_fn);
    rubberband.mouseleave('figure_leave', mouse_event_fn);

    canvas_div.on("wheel", function (event) {
        event = event.originalEvent;
        event['data'] = 'scroll'
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        mouse_event_fn(event);
    });

    canvas_div.append(canvas);
    canvas_div.append(rubberband);

    this.rubberband = rubberband;
    this.rubberband_canvas = rubberband[0];
    this.rubberband_context = rubberband[0].getContext("2d");
    this.rubberband_context.strokeStyle = "#000000";

    this._resize_canvas = function(width, height) {
        // Keep the size of the canvas, canvas container, and rubber band
        // canvas in synch.
        canvas_div.css('width', width)
        canvas_div.css('height', height)

        canvas.attr('width', width * mpl.ratio);
        canvas.attr('height', height * mpl.ratio);
        canvas.attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');

        rubberband.attr('width', width);
        rubberband.attr('height', height);
    }

    // Set the figure to an initial 600x600px, this will subsequently be updated
    // upon first draw.
    this._resize_canvas(600, 600);

    // Disable right mouse context menu.
    $(this.rubberband_canvas).bind("contextmenu",function(e){
        return false;
    });

    function set_focus () {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            // put a spacer in here.
            continue;
        }
        var button = $('<button/>');
        button.addClass('ui-button ui-widget ui-state-default ui-corner-all ' +
                        'ui-button-icon-only');
        button.attr('role', 'button');
        button.attr('aria-disabled', 'false');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);

        var icon_img = $('<span/>');
        icon_img.addClass('ui-button-icon-primary ui-icon');
        icon_img.addClass(image);
        icon_img.addClass('ui-corner-all');

        var tooltip_span = $('<span/>');
        tooltip_span.addClass('ui-button-text');
        tooltip_span.html(tooltip);

        button.append(icon_img);
        button.append(tooltip_span);

        nav_element.append(button);
    }

    var fmt_picker_span = $('<span/>');

    var fmt_picker = $('<select/>');
    fmt_picker.addClass('mpl-toolbar-option ui-widget ui-widget-content');
    fmt_picker_span.append(fmt_picker);
    nav_element.append(fmt_picker_span);
    this.format_dropdown = fmt_picker[0];

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = $(
            '<option/>', {selected: fmt === mpl.default_extension}).html(fmt);
        fmt_picker.append(option);
    }

    // Add hover states to the ui-buttons
    $( ".ui-button" ).hover(
        function() { $(this).addClass("ui-state-hover");},
        function() { $(this).removeClass("ui-state-hover");}
    );

    var status_bar = $('<span class="mpl-message"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];
}

mpl.figure.prototype.request_resize = function(x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', {'width': x_pixels, 'height': y_pixels});
}

mpl.figure.prototype.send_message = function(type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
}

mpl.figure.prototype.send_draw_message = function() {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({type: "draw", figure_id: this.id}));
    }
}


mpl.figure.prototype.handle_save = function(fig, msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
}


mpl.figure.prototype.handle_resize = function(fig, msg) {
    var size = msg['size'];
    if (size[0] != fig.canvas.width || size[1] != fig.canvas.height) {
        fig._resize_canvas(size[0], size[1]);
        fig.send_message("refresh", {});
    };
}

mpl.figure.prototype.handle_rubberband = function(fig, msg) {
    var x0 = msg['x0'] / mpl.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / mpl.ratio;
    var x1 = msg['x1'] / mpl.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / mpl.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0, 0, fig.canvas.width / mpl.ratio, fig.canvas.height / mpl.ratio);

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
}

mpl.figure.prototype.handle_figure_label = function(fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
}

mpl.figure.prototype.handle_cursor = function(fig, msg) {
    var cursor = msg['cursor'];
    switch(cursor)
    {
    case 0:
        cursor = 'pointer';
        break;
    case 1:
        cursor = 'default';
        break;
    case 2:
        cursor = 'crosshair';
        break;
    case 3:
        cursor = 'move';
        break;
    }
    fig.rubberband_canvas.style.cursor = cursor;
}

mpl.figure.prototype.handle_message = function(fig, msg) {
    fig.message.textContent = msg['message'];
}

mpl.figure.prototype.handle_draw = function(fig, msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
}

mpl.figure.prototype.handle_image_mode = function(fig, msg) {
    fig.image_mode = msg['mode'];
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Called whenever the canvas gets updated.
    this.send_message("ack", {});
}

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function(fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            /* FIXME: We get "Resource interpreted as Image but
             * transferred with MIME type text/plain:" errors on
             * Chrome.  But how to set the MIME type?  It doesn't seem
             * to be part of the websocket stream */
            evt.data.type = "image/png";

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src);
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                evt.data);
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }
        else if (typeof evt.data === 'string' && evt.data.slice(0, 21) == "data:image/png;base64") {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig["handle_" + msg_type];
        } catch (e) {
            console.log("No handler for the '" + msg_type + "' message type: ", msg);
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log("Exception inside the 'handler_" + msg_type + "' callback:", e, e.stack, msg);
            }
        }
    };
}

// from http://stackoverflow.com/questions/1114465/getting-mouse-location-in-canvas
mpl.findpos = function(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;

    return {"x": x, "y": y};
};

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * http://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys (original) {
  return Object.keys(original).reduce(function (obj, key) {
    if (typeof original[key] !== 'object')
        obj[key] = original[key]
    return obj;
  }, {});
}

mpl.figure.prototype.mouse_event = function(event, name) {
    var canvas_pos = mpl.findpos(event)

    if (name === 'button_press')
    {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    var x = canvas_pos.x * mpl.ratio;
    var y = canvas_pos.y * mpl.ratio;

    this.send_message(name, {x: x, y: y, button: event.button,
                             step: event.step,
                             guiEvent: simpleKeys(event)});

    /* This prevents the web browser from automatically changing to
     * the text insertion cursor when the button is pressed.  We want
     * to control all of the cursor setting manually through the
     * 'cursor' event from matplotlib */
    event.preventDefault();
    return false;
}

mpl.figure.prototype._key_event_extra = function(event, name) {
    // Handle any extra behaviour associated with a key event
}

mpl.figure.prototype.key_event = function(event, name) {

    // Prevent repeat events
    if (name == 'key_press')
    {
        if (event.which === this._key)
            return;
        else
            this._key = event.which;
    }
    if (name == 'key_release')
        this._key = null;

    var value = '';
    if (event.ctrlKey && event.which != 17)
        value += "ctrl+";
    if (event.altKey && event.which != 18)
        value += "alt+";
    if (event.shiftKey && event.which != 16)
        value += "shift+";

    value += 'k';
    value += event.which.toString();

    this._key_event_extra(event, name);

    this.send_message(name, {key: value,
                             guiEvent: simpleKeys(event)});
    return false;
}

mpl.figure.prototype.toolbar_button_onclick = function(name) {
    if (name == 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message("toolbar_button", {name: name});
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function(tooltip) {
    this.message.textContent = tooltip;
};
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home icon-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left icon-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right icon-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Pan axes with left mouse, zoom with right", "fa fa-arrows icon-move", "pan"], ["Zoom", "Zoom to rectangle", "fa fa-square-o icon-check-empty", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o icon-save", "download"]];

mpl.extensions = ["eps", "jpeg", "pdf", "png", "ps", "raw", "svg", "tif"];

mpl.default_extension = "png";var comm_websocket_adapter = function(comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.close = function() {
        comm.close()
    };
    ws.send = function(m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function(msg) {
        //console.log('receiving', msg['content']['data'], msg);
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(msg['content']['data'])
    });
    return ws;
}

mpl.mpl_figure_comm = function(comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = $("#" + id);
    var ws_proxy = comm_websocket_adapter(comm)

    function ondownload(figure, format) {
        window.open(figure.imageObj.src);
    }

    var fig = new mpl.figure(id, ws_proxy,
                           ondownload,
                           element.get(0));

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element.get(0);
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error("Failed to find cell for figure", id, fig);
        return;
    }

    var output_index = fig.cell_info[2]
    var cell = fig.cell_info[0];

};

mpl.figure.prototype.handle_close = function(fig, msg) {
    var width = fig.canvas.width/mpl.ratio
    fig.root.unbind('remove')

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable()
    $(fig.parent_element).html('<img src="' + dataURL + '" width="' + width + '">');
    fig.close_ws(fig, msg);
}

mpl.figure.prototype.close_ws = function(fig, msg){
    fig.send_message('closing', msg);
    // fig.ws.close()
}

mpl.figure.prototype.push_to_output = function(remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width/mpl.ratio
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] = '<img src="' + dataURL + '" width="' + width + '">';
}

mpl.figure.prototype.updated_canvas_event = function() {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message("ack", {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () { fig.push_to_output() }, 1000);
}

mpl.figure.prototype._init_toolbar = function() {
    var fig = this;

    var nav_element = $('<div/>');
    nav_element.attr('style', 'width: 100%');
    this.root.append(nav_element);

    // Define a callback function for later on.
    function toolbar_event(event) {
        return fig.toolbar_button_onclick(event['data']);
    }
    function toolbar_mouse_event(event) {
        return fig.toolbar_button_onmouseover(event['data']);
    }

    for(var toolbar_ind in mpl.toolbar_items){
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) { continue; };

        var button = $('<button class="btn btn-default" href="#" title="' + name + '"><i class="fa ' + image + ' fa-lg"></i></button>');
        button.click(method_name, toolbar_event);
        button.mouseover(tooltip, toolbar_mouse_event);
        nav_element.append(button);
    }

    // Add the status bar.
    var status_bar = $('<span class="mpl-message" style="text-align:right; float: right;"/>');
    nav_element.append(status_bar);
    this.message = status_bar[0];

    // Add the close button to the window.
    var buttongrp = $('<div class="btn-group inline pull-right"></div>');
    var button = $('<button class="btn btn-mini btn-primary" href="#" title="Stop Interaction"><i class="fa fa-power-off icon-remove icon-large"></i></button>');
    button.click(function (evt) { fig.handle_close(fig, {}); } );
    button.mouseover('Stop Interaction', toolbar_mouse_event);
    buttongrp.append(button);
    var titlebar = this.root.find($('.ui-dialog-titlebar'));
    titlebar.prepend(buttongrp);
}

mpl.figure.prototype._root_extra_style = function(el){
    var fig = this
    el.on("remove", function(){
	fig.close_ws(fig, {});
    });
}

mpl.figure.prototype._canvas_extra_style = function(el){
    // this is important to make the div 'focusable
    el.attr('tabindex', 0)
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    }
    else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }

}

mpl.figure.prototype._key_event_extra = function(event, name) {
    var manager = IPython.notebook.keyboard_manager;
    if (!manager)
        manager = IPython.keyboard_manager;

    // Check for shift+enter
    if (event.shiftKey && event.which == 13) {
        this.canvas_div.blur();
        event.shiftKey = false;
        // Send a "J" for go to next cell
        event.which = 74;
        event.keyCode = 74;
        manager.command_mode();
        manager.handle_keydown(event);
    }
}

mpl.figure.prototype.handle_save = function(fig, msg) {
    fig.ondownload(fig, null);
}


mpl.find_output_cell = function(html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i=0; i<ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code'){
            for (var j=0; j<cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] == html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
}

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel != null) {
    IPython.notebook.kernel.comm_manager.register_target('matplotlib', mpl.mpl_figure_comm);
}

</script>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>



<div class="output_html rendered_html output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf8AAAF/CAYAAABHQcBmAAAgAElEQVR4Xu29CbRV1ZH/XzKIGlvttIpGE+xlOk6IAwaTjhpU4kDUKCoqNhonHCHiQARHxAlxiFOckLQTziNEcTkTkWgcmpbg0Bp1OaDSolHAoCj/Vbv/j98T3uPuu8+pe2/t+zlrsYD3dtWp8zm79vdUnXPPXWbhwoULhQ0CEIAABCAAgaYhsAzi3zTnmgOFAAQgAAEIBAKIPxMBAhCAAAQg0GQEEP8mO+EcLgQgAAEIQADxZw5AAAIQgAAEmowA4t9kJ5zDhQAEIAABCCD+zAEIQAACEIBAkxFA/JvshHO4EIAABCAAAcSfOQABCEAAAhBoMgKIf5OdcA4XAhCAAAQggPgzByAAAQhAAAJNRgDxb7ITzuFCAAIQgAAEEH/mAAQgAAEIQKDJCCD+TXbCOVwIQAACEIAA4s8cgAAEIAABCDQZAcS/yU44hwsBCEAAAhBA/JkDEIAABCAAgSYjgPg32QnncCEAAQhAAAKIP3MAAhCAAAQg0GQEEP8mO+EcLgQgAAEIQADxZw5AAAIQgAAEmowA4t9kJ5zDhQAEIAABCCD+zAEIQAACEIBAkxFA/JvshHO4EIAABCAAAcSfOQABCEAAAhBoMgKIf5OdcA4XAhCAAAQggPgzByAAAQhAAAJNRgDxb7ITzuFCAAIQgAAEEH/mAAQgAAEIQKDJCCD+TXbCOdzGJvDZZ5/JwoULZeWVV27sQEuK7uuvv5YPP/xQvve975XkETcQgEAMAcQ/hhJjINCKwHbbbSf/+7//Kx07dvwWl6OOOkoOO+ywQqy23HJLGTt2rGy88caF/FQyvv/+++WGG26QO++8s9JQ098PGTJENtlkEznkkENM94NzCEDg2wQQf2YEBKokoOI/bNgw2Wmnnaq0rDx8vfXWC4JsLf6VI6nNiIEDB0rv3r0R/9rgZi8QWEQA8WcyQKBKApXE/4MPPpCzzz5b/vKXv8gKK6wg/fv3l0GDBkmHDh3k73//u5x11lny/PPPy8cffyxrrLGGnHjiidKnTx/Zbbfd5NVXX5XllltORo0aJW+//bZMnz5drr766hDh7Nmz5ac//ak8+uijsvbaa4teKKh4ahW/5557ym9/+1u544475Lrrrgu+N9xwQznttNNk3XXXXeII7777bhk3bpxMnDhR9N9//OMfZc0115QHHnhAVllllbD/hx56KPxcb0Ho8ei+dew999wjq6++ujz22GOy2mqryXHHHbfoQuidd96Rc889Nxzf8ssvL7vssotodb/sssvKZZddJi+99JLMnDkzdE5U9O+9997QQenXr5+ceeaZcvPNN8ttt90m77//fvj5zjvvLKeffross8wyotz33XffYKOMN9poIzn//PND3HqrRDndeuut8vnnn0v37t0D5+9///uB+XnnnSd/+tOfgp++ffvK8ccfH2Jig0CzEkD8m/XMc9zJBJYm/noPW4V4s802C2KsInfkkUeGCwAV6lNOOUX0vr6KkYrPFVdcEQT1ySefDPG0rvxVLCuJ/6677irnnHOOzJ8/X6ZOnSpnnHFGEMH1119fbrnllnAhMGnSpCDErbfFxX/48OEyevRo+dWvfhV86EWEiq6K8pgxY4KY33XXXSFWHfub3/xGDj30UJk8ebIce+yxQZB/8IMfBGHdeuutQ2fkk08+kWOOOUb0Voay0OO55pprgrirKP/TP/1TYNJS+es+9NbJ+PHjwwXLjBkzZMCAAXLllVeGCw/lvuKKKwYfejy6/w022CBcNKjo6zj9ndoqX2WnPz/iiCOkU6dOgdOCBQtCvHphdNJJJyXPAQwh4J0A4u/9DBJ/zQmoCGkVroLSsqkI3XjjjTJt2jQ58MAD5dlnn11UWWp1rcKkVbReDKjoq4hpdfvwww8H0X3llVeSxF/9ajy6qRj27NkzXGy0bDvuuGMQO62glyb+F110kTz11FNhiFb/KvzaudBNL0xUKPXiQsVfRVyrfq2iddP79Xrf/sc//nHYd+tj14uDE044IfxM7R5//PHgo2VrLf5ffPGFfPrpp6GS179ff/310FXQP7vvvns4Tt3X/vvvH8z1ImfKlCnh2YX/+I//kG222SZ0WHSbM2eOvPnmm8HXz372s3CR0rVr1/C7F198UQ4++ODwNxsEmpUA4t+sZ57jTiawtMpfhVNbyt/5zncW+deWtArlc889Jy+//HKoQF977TXp1q1baPtre13b/bpVW/lrhd6jR49gq1W3XlC0vijRSnfw4MFL3FNfvPLXDoFenOimnQJtp6vA66bCqbcmnnnmmUVtf73QadlOPvnk0KLv1auXXHLJJeGCpmV74403QlwvvPBCuM2gbX+tztsS/y+//DKw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" width="639.8608748714686">
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2> 4.5 Comparision between all models </h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[144]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Saving our TEST_RESULTS into a dataframe so that you don&#39;t have to run it again</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">models_evaluation_test</span><span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\small_sample_results.csv&#39;</span><span class="p">)</span>
<span class="n">models</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;D:\AppliedAI\Homework-n-Assignments\# 18 Netflix prize\small_sample_results.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">models</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rmse&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[144]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>svd            1.0726127314093175
knn_bsl_u      1.0726441119270775
svdpp          1.0727362462274097
knn_bsl_m       1.072758832653683
bsl_algo       1.0730330260516174
xgb_final       1.075200131416626
xgb_knn_bsl    1.1007591883189165
first_algo     1.1448873228716383
xgb_bsl         1.147985867967635
Name: rmse, dtype: object</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1> 5. Assignment </h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>1.Instead of using 10K users and 1K movies to train the above models, use 25K users and 3K movies (or more) to train all of the above models. Report the RMSE and MAPE on the test data using larger amount of data and provide a comparison between various models as shown above.</p>
<p>--------------So as asked in the assignment we took 25K user n 3K movies and comparison of the same has been done</p>
<p>NOTE: Please be patient as some of the code snippets make take many hours to compelte execution.</p>
<p>2.Tune hyperparamters of all the Xgboost models above to improve the RMSE.</p>
<p>--------------- As asked we tried various values for example in</p>
<p>a) Surpise KNN we tried below "parameters" (User based)</p>
<p>param_grid  = {'sim_options':{'name': ["pearson_baseline"], "user_based": [True], "min_support": [2], "shrinkage": [60, 80, 100, 120,140,160]}, 'k': [5, 20, 40, 80,100]}</p>
<p>and found best option as 'shrinkage'= 160 and 'k'= 80.</p>
<p>Similarly for other we found</p>
<p>b) Surprise KNN (item based)
'shrinkage' = 100 and 'k'= 40</p>
<p>c)Surprise SVD
{'n_factors'= 15}</p>
<p>d)Suprise SVD++
{'n_factors': 40}</p>
<p>as best values</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="nx">javascript</span>
<span class="c1">// Converts integer to roman numeral</span>
<span class="c1">// https://github.com/kmahelona/ipython_notebook_goodies</span>
<span class="c1">// https://kmahelona.github.io/ipython_notebook_goodies/ipython_notebook_toc.js</span>
<span class="kd">function</span> <span class="nx">romanize</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">lookup</span> <span class="o">=</span> <span class="p">{</span><span class="nx">M</span><span class="o">:</span><span class="mi">1000</span><span class="p">,</span><span class="nx">CM</span><span class="o">:</span><span class="mi">900</span><span class="p">,</span><span class="nx">D</span><span class="o">:</span><span class="mi">500</span><span class="p">,</span><span class="nx">CD</span><span class="o">:</span><span class="mi">400</span><span class="p">,</span><span class="nx">C</span><span class="o">:</span><span class="mi">100</span><span class="p">,</span><span class="nx">XC</span><span class="o">:</span><span class="mi">90</span><span class="p">,</span><span class="nx">L</span><span class="o">:</span><span class="mi">50</span><span class="p">,</span><span class="nx">XL</span><span class="o">:</span><span class="mi">40</span><span class="p">,</span><span class="nx">X</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span><span class="nx">IX</span><span class="o">:</span><span class="mi">9</span><span class="p">,</span><span class="nx">V</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span><span class="nx">IV</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span><span class="nx">I</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span>
	<span class="nx">roman</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
	    <span class="nx">i</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">lookup</span> <span class="p">)</span> <span class="p">{</span>
	    <span class="k">while</span> <span class="p">(</span> <span class="nx">num</span> <span class="o">&gt;=</span> <span class="nx">lookup</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">roman</span> <span class="o">+=</span> <span class="nx">i</span><span class="p">;</span>
		<span class="nx">num</span> <span class="o">-=</span> <span class="nx">lookup</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
	    <span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">roman</span><span class="p">;</span>
 <span class="p">}</span>

<span class="c1">// Builds a &lt;ul&gt; Table of Contents from all &lt;headers&gt; in DOM</span>
<span class="kd">function</span> <span class="nx">createTOC</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">toc</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">levels</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toc&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;:header&quot;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>
	    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="o">==</span><span class="s1">&#39;tocheading&#39;</span><span class="p">){</span><span class="k">return</span><span class="p">;}</span>
        
	    <span class="kd">var</span> <span class="nx">titleText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
	    <span class="kd">var</span> <span class="nx">openLevel</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

	    <span class="k">if</span> <span class="p">(</span><span class="nx">levels</span><span class="p">[</span><span class="nx">openLevel</span><span class="p">]){</span>
		<span class="nx">levels</span><span class="p">[</span><span class="nx">openLevel</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
	    <span class="p">}</span> <span class="k">else</span><span class="p">{</span>
		<span class="nx">levels</span><span class="p">[</span><span class="nx">openLevel</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	    <span class="p">}</span>

	    <span class="k">if</span> <span class="p">(</span><span class="nx">openLevel</span> <span class="o">&gt;</span> <span class="nx">level</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">toc</span> <span class="o">+=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">openLevel</span> <span class="o">-</span> <span class="nx">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&lt;ul class=&quot;toc&quot;&gt;&#39;</span><span class="p">);</span>
	    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">openLevel</span> <span class="o">&lt;</span> <span class="nx">level</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">toc</span> <span class="o">+=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">level</span> <span class="o">-</span> <span class="nx">openLevel</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&lt;/ul&gt;&quot;</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">level</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">openLevel</span><span class="p">;</span><span class="nx">i</span><span class="o">--</span><span class="p">){</span><span class="nx">levels</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;}</span>
	    <span class="p">}</span>

	    <span class="nx">level</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">openLevel</span><span class="p">);</span>


	    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ /g</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="p">)}</span>
	    <span class="kd">var</span> <span class="nx">anchor</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
        
	    <span class="nx">toc</span> <span class="o">+=</span> <span class="s1">&#39;&lt;li&gt;&lt;a style=&quot;text-decoration:none&quot;, href=&quot;#&#39;</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">anchor</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">titleText</span> <span class="o">+</span> <span class="s1">&#39;&lt;/a&gt;&lt;/li&gt;&#39;</span><span class="p">;</span>
        
	<span class="p">});</span>

    
    <span class="k">if</span> <span class="p">(</span><span class="nx">level</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">toc</span> <span class="o">+=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&lt;/ul&gt;&quot;</span><span class="p">);</span>
    <span class="p">}</span>

 
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toc&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">toc</span><span class="p">);</span>

<span class="p">};</span>

<span class="c1">// Executes the createToc function</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">createTOC</span><span class="p">();},</span><span class="mi">100</span><span class="p">);</span>

<span class="c1">// Rebuild to TOC every minute</span>
<span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">createTOC</span><span class="p">();},</span><span class="mi">60000</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

</div>
    </div>
  </div>
</body>

 


</html>
